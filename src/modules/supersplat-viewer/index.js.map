{"version":3,"file":"index.js","sources":["../src/core/observe.ts","../src/settings.ts","../src/tooltip.ts","../src/ui.ts","../src/annotation.ts","../src/annotations.ts","../src/animation/create-rotate-track.ts","../src/core/spline.ts","../src/core/math.ts","../src/animation/anim-cursor.ts","../src/animation/anim-state.ts","../src/cameras/anim-controller.ts","../src/cameras/camera.ts","../src/cameras/fly-controller.ts","../src/cameras/orbit-controller.ts","../src/camera-manager.ts","../src/picker.ts","../src/input-controller.ts","../src/viewer.ts","../node_modules/playcanvas/scripts/esm/xr-controllers.mjs","../node_modules/playcanvas/scripts/esm/xr-navigation.mjs","../src/xr.ts","../src/index.ts"],"sourcesContent":["import { type EventHandler } from 'playcanvas';\r\n\r\n// creates an observer proxy object to wrap some target object. fires events when properties change.\r\nconst observe = (events: EventHandler, target: any) => {\r\n    const members = new Set(Object.keys(target));\r\n\r\n    return new Proxy(target, {\r\n        set(target, property, value, receiver) {\r\n            // prevent setting symbol properties\r\n            if (typeof property === 'symbol') {\r\n                console.error('Cannot set symbol property on target');\r\n                return false;\r\n            }\r\n\r\n            // not allowed to set a new value on target\r\n            if (!members.has(property)) {\r\n                console.error('Cannot set new property on target');\r\n                return false;\r\n            }\r\n\r\n            // set and fire event if value changed\r\n            if (target[property] !== value) {\r\n                const prev = target[property];\r\n                target[property] = value;\r\n                events.fire(`${property}:changed`, value, prev);\r\n            }\r\n\r\n            return true;\r\n        }\r\n    });\r\n};\r\n\r\nexport { observe };\r\n","import { ExperienceSettings as V1, AnimTrack as AnimTrackV1 } from './schemas/v1';\r\nimport { ExperienceSettings as V2, AnimTrack as AnimTrackV2 } from './schemas/v2';\r\n\r\nconst migrateV1 = (settings: V1): V1 => {\r\n    if (settings.animTracks) {\r\n        settings.animTracks?.forEach((track: AnimTrackV1) => {\r\n            // some early settings did not have frameRate set on anim tracks\r\n            if (!track.frameRate) {\r\n                const defaultFrameRate = 30;\r\n\r\n                track.frameRate = defaultFrameRate;\r\n                const times = track.keyframes.times;\r\n                for (let i = 0; i < times.length; i++) {\r\n                    times[i] *= defaultFrameRate;\r\n                }\r\n            }\r\n\r\n            // smoothness property added in v1.4.0\r\n            if (!track.hasOwnProperty('smoothness')) {\r\n                track.smoothness = 0;\r\n            }\r\n        });\r\n    } else {\r\n        // some scenes were published without animTracks\r\n        settings.animTracks = [];\r\n    }\r\n\r\n    return settings;\r\n};\r\n\r\nconst migrateAnimTrackV2 = (animTrackV1: AnimTrackV1, fov: number): AnimTrackV2 => {\r\n    return {\r\n        name: animTrackV1.name,\r\n        duration: animTrackV1.duration,\r\n        frameRate: animTrackV1.frameRate,\r\n        loopMode: animTrackV1.loopMode,\r\n        interpolation: animTrackV1.interpolation,\r\n        smoothness: animTrackV1.smoothness,\r\n        keyframes: {\r\n            times: animTrackV1.keyframes.times,\r\n            values: {\r\n                position: animTrackV1.keyframes.values.position,\r\n                target: animTrackV1.keyframes.values.target,\r\n                fov: new Array(animTrackV1.keyframes.times.length).fill(fov)\r\n            }\r\n        }\r\n    };\r\n};\r\n\r\nconst migrateV2 = (v1: V1): V2 => {\r\n    return {\r\n        version: 2,\r\n        tonemapping: 'none',\r\n        highPrecisionRendering: false,\r\n        background: {\r\n            color: v1.background.color as [number, number, number] || [0, 0, 0]\r\n        },\r\n        postEffectSettings: {\r\n            sharpness: {\r\n                enabled: false,\r\n                amount: 0\r\n            },\r\n            bloom: {\r\n                enabled: false,\r\n                intensity: 1,\r\n                blurLevel: 2\r\n            },\r\n            grading: {\r\n                enabled: false,\r\n                brightness: 0,\r\n                contrast: 1,\r\n                saturation: 1,\r\n                tint: [1, 1, 1]\r\n            },\r\n            vignette: {\r\n                enabled: false,\r\n                intensity: 0.5,\r\n                inner: 0.3,\r\n                outer: 0.75,\r\n                curvature: 1\r\n            },\r\n            fringing: {\r\n                enabled: false,\r\n                intensity: 0.5\r\n            }\r\n        },\r\n        animTracks: v1.animTracks.map((animTrackV1: AnimTrackV1) => {\r\n            return migrateAnimTrackV2(animTrackV1, v1.camera.fov || 60);\r\n        }),\r\n        cameras: [{\r\n            initial: {\r\n                position: (v1.camera.position || [0, 0, 5]) as [number, number, number],\r\n                target: (v1.camera.target || [0, 0, 0]) as [number, number, number],\r\n                fov: v1.camera.fov || 65\r\n            }\r\n        }],\r\n        annotations: [],\r\n        startMode: v1.camera.startAnim === 'animTrack' ? 'animTrack' : 'default',\r\n        hasStartPose: !!(v1.camera.position && v1.camera.target)\r\n    };\r\n};\r\n\r\n// import a json object to conform to the latest settings schema. settings is assumed to be one of the well-formed schemas\r\nconst importSettings = (settings: any): V2 => {\r\n    let result: V2;\r\n\r\n    const version = settings.version;\r\n    if (version === undefined) {\r\n        // v1 -> v2\r\n        result = migrateV2(migrateV1(settings as V1));\r\n    } else if (version === 2) {\r\n        // already v2\r\n        result = settings as V2;\r\n    } else {\r\n        throw new Error(`Unsupported experience settings version: ${version}`);\r\n    }\r\n\r\n    return result;\r\n};\r\n\r\n// export the latest/current schema types\r\nexport type { AnimTrack, Camera, Annotation, PostEffectSettings, ExperienceSettings } from './schemas/v2';\r\n\r\nexport { importSettings };\r\n","type Direction = 'left' | 'right' | 'top' | 'bottom';\r\n\r\nclass Tooltip {\r\n    register: (target: HTMLElement, text: string, direction?: Direction) => void;\r\n\r\n    unregister: (target: HTMLElement) => void;\r\n\r\n    destroy: () => void;\r\n\r\n    constructor(dom: HTMLElement) {\r\n        const { style } = dom;\r\n\r\n        style.display = 'none';\r\n\r\n        const targets = new Map<HTMLElement, any>();\r\n        let timer: number = 0;\r\n\r\n        this.register = (target: HTMLElement, textString: string, direction: Direction = 'bottom') => {\r\n\r\n            const activate = () => {\r\n                const rect = target.getBoundingClientRect();\r\n                const midx = Math.floor((rect.left + rect.right) * 0.5);\r\n                const midy = Math.floor((rect.top + rect.bottom) * 0.5);\r\n\r\n                switch (direction) {\r\n                    case 'left':\r\n                        style.left = `${rect.left}px`;\r\n                        style.top = `${midy}px`;\r\n                        style.transform = 'translate(calc(-100% - 10px), -50%)';\r\n                        break;\r\n                    case 'right':\r\n                        style.left = `${rect.right}px`;\r\n                        style.top = `${midy}px`;\r\n                        style.transform = 'translate(10px, -50%)';\r\n                        break;\r\n                    case 'top':\r\n                        style.left = `${midx}px`;\r\n                        style.top = `${rect.top}px`;\r\n                        style.transform = 'translate(-50%, calc(-100% - 10px))';\r\n                        break;\r\n                    case 'bottom':\r\n                        style.left = `${midx}px`;\r\n                        style.top = `${rect.bottom}px`;\r\n                        style.transform = 'translate(-50%, 10px)';\r\n                        break;\r\n                }\r\n\r\n                dom.textContent = textString;\r\n                style.display = 'inline';\r\n            };\r\n\r\n            const startTimer = (fn: () => void) => {\r\n                timer = window.setTimeout(() => {\r\n                    fn();\r\n                    timer = -1;\r\n                }, 250);\r\n            };\r\n\r\n            const cancelTimer = () => {\r\n                if (timer >= 0) {\r\n                    clearTimeout(timer);\r\n                    timer = -1;\r\n                }\r\n            };\r\n\r\n            const enter = () => {\r\n                cancelTimer();\r\n\r\n                if (style.display === 'inline') {\r\n                    activate();\r\n                } else {\r\n                    startTimer(() => activate());\r\n                }\r\n            };\r\n\r\n            const leave = () => {\r\n                cancelTimer();\r\n\r\n                if (style.display === 'inline') {\r\n                    startTimer(() => {\r\n                        style.display = 'none';\r\n                    });\r\n                }\r\n            };\r\n\r\n            target.addEventListener('pointerenter', enter);\r\n            target.addEventListener('pointerleave', leave);\r\n\r\n            targets.set(target, { enter, leave });\r\n        };\r\n\r\n        this.unregister = (target: HTMLElement) => {\r\n            const value = targets.get(target);\r\n            if (value) {\r\n                target.removeEventListener('pointerenter', value.enter);\r\n                target.removeEventListener('pointerleave', value.leave);\r\n                targets.delete(target);\r\n            }\r\n        };\r\n\r\n        this.destroy = () => {\r\n            for (const target of targets.keys()) {\r\n                this.unregister(target);\r\n            }\r\n        };\r\n    }\r\n}\r\n\r\nexport { Tooltip };\r\n","import { EventHandler, Vec3 } from 'playcanvas';\r\n\r\nimport { Tooltip } from './tooltip';\r\nimport { Global } from './types';\r\n\r\nconst v = new Vec3();\r\n\r\n// update the poster image to start blurry and then resolve to sharp during loading\r\nconst initPoster = (events: EventHandler) => {\r\n    const poster = document.getElementById('poster');\r\n\r\n    events.on('firstFrame', () => {\r\n        poster.style.display = 'none';\r\n        document.documentElement.style.setProperty('--canvas-opacity', '1');\r\n    });\r\n\r\n    const blur = (progress: number) => {\r\n        poster.style.filter = `blur(${Math.floor((100 - progress) * 0.4)}px)`;\r\n    };\r\n\r\n    events.on('progress:changed', blur);\r\n};\r\n\r\nconst initUI = (global: Global) => {\r\n    const { config, events, state } = global;\r\n\r\n    // Acquire Elements\r\n    const docRoot = document.documentElement;\r\n    const dom = [\r\n        'ui',\r\n        'controlsWrap',\r\n        'arMode', 'vrMode',\r\n        'enterFullscreen', 'exitFullscreen',\r\n        'info', 'infoPanel', 'desktopTab', 'touchTab', 'desktopInfoPanel', 'touchInfoPanel',\r\n        'timelineContainer', 'handle', 'time',\r\n        'buttonContainer',\r\n        'play', 'pause',\r\n        'settings', 'settingsPanel',\r\n        'orbitCamera', 'flyCamera',\r\n        'hqCheck', 'hqOption', 'lqCheck', 'lqOption',\r\n        'reset', 'frame',\r\n        'loadingText', 'loadingBar',\r\n        'joystickBase', 'joystick',\r\n        'tooltip'\r\n    ].reduce((acc: Record<string, HTMLElement>, id) => {\r\n        acc[id] = document.getElementById(id);\r\n        return acc;\r\n    }, {});\r\n\r\n    // Handle loading progress updates\r\n    events.on('progress:changed', (progress) => {\r\n        dom.loadingText.textContent = `${progress}%`;\r\n        if (progress < 100) {\r\n            dom.loadingBar.style.backgroundImage = `linear-gradient(90deg, #F60 0%, #F60 ${progress}%, white ${progress}%, white 100%)`;\r\n        } else {\r\n            dom.loadingBar.style.backgroundImage = 'linear-gradient(90deg, #F60 0%, #F60 100%)';\r\n        }\r\n    });\r\n\r\n    // Hide loading bar once first frame is rendered\r\n    events.on('firstFrame', () => {\r\n        document.getElementById('loadingWrap').classList.add('hidden');\r\n    });\r\n\r\n    // Fullscreen support\r\n    const hasFullscreenAPI = docRoot.requestFullscreen && document.exitFullscreen;\r\n\r\n    const requestFullscreen = () => {\r\n        if (hasFullscreenAPI) {\r\n            docRoot.requestFullscreen();\r\n        } else {\r\n            window.parent.postMessage('requestFullscreen', '*');\r\n            state.isFullscreen = true;\r\n        }\r\n    };\r\n\r\n    const exitFullscreen = () => {\r\n        if (hasFullscreenAPI) {\r\n            document.exitFullscreen();\r\n        } else {\r\n            window.parent.postMessage('exitFullscreen', '*');\r\n            state.isFullscreen = false;\r\n        }\r\n    };\r\n\r\n    if (hasFullscreenAPI) {\r\n        document.addEventListener('fullscreenchange', () => {\r\n            state.isFullscreen = !!document.fullscreenElement;\r\n        });\r\n    }\r\n\r\n    dom.enterFullscreen.addEventListener('click', requestFullscreen);\r\n    dom.exitFullscreen.addEventListener('click', exitFullscreen);\r\n\r\n    // toggle fullscreen when user switches between landscape portrait\r\n    // orientation\r\n    screen?.orientation?.addEventListener('change', (event) => {\r\n        if (['landscape-primary', 'landscape-secondary'].includes(screen.orientation.type)) {\r\n            requestFullscreen();\r\n        } else {\r\n            exitFullscreen();\r\n        }\r\n    });\r\n\r\n    // update UI when fullscreen state changes\r\n    events.on('isFullscreen:changed', (value) => {\r\n        dom.enterFullscreen.classList[value ? 'add' : 'remove']('hidden');\r\n        dom.exitFullscreen.classList[value ? 'remove' : 'add']('hidden');\r\n    });\r\n\r\n    // HQ mode\r\n    dom.hqOption.addEventListener('click', () => {\r\n        state.hqMode = true;\r\n    });\r\n    dom.lqOption.addEventListener('click', () => {\r\n        state.hqMode = false;\r\n    });\r\n\r\n    const updateHQ = () => {\r\n        dom.hqCheck.classList[state.hqMode ? 'add' : 'remove']('active');\r\n        dom.lqCheck.classList[state.hqMode ? 'remove' : 'add']('active');\r\n    };\r\n    events.on('hqMode:changed', (value) => {\r\n        updateHQ();\r\n    });\r\n    updateHQ();\r\n\r\n    // AR/VR\r\n    const arChanged = () => dom.arMode.classList[state.hasAR ? 'remove' : 'add']('hidden');\r\n    const vrChanged = () => dom.vrMode.classList[state.hasVR ? 'remove' : 'add']('hidden');\r\n\r\n    dom.arMode.addEventListener('click', () => events.fire('startAR'));\r\n    dom.vrMode.addEventListener('click', () => events.fire('startVR'));\r\n\r\n    events.on('hasAR:changed', arChanged);\r\n    events.on('hasVR:changed', vrChanged);\r\n\r\n    arChanged();\r\n    vrChanged();\r\n\r\n    // Info panel\r\n    const updateInfoTab = (tab: 'desktop' | 'touch') => {\r\n        if (tab === 'desktop') {\r\n            dom.desktopTab.classList.add('active');\r\n            dom.touchTab.classList.remove('active');\r\n            dom.desktopInfoPanel.classList.remove('hidden');\r\n            dom.touchInfoPanel.classList.add('hidden');\r\n        } else {\r\n            dom.desktopTab.classList.remove('active');\r\n            dom.touchTab.classList.add('active');\r\n            dom.desktopInfoPanel.classList.add('hidden');\r\n            dom.touchInfoPanel.classList.remove('hidden');\r\n        }\r\n    };\r\n\r\n    dom.desktopTab.addEventListener('click', () => {\r\n        updateInfoTab('desktop');\r\n    });\r\n\r\n    dom.touchTab.addEventListener('click', () => {\r\n        updateInfoTab('touch');\r\n    });\r\n\r\n    dom.info.addEventListener('click', () => {\r\n        updateInfoTab(state.inputMode);\r\n        dom.infoPanel.classList.toggle('hidden');\r\n    });\r\n\r\n    dom.infoPanel.addEventListener('pointerdown', () => {\r\n        dom.infoPanel.classList.add('hidden');\r\n    });\r\n\r\n    events.on('inputEvent', (event) => {\r\n        if (event === 'cancel') {\r\n            // close info panel on cancel\r\n            dom.infoPanel.classList.add('hidden');\r\n            dom.settingsPanel.classList.add('hidden');\r\n\r\n            // close fullscreen on cancel\r\n            if (state.isFullscreen) {\r\n                exitFullscreen();\r\n            }\r\n        } else if (event === 'interrupt') {\r\n            dom.settingsPanel.classList.add('hidden');\r\n        }\r\n    });\r\n\r\n    // fade ui controls after 5 seconds of inactivity\r\n    events.on('controlsHidden:changed', (value) => {\r\n        dom.controlsWrap.className = value ? 'faded-out' : 'faded-in';\r\n    });\r\n\r\n    // show the ui and start a timer to hide it again\r\n    let uiTimeout: ReturnType<typeof setTimeout> | null = null;\r\n    const showUI = () => {\r\n        if (uiTimeout) {\r\n            clearTimeout(uiTimeout);\r\n        }\r\n        state.controlsHidden = false;\r\n        uiTimeout = setTimeout(() => {\r\n            uiTimeout = null;\r\n            state.controlsHidden = true;\r\n        }, 4000);\r\n    };\r\n    showUI();\r\n\r\n    events.on('inputEvent', showUI);\r\n\r\n    // Animation controls\r\n    events.on('hasAnimation:changed', (value, prev) => {\r\n        // Start and Stop animation\r\n        dom.play.addEventListener('click', () => {\r\n            state.cameraMode = 'anim';\r\n            state.animationPaused = false;\r\n        });\r\n\r\n        dom.pause.addEventListener('click', () => {\r\n            state.cameraMode = 'anim';\r\n            state.animationPaused = true;\r\n        });\r\n\r\n        const updatePlayPause = () => {\r\n            if (state.cameraMode !== 'anim' || state.animationPaused) {\r\n                dom.play.classList.remove('hidden');\r\n                dom.pause.classList.add('hidden');\r\n            } else {\r\n                dom.play.classList.add('hidden');\r\n                dom.pause.classList.remove('hidden');\r\n            }\r\n\r\n            if (state.cameraMode === 'anim') {\r\n                dom.timelineContainer.classList.remove('hidden');\r\n            } else {\r\n                dom.timelineContainer.classList.add('hidden');\r\n            }\r\n        };\r\n\r\n        // Update UI on animation changes\r\n        events.on('cameraMode:changed', updatePlayPause);\r\n        events.on('animationPaused:changed', updatePlayPause);\r\n\r\n        const updateSlider = () => {\r\n            dom.handle.style.left = `${state.animationTime / state.animationDuration * 100}%`;\r\n            dom.time.style.left = `${state.animationTime / state.animationDuration * 100}%`;\r\n            dom.time.innerText = `${state.animationTime.toFixed(1)}s`;\r\n        };\r\n\r\n        events.on('animationTime:changed', updateSlider);\r\n        events.on('animationLength:changed', updateSlider);\r\n\r\n        const handleScrub = (event: PointerEvent) => {\r\n            const rect = dom.timelineContainer.getBoundingClientRect();\r\n            const t = Math.max(0, Math.min(rect.width - 1, event.clientX - rect.left)) / rect.width;\r\n            events.fire('scrubAnim', state.animationDuration * t);\r\n            showUI();\r\n        };\r\n\r\n        let paused = false;\r\n        let captured = false;\r\n\r\n        dom.timelineContainer.addEventListener('pointerdown', (event: PointerEvent) => {\r\n            if (!captured) {\r\n                handleScrub(event);\r\n                dom.timelineContainer.setPointerCapture(event.pointerId);\r\n                dom.time.classList.remove('hidden');\r\n                paused = state.animationPaused;\r\n                state.animationPaused = true;\r\n                captured = true;\r\n            }\r\n        });\r\n\r\n        dom.timelineContainer.addEventListener('pointermove', (event: PointerEvent) => {\r\n            if (captured) {\r\n                handleScrub(event);\r\n            }\r\n        });\r\n\r\n        dom.timelineContainer.addEventListener('pointerup', (event) => {\r\n            if (captured) {\r\n                dom.timelineContainer.releasePointerCapture(event.pointerId);\r\n                dom.time.classList.add('hidden');\r\n                state.animationPaused = paused;\r\n                captured = false;\r\n            }\r\n        });\r\n    });\r\n\r\n    // Camera mode UI\r\n    events.on('cameraMode:changed', () => {\r\n        dom.orbitCamera.classList[state.cameraMode === 'orbit' ? 'add' : 'remove']('active');\r\n        dom.flyCamera.classList[state.cameraMode === 'fly' ? 'add' : 'remove']('active');\r\n    });\r\n\r\n    dom.settings.addEventListener('click', () => {\r\n        dom.settingsPanel.classList.toggle('hidden');\r\n    });\r\n\r\n    dom.orbitCamera.addEventListener('click', () => {\r\n        state.cameraMode = 'orbit';\r\n    });\r\n\r\n    dom.flyCamera.addEventListener('click', () => {\r\n        state.cameraMode = 'fly';\r\n    });\r\n\r\n    dom.reset.addEventListener('click', (event) => {\r\n        events.fire('inputEvent', 'reset', event);\r\n    });\r\n\r\n    dom.frame.addEventListener('click', (event) => {\r\n        events.fire('inputEvent', 'frame', event);\r\n    });\r\n\r\n    // update UI based on touch joystick updates\r\n    events.on('touchJoystickUpdate', (base, stick) => {\r\n        if (base === null) {\r\n            dom.joystickBase.classList.add('hidden');\r\n        } else {\r\n            v.set(stick[0], stick[1], 0).mulScalar(1 / 48);\r\n            if (v.length() > 1) {\r\n                v.normalize();\r\n            }\r\n            v.mulScalar(48);\r\n\r\n            dom.joystickBase.classList.remove('hidden');\r\n            dom.joystickBase.style.left = `${base[0]}px`;\r\n            dom.joystickBase.style.top = `${base[1]}px`;\r\n            dom.joystick.style.left = `${48 + v.x}px`;\r\n            dom.joystick.style.top = `${48 + v.y}px`;\r\n        }\r\n    });\r\n\r\n    // Hide all UI (poster, loading bar, controls)\r\n    if (config.noui) {\r\n        dom.ui.classList.add('hidden');\r\n    }\r\n\r\n    // tooltips\r\n    const tooltip = new Tooltip(dom.tooltip);\r\n\r\n    tooltip.register(dom.play, 'Play', 'top');\r\n    tooltip.register(dom.pause, 'Pause', 'top');\r\n    tooltip.register(dom.orbitCamera, 'Orbit Camera', 'top');\r\n    tooltip.register(dom.flyCamera, 'Fly Camera', 'top');\r\n    tooltip.register(dom.reset, 'Reset Camera', 'bottom');\r\n    tooltip.register(dom.frame, 'Frame Scene', 'bottom');\r\n    tooltip.register(dom.settings, 'Settings', 'top');\r\n    tooltip.register(dom.info, 'Help', 'top');\r\n    tooltip.register(dom.arMode, 'Enter AR', 'top');\r\n    tooltip.register(dom.vrMode, 'Enter VR', 'top');\r\n    tooltip.register(dom.enterFullscreen, 'Fullscreen', 'top');\r\n    tooltip.register(dom.exitFullscreen, 'Fullscreen', 'top');\r\n};\r\n\r\nexport { initPoster, initUI };\r\n","import {\r\n    type AppBase,\r\n    CULLFACE_NONE,\r\n    FILTER_LINEAR,\r\n    PIXELFORMAT_RGBA8,\r\n    BlendState,\r\n    Color,\r\n    Entity,\r\n    Layer,\r\n    Mesh,\r\n    MeshInstance,\r\n    PlaneGeometry,\r\n    Script,\r\n    StandardMaterial,\r\n    Texture,\r\n    type Quat,\r\n    Vec3,\r\n    BLENDEQUATION_ADD,\r\n    BLENDMODE_ONE,\r\n    BLENDMODE_ONE_MINUS_SRC_ALPHA,\r\n    BLENDMODE_SRC_ALPHA\r\n} from 'playcanvas';\r\n\r\n// clamp the vertices of the hotspot so it is never clipped by the near or far plane\r\nconst depthClamp = `\r\n    float f = gl_Position.z / gl_Position.w;\r\n    if (f > 1.0) {\r\n        gl_Position.z = gl_Position.w;\r\n    } else if (f < -1.0) {\r\n        gl_Position.z = -gl_Position.w;\r\n    }\r\n`;\r\n\r\nconst vec = new Vec3();\r\n\r\n/**\r\n * A script for creating interactive 3D annotations in a scene. Each annotation consists of:\r\n *\r\n * - A 3D hotspot that maintains constant screen-space size. The hotspot is rendered with muted\r\n * appearance when obstructed by geometry but is still clickable. The hotspot relies on an\r\n * invisible DOM element that matches the hotspot's size and position to detect clicks.\r\n * - An annotation panel that shows title and description text.\r\n */\r\nexport class Annotation extends Script {\r\n    static scriptName = 'annotation';\r\n\r\n    static hotspotSize = 25;\r\n\r\n    static hotspotColor = new Color(0.8, 0.8, 0.8);\r\n\r\n    static hoverColor = new Color(1.0, 0.4, 0.0);\r\n\r\n    static parentDom: HTMLElement | null = null;\r\n\r\n    static styleSheet: HTMLStyleElement | null = null;\r\n\r\n    static camera: Entity | null = null;\r\n\r\n    static tooltipDom: HTMLDivElement | null = null;\r\n\r\n    static titleDom: HTMLDivElement | null = null;\r\n\r\n    static textDom: HTMLDivElement | null = null;\r\n\r\n    static layers: Layer[] = [];\r\n\r\n    static mesh: Mesh | null = null;\r\n\r\n    static activeAnnotation: Annotation | null = null;\r\n\r\n    static hoverAnnotation: Annotation | null = null;\r\n\r\n    static opacity = 1.0;\r\n\r\n    /**\r\n     * @attribute\r\n     */\r\n    label: string;\r\n\r\n    /**\r\n     * @attribute\r\n     */\r\n    title: string;\r\n\r\n    /**\r\n     * @attribute\r\n     */\r\n    text: string;\r\n\r\n    /**\r\n     * @private\r\n     */\r\n    hotspotDom: HTMLDivElement | null = null;\r\n\r\n    /**\r\n     * @private\r\n     */\r\n    texture: Texture | null = null;\r\n\r\n    /**\r\n     * @private\r\n     */\r\n    materials: StandardMaterial[] = [];\r\n\r\n    /**\r\n     * Injects required CSS styles into the document.\r\n     * @param {number} size - The size of the hotspot in screen pixels.\r\n     * @private\r\n     */\r\n    static _injectStyles(size: number) {\r\n        const css = `\r\n            .pc-annotation {\r\n                display: block;\r\n                position: absolute;\r\n                background-color: rgba(0, 0, 0, 0.8);\r\n                color: white;\r\n                padding: 8px;\r\n                border-radius: 4px;\r\n                font-size: 14px;\r\n                font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\";\r\n                pointer-events: none;\r\n                max-width: 200px;\r\n                word-wrap: break-word;\r\n                overflow-x: visible;\r\n                white-space: normal;\r\n                width: fit-content;\r\n                opacity: 0;\r\n                transition: opacity 0.2s ease-in-out;\r\n                visibility: hidden;\r\n                transform: translate(25px, -50%);\r\n            }\r\n\r\n            .pc-annotation-title {\r\n                font-weight: bold;\r\n                margin-bottom: 4px;\r\n            }\r\n\r\n            /* Add a little triangular arrow on the left edge of the tooltip */\r\n            .pc-annotation::before {\r\n                content: \"\";\r\n                position: absolute;\r\n                left: -8px;\r\n                top: 50%;\r\n                transform: translateY(-50%);\r\n                width: 0;\r\n                height: 0;\r\n                border-top: 8px solid transparent;\r\n                border-bottom: 8px solid transparent;\r\n                border-right: 8px solid rgba(0, 0, 0, 0.8);\r\n            }\r\n\r\n            .pc-annotation-hotspot {\r\n                display: none;\r\n                position: absolute;\r\n                width: ${size + 5}px;\r\n                height: ${size + 5}px;\r\n                opacity: 0;\r\n                cursor: pointer;\r\n                transform: translate(-50%, -50%);\r\n            }\r\n        `;\r\n\r\n        const style = document.createElement('style');\r\n        style.textContent = css;\r\n        document.head.appendChild(style);\r\n        Annotation.styleSheet = style;\r\n    }\r\n\r\n    /**\r\n     * Initialize static resources.\r\n     * @param {AppBase} app - The application instance\r\n     * @private\r\n     */\r\n    static _initializeStatic(app: AppBase) {\r\n        if (Annotation.styleSheet) {\r\n            return;\r\n        }\r\n\r\n        Annotation._injectStyles(Annotation.hotspotSize);\r\n\r\n        if (Annotation.parentDom === null) {\r\n            Annotation.parentDom = document.body;\r\n        }\r\n\r\n        const { layers } = app.scene;\r\n        const worldLayer = layers.getLayerByName('World');\r\n\r\n        const createLayer = (name: string, semitrans: boolean) => {\r\n            const layer = new Layer({ name: name });\r\n            const idx = semitrans ? layers.getTransparentIndex(worldLayer) : layers.getOpaqueIndex(worldLayer);\r\n            layers.insert(layer, idx + 1);\r\n            return layer;\r\n        };\r\n\r\n        Annotation.layers = [\r\n            createLayer('HotspotBase', false),\r\n            createLayer('HotspotOverlay', true)\r\n        ];\r\n\r\n        if (Annotation.camera === null) {\r\n            Annotation.camera = app.root.findComponent('camera').entity;\r\n        }\r\n\r\n        Annotation.camera.camera.layers = [\r\n            ...Annotation.camera.camera.layers,\r\n            ...Annotation.layers.map(layer => layer.id)\r\n        ];\r\n\r\n        Annotation.mesh = Mesh.fromGeometry(app.graphicsDevice, new PlaneGeometry({\r\n            widthSegments: 1,\r\n            lengthSegments: 1\r\n        }));\r\n\r\n        // Initialize tooltip dom\r\n        Annotation.tooltipDom = document.createElement('div');\r\n        Annotation.tooltipDom.className = 'pc-annotation';\r\n\r\n        Annotation.titleDom = document.createElement('div');\r\n        Annotation.titleDom.className = 'pc-annotation-title';\r\n        Annotation.tooltipDom.appendChild(Annotation.titleDom);\r\n\r\n        Annotation.textDom = document.createElement('div');\r\n        Annotation.textDom.className = 'pc-annotation-text';\r\n        Annotation.tooltipDom.appendChild(Annotation.textDom);\r\n\r\n        Annotation.parentDom.appendChild(Annotation.tooltipDom);\r\n    }\r\n\r\n    /**\r\n     * Creates a circular hotspot texture.\r\n     * @param {AppBase} app - The PlayCanvas AppBase\r\n     * @param {string} label - Label text to draw on the hotspot\r\n     * @param {number} [size] - The texture size (should be power of 2)\r\n     * @param {number} [borderWidth] - The border width in pixels\r\n     * @returns {Texture} The hotspot texture\r\n     * @private\r\n     */\r\n    static _createHotspotTexture(app: AppBase, label: string, size = 64, borderWidth = 6) {\r\n        // Create canvas for hotspot texture\r\n        const canvas = document.createElement('canvas');\r\n        canvas.width = size;\r\n        canvas.height = size;\r\n        const ctx = canvas.getContext('2d');\r\n\r\n        // First clear with stroke color at zero alpha\r\n        ctx.fillStyle = 'white';\r\n        ctx.globalAlpha = 0;\r\n        ctx.fillRect(0, 0, size, size);\r\n        ctx.globalAlpha = 1.0;\r\n\r\n        // Draw dark circle with light border\r\n        const centerX = size / 2;\r\n        const centerY = size / 2;\r\n        const radius = (size / 2) - 4; // Leave space for border\r\n\r\n        // Draw main circle\r\n        ctx.beginPath();\r\n        ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);\r\n        ctx.fillStyle = 'black';\r\n        ctx.fill();\r\n\r\n        // Draw border\r\n        ctx.beginPath();\r\n        ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);\r\n        ctx.lineWidth = borderWidth;\r\n        ctx.strokeStyle = 'white';\r\n        ctx.stroke();\r\n\r\n        // Draw text\r\n        ctx.font = 'bold 32px Arial';\r\n        ctx.textAlign = 'center';\r\n        ctx.textBaseline = 'middle';\r\n        ctx.fillStyle = 'white';\r\n        ctx.fillText(label, Math.floor(canvas.width / 2), Math.floor(canvas.height / 2) + 1);\r\n\r\n        // get pixel data\r\n        const imageData = ctx.getImageData(0, 0, size, size);\r\n        const data = imageData.data;\r\n\r\n        // set the color channel of semitransparent pixels to white so the blending at\r\n        // the edges is correct\r\n        for (let i = 0; i < data.length; i += 4) {\r\n            const a = data[i + 3];\r\n            if (a < 255) {\r\n                data[i] = 255;\r\n                data[i + 1] = 255;\r\n                data[i + 2] = 255;\r\n            }\r\n        }\r\n\r\n        const texture = new Texture(app.graphicsDevice, {\r\n            width: size,\r\n            height: size,\r\n            format: PIXELFORMAT_RGBA8,\r\n            magFilter: FILTER_LINEAR,\r\n            minFilter: FILTER_LINEAR,\r\n            mipmaps: false,\r\n            levels: [new Uint8Array(data.buffer)]\r\n        });\r\n\r\n        return texture;\r\n    }\r\n\r\n    /**\r\n     * Creates a material for hotspot rendering.\r\n     * @param {Texture} texture - The texture to use for emissive and opacity\r\n     * @param {object} [options] - Material options\r\n     * @param {number} [options.opacity] - Base opacity multiplier\r\n     * @param {boolean} [options.depthTest] - Whether to perform depth testing\r\n     * @param {boolean} [options.depthWrite] - Whether to write to depth buffer\r\n     * @returns {StandardMaterial} The configured material\r\n     * @private\r\n     */\r\n    static _createHotspotMaterial(texture: Texture, { opacity = 1, depthTest = true, depthWrite = true } = {}) {\r\n        const material = new StandardMaterial();\r\n\r\n        // Base properties\r\n        material.diffuse = Color.BLACK;\r\n        material.emissive.copy(Annotation.hotspotColor);\r\n        material.emissiveMap = texture;\r\n        material.opacityMap = texture;\r\n\r\n        // Alpha properties\r\n        material.opacity = opacity;\r\n        material.alphaTest = 0.01;\r\n        material.blendState = new BlendState(\r\n            true,\r\n            BLENDEQUATION_ADD, BLENDMODE_SRC_ALPHA, BLENDMODE_ONE_MINUS_SRC_ALPHA,\r\n            BLENDEQUATION_ADD, BLENDMODE_ONE, BLENDMODE_ONE\r\n        );\r\n\r\n        // Depth properties\r\n        material.depthTest = depthTest;\r\n        material.depthWrite = depthWrite;\r\n\r\n        // Rendering properties\r\n        material.cull = CULLFACE_NONE;\r\n        material.useLighting = false;\r\n\r\n        material.shaderChunks.glsl.add({\r\n            'litUserMainEndVS': depthClamp\r\n        });\r\n\r\n        material.update();\r\n        return material;\r\n    }\r\n\r\n    initialize() {\r\n        // Ensure static resources are initialized\r\n        Annotation._initializeStatic(this.app);\r\n\r\n        // Create texture\r\n        this.texture = Annotation._createHotspotTexture(this.app, this.label);\r\n\r\n        // Create material the base and overlay material\r\n        this.materials = [\r\n            Annotation._createHotspotMaterial(this.texture, {\r\n                opacity: 1,\r\n                depthTest: true,\r\n                depthWrite: true\r\n            }),\r\n            Annotation._createHotspotMaterial(this.texture, {\r\n                opacity: 0.25,\r\n                depthTest: false,\r\n                depthWrite: false\r\n            })\r\n        ];\r\n\r\n        const base = new Entity('base');\r\n        const baseMi = new MeshInstance(Annotation.mesh, this.materials[0]);\r\n        baseMi.cull = false;\r\n        base.addComponent('render', {\r\n            layers: [Annotation.layers[0].id],\r\n            meshInstances: [baseMi]\r\n        });\r\n\r\n        const overlay = new Entity('overlay');\r\n        const overlayMi = new MeshInstance(Annotation.mesh, this.materials[1]);\r\n        overlayMi.cull = false;\r\n        overlay.addComponent('render', {\r\n            layers: [Annotation.layers[1].id],\r\n            meshInstances: [overlayMi]\r\n        });\r\n\r\n        this.entity.addChild(base);\r\n        this.entity.addChild(overlay);\r\n\r\n        // Create hotspot dom\r\n        this.hotspotDom = document.createElement('div');\r\n        this.hotspotDom.className = 'pc-annotation-hotspot';\r\n\r\n        // Add click handlers\r\n        this.hotspotDom.addEventListener('click', (e) => {\r\n            e.stopPropagation();\r\n            this.showTooltip();\r\n        });\r\n\r\n        const leave = () => {\r\n            if (Annotation.hoverAnnotation === this) {\r\n                Annotation.hoverAnnotation = null;\r\n                this.setHover(false);\r\n            }\r\n        };\r\n\r\n        const enter = () => {\r\n            if (Annotation.hoverAnnotation !== null) {\r\n                Annotation.hoverAnnotation.setHover(false);\r\n            }\r\n            Annotation.hoverAnnotation = this;\r\n            this.setHover(true);\r\n        };\r\n\r\n        this.hotspotDom.addEventListener('pointerenter', enter);\r\n        this.hotspotDom.addEventListener('pointerleave', leave);\r\n\r\n        document.addEventListener('click', () => {\r\n            this.hideTooltip();\r\n        });\r\n\r\n        Annotation.parentDom.appendChild(this.hotspotDom);\r\n\r\n        // Clean up on entity destruction\r\n        this.on('destroy', () => {\r\n            this.hotspotDom.remove();\r\n            if (Annotation.activeAnnotation === this) {\r\n                this.hideTooltip();\r\n            }\r\n\r\n            this.materials.forEach(mat => mat.destroy());\r\n            this.materials = [];\r\n\r\n            this.texture.destroy();\r\n            this.texture = null;\r\n        });\r\n\r\n        this.app.on('prerender', () => {\r\n            if (!Annotation.camera) return;\r\n\r\n            const position = this.entity.getPosition();\r\n            const screenPos = Annotation.camera.camera.worldToScreen(position);\r\n\r\n            const { viewMatrix } = Annotation.camera.camera;\r\n            viewMatrix.transformPoint(position, vec);\r\n            if (vec.z >= 0) {\r\n                this._hideElements();\r\n                return;\r\n            }\r\n\r\n            this._updatePositions(screenPos);\r\n            this._updateRotationAndScale();\r\n\r\n            // update material opacity and also directly on the uniform so we\r\n            // can avoid a full material update\r\n            this.materials[0].opacity = Annotation.opacity;\r\n            this.materials[1].opacity = 0.25 * Annotation.opacity;\r\n            this.materials[0].setParameter('material_opacity', Annotation.opacity);\r\n            this.materials[1].setParameter('material_opacity', 0.25 * Annotation.opacity);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Set the hover state of the annotation.\r\n     * @param hover - Whether the annotation is hovered\r\n     * @private\r\n     */\r\n    setHover(hover: boolean) {\r\n        this.materials.forEach((material) => {\r\n            material.emissive.copy(hover ? Annotation.hoverColor : Annotation.hotspotColor);\r\n            material.update();\r\n        });\r\n        this.fire('hover', hover);\r\n    }\r\n\r\n    /**\r\n     * @private\r\n     */\r\n    showTooltip() {\r\n        Annotation.activeAnnotation = this;\r\n        Annotation.tooltipDom.style.visibility = 'visible';\r\n        Annotation.tooltipDom.style.opacity = '1';\r\n        Annotation.titleDom.textContent = this.title;\r\n        Annotation.textDom.textContent = this.text;\r\n        this.fire('show', this);\r\n    }\r\n\r\n    /**\r\n     * @private\r\n     */\r\n    hideTooltip() {\r\n        Annotation.activeAnnotation = null;\r\n        Annotation.tooltipDom.style.opacity = '0';\r\n\r\n        // Wait for fade out before hiding\r\n        setTimeout(() => {\r\n            if (Annotation.tooltipDom.style.opacity === '0') {\r\n                Annotation.tooltipDom.style.visibility = 'hidden';\r\n            }\r\n            this.fire('hide');\r\n        }, 200); // Match the transition duration\r\n    }\r\n\r\n    /**\r\n     * Hide all elements when annotation is behind camera.\r\n     * @private\r\n     */\r\n    _hideElements() {\r\n        this.hotspotDom.style.display = 'none';\r\n        if (Annotation.activeAnnotation === this) {\r\n            if (Annotation.tooltipDom.style.visibility !== 'hidden') {\r\n                this.hideTooltip();\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Update screen-space positions of HTML elements.\r\n     * @param {Vec3} screenPos - Screen coordinate\r\n     * @private\r\n     */\r\n    _updatePositions(screenPos: Vec3) {\r\n        // Show and position hotspot\r\n        this.hotspotDom.style.display = 'block';\r\n        this.hotspotDom.style.left = `${screenPos.x}px`;\r\n        this.hotspotDom.style.top = `${screenPos.y}px`;\r\n\r\n        // Position tooltip\r\n        if (Annotation.activeAnnotation === this) {\r\n            Annotation.tooltipDom.style.left = `${screenPos.x}px`;\r\n            Annotation.tooltipDom.style.top = `${screenPos.y}px`;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Update 3D rotation and scale of hotspot planes.\r\n     * @private\r\n     */\r\n    _updateRotationAndScale() {\r\n        // Copy camera rotation to align with view plane\r\n        const cameraRotation = Annotation.camera.getRotation();\r\n        this._updateHotspotTransform(this.entity, cameraRotation);\r\n\r\n        // Calculate scale based on distance to maintain constant screen size\r\n        const scale = this._calculateScreenSpaceScale();\r\n        this.entity.setLocalScale(scale, scale, scale);\r\n    }\r\n\r\n    /**\r\n     * Update rotation of a single hotspot entity.\r\n     * @param {Entity} hotspot - The hotspot entity to update\r\n     * @param {Quat} cameraRotation - The camera's current rotation\r\n     * @private\r\n     */\r\n    _updateHotspotTransform(hotspot: Entity, cameraRotation: Quat) {\r\n        hotspot.setRotation(cameraRotation);\r\n        hotspot.rotateLocal(90, 0, 0);\r\n    }\r\n\r\n    /**\r\n     * Calculate scale factor to maintain constant screen-space size.\r\n     * @returns {number} The scale to apply to hotspot entities\r\n     * @private\r\n     */\r\n    _calculateScreenSpaceScale() {\r\n        const cameraPos = Annotation.camera.getPosition();\r\n        const toAnnotation = this.entity.getPosition().sub(cameraPos);\r\n        const distance = toAnnotation.length();\r\n\r\n        // Use the canvas's CSS/client height instead of graphics device height\r\n        const canvas = this.app.graphicsDevice.canvas;\r\n        const screenHeight = canvas.clientHeight;\r\n\r\n        // Get the camera's projection matrix vertical scale factor\r\n        const projMatrix = Annotation.camera.camera.projectionMatrix;\r\n        const worldSize = (Annotation.hotspotSize / screenHeight) * (2 * distance / projMatrix.data[5]);\r\n\r\n        return worldSize;\r\n    }\r\n}\r\n","import { Entity } from 'playcanvas';\r\n\r\nimport { Annotation } from './annotation';\r\nimport type { Annotation as AnnotationSettings } from './settings';\r\nimport type { Global } from './types';\r\n\r\nclass Annotations {\r\n    annotations: AnnotationSettings[];\r\n\r\n    parentDom: HTMLElement;\r\n\r\n    constructor(global: Global, hasCameraFrame: boolean) {\r\n        // create dom parent\r\n        const parentDom = document.createElement('div');\r\n        parentDom.id = 'annotations';\r\n        Annotation.parentDom = parentDom;\r\n        document.querySelector('#ui').appendChild(parentDom);\r\n\r\n        global.events.on('controlsHidden:changed', (value) => {\r\n            parentDom.style.display = value ? 'none' : 'block';\r\n            Annotation.opacity = value ? 0.0 : 1.0;\r\n            global.app.renderNextFrame = true;\r\n        });\r\n\r\n        this.annotations = global.settings.annotations;\r\n        this.parentDom = parentDom;\r\n\r\n        if (hasCameraFrame) {\r\n            Annotation.hotspotColor.gamma();\r\n            Annotation.hoverColor.gamma();\r\n        }\r\n\r\n        // create annotation entities\r\n        const parent = global.app.root;\r\n\r\n        for (let i = 0; i < this.annotations.length; i++) {\r\n            const ann = this.annotations[i];\r\n\r\n            const entity = new Entity();\r\n            entity.addComponent('script');\r\n            entity.script.create(Annotation);\r\n            const script = entity.script as any;\r\n            script.annotation.label = (i + 1).toString();\r\n            script.annotation.title = ann.title;\r\n            script.annotation.text = ann.text;\r\n\r\n            entity.setPosition(ann.position[0], ann.position[1], ann.position[2]);\r\n\r\n            parent.addChild(entity);\r\n\r\n            // handle an annotation being activated/shown\r\n            script.annotation.on('show', () => {\r\n                global.events.fire('annotation.activate', ann);\r\n            });\r\n\r\n            // re-render if hover state changes\r\n            script.annotation.on('hover', (hover: boolean) => {\r\n                global.app.renderNextFrame = true;\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\nexport { Annotations };\r\n","import {\r\n    Mat4,\r\n    Vec3\r\n} from 'playcanvas';\r\n\r\nimport { AnimTrack } from '../settings';\r\n\r\n/**\r\n * Creates a rotation animation track\r\n *\r\n * @param position - Starting location of the camera.\r\n * @param target - Target point around which to rotate\r\n * @param fov - The camera field of view.\r\n * @param keys - The number of keys in the animation.\r\n * @param duration - The duration of the animation in seconds.\r\n * @returns - The animation track object containing position and target keyframes.\r\n */\r\nconst createRotateTrack = (position: Vec3, target: Vec3, fov: number, keys: number = 12, duration: number = 20): AnimTrack => {\r\n    const times = new Array(keys).fill(0).map((_, i) => i / keys * duration);\r\n    const positions: number[] = [];\r\n    const targets: number[] = [];\r\n    const fovs = new Array(keys).fill(fov);\r\n\r\n    const mat = new Mat4();\r\n    const vec = new Vec3();\r\n    const dif = new Vec3(\r\n        position.x - target.x,\r\n        position.y - target.y,\r\n        position.z - target.z\r\n    );\r\n\r\n    for (let i = 0; i < keys; ++i) {\r\n        mat.setFromEulerAngles(0, -i / keys * 360, 0);\r\n        mat.transformPoint(dif, vec);\r\n\r\n        positions.push(target.x + vec.x);\r\n        positions.push(target.y + vec.y);\r\n        positions.push(target.z + vec.z);\r\n\r\n        targets.push(target.x);\r\n        targets.push(target.y);\r\n        targets.push(target.z);\r\n    }\r\n\r\n    return {\r\n        name: 'rotate',\r\n        duration,\r\n        frameRate: 1,\r\n        loopMode: 'repeat',\r\n        interpolation: 'spline',\r\n        smoothness: 1,\r\n        keyframes: {\r\n            times,\r\n            values: {\r\n                position: positions,\r\n                target: targets,\r\n                fov: fovs\r\n            }\r\n        }\r\n    };\r\n};\r\n\r\nexport { createRotateTrack };\r\n","class CubicSpline {\r\n    // control times\r\n    times: number[];\r\n\r\n    // control data: in-tangent, point, out-tangent\r\n    knots: number[];\r\n\r\n    // dimension of the knot points\r\n    dim: number;\r\n\r\n    constructor(times: number[], knots: number[]) {\r\n        this.times = times;\r\n        this.knots = knots;\r\n        this.dim = knots.length / times.length / 3;\r\n    }\r\n\r\n    evaluate(time: number, result: number[]) {\r\n        const { times } = this;\r\n        const last = times.length - 1;\r\n\r\n        if (time <= times[0]) {\r\n            this.getKnot(0, result);\r\n        } else if (time >= times[last]) {\r\n            this.getKnot(last, result);\r\n        } else {\r\n            let seg = 0;\r\n            while (time >= times[seg + 1]) {\r\n                seg++;\r\n            }\r\n            this.evaluateSegment(seg, (time - times[seg]) / (times[seg + 1] - times[seg]), result);\r\n        }\r\n    }\r\n\r\n    getKnot(index: number, result: number[]) {\r\n        const { knots, dim } = this;\r\n        const idx = index * 3 * dim;\r\n        for (let i = 0; i < dim; ++i) {\r\n            result[i] = knots[idx + i * 3 + 1];\r\n        }\r\n    }\r\n\r\n    // evaluate the spline segment at the given normalized time t\r\n    evaluateSegment(segment: number, t: number, result: number[]) {\r\n        const { knots, dim } = this;\r\n\r\n        const t2 = t * t;\r\n        const twot = t + t;\r\n        const omt = 1 - t;\r\n        const omt2 = omt * omt;\r\n\r\n        let idx = segment * dim * 3;                    // each knot has 3 values: tangent in, value, tangent out\r\n        for (let i = 0; i < dim; ++i) {\r\n            const p0 = knots[idx + 1];                  // p0\r\n            const m0 = knots[idx + 2];                  // outgoing tangent\r\n            const m1 = knots[idx + dim * 3];            // incoming tangent\r\n            const p1 = knots[idx + dim * 3 + 1];        // p1\r\n            idx += 3;\r\n\r\n            result[i] =\r\n                p0 * ((1 + twot) * omt2) +\r\n                m0 * (t * omt2) +\r\n                p1 * (t2 * (3 - twot)) +\r\n                m1 * (t2 * (t - 1));\r\n        }\r\n    }\r\n\r\n    // calculate cubic spline knots from points\r\n    // times: time values for each control point\r\n    // points: control point values to be interpolated (n dimensional)\r\n    // smoothness: 0 = linear, 1 = smooth\r\n    static calcKnots(times: number[], points: number[], smoothness: number) {\r\n        const n = times.length;\r\n        const dim = points.length / n;\r\n        const knots = new Array<number>(n * dim * 3);\r\n\r\n        for (let i = 0; i < n; i++) {\r\n            const t = times[i];\r\n\r\n            for (let j = 0; j < dim; j++) {\r\n                const idx = i * dim + j;\r\n                const p = points[idx];\r\n\r\n                let tangent;\r\n                if (i === 0) {\r\n                    tangent = (points[idx + dim] - p) / (times[i + 1] - t);\r\n                } else if (i === n - 1) {\r\n                    tangent = (p - points[idx - dim]) / (t - times[i - 1]);\r\n                } else {\r\n                    tangent = (points[idx + dim] - points[idx - dim]) / (times[i + 1] - times[i - 1]);\r\n                }\r\n\r\n                // convert to derivatives w.r.t normalized segment parameter\r\n                const inScale = i > 0 ? (times[i] - times[i - 1]) : (times[1] - times[0]);\r\n                const outScale = i < n - 1 ? (times[i + 1] - times[i]) : (times[i] - times[i - 1]);\r\n\r\n                knots[idx * 3] = tangent * inScale * smoothness;\r\n                knots[idx * 3 + 1] = p;\r\n                knots[idx * 3 + 2] = tangent * outScale * smoothness;\r\n            }\r\n        }\r\n\r\n        return knots;\r\n    }\r\n\r\n    static fromPoints(times: number[], points: number[], smoothness = 1) {\r\n        return new CubicSpline(times, CubicSpline.calcKnots(times, points, smoothness));\r\n    }\r\n\r\n    // create a looping spline by duplicating animation points at the end and beginning\r\n    static fromPointsLooping(length: number, times: number[], points: number[], smoothness = 1) {\r\n        if (times.length < 2) {\r\n            return CubicSpline.fromPoints(times, points);\r\n        }\r\n\r\n        const dim = points.length / times.length;\r\n        const newTimes = times.slice();\r\n        const newPoints = points.slice();\r\n\r\n        // append first two points\r\n        newTimes.push(length + times[0], length + times[1]);\r\n        newPoints.push(...points.slice(0, dim * 2));\r\n\r\n        // prepend last two points\r\n        newTimes.splice(0, 0, times[times.length - 2] - length, times[times.length - 1] - length);\r\n        newPoints.splice(0, 0, ...points.slice(points.length - dim * 2));\r\n\r\n        return CubicSpline.fromPoints(newTimes, newPoints, smoothness);\r\n    }\r\n}\r\n\r\nexport { CubicSpline };\r\n","import type { Vec3 } from 'playcanvas';\r\n\r\n/**\r\n * Damping function to smooth out transitions.\r\n *\r\n * @param damping - Damping factor (0 < damping < 1).\r\n * @param dt - Delta time in seconds.\r\n * @returns - Damping factor adjusted for the delta time.\r\n */\r\nconst damp = (damping: number, dt: number) => 1 - Math.pow(damping, dt * 1000);\r\n\r\n/**\r\n * Easing function for smooth transitions.\r\n *\r\n * @param x - Input value in the range [0, 1].\r\n * @returns - Output value in the range [0, 1].\r\n */\r\nconst easeOut = (x: number) => (1 - (2 ** (-10 * x))) / (1 - (2 ** -10));\r\n\r\n/**\r\n * Modulus function that handles negative values correctly.\r\n *\r\n * @param n - The number to be modulated.\r\n * @param m - The modulus value.\r\n * @returns - The result of n mod m, adjusted to be non-negative.\r\n */\r\nconst mod = (n: number, m: number) => ((n % m) + m) % m;\r\n\r\nconst nearlyEquals = (a: Float32Array<ArrayBufferLike>, b: Float32Array<ArrayBufferLike>, epsilon = 1e-4) => {\r\n    return !a.some((v, i) => Math.abs(v - b[i]) >= epsilon);\r\n};\r\n\r\nconst vecToAngles = (result: Vec3, vec: Vec3) => {\r\n    const radToDeg = 180 / Math.PI;\r\n    result.x = Math.asin(vec.y) * radToDeg;\r\n    result.y = Math.atan2(-vec.x, -vec.z) * radToDeg;\r\n    result.z = 0;\r\n    return result;\r\n};\r\n\r\nexport { damp, easeOut, mod, nearlyEquals, vecToAngles };\r\n","import { mod } from '../core/math';\r\n\r\n// track an animation cursor with support for repeat and ping-pong loop modes\r\nclass AnimCursor {\r\n    duration: number = 0;\r\n\r\n    loopMode: 'none' | 'repeat' | 'pingpong' = 'none';\r\n\r\n    timer: number = 0;\r\n\r\n    cursor: number = 0;\r\n\r\n    constructor(duration: number, loopMode: 'none' | 'repeat' | 'pingpong') {\r\n        this.reset(duration, loopMode);\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n        // update animation timer\r\n        this.timer += deltaTime;\r\n\r\n        // update the track cursor\r\n        this.cursor += deltaTime;\r\n\r\n        if (this.cursor >= this.duration) {\r\n            switch (this.loopMode) {\r\n                case 'none': this.cursor = this.duration; break;\r\n                case 'repeat': this.cursor %= this.duration; break;\r\n                case 'pingpong': this.cursor %= (this.duration * 2); break;\r\n            }\r\n        }\r\n    }\r\n\r\n    reset(duration: number, loopMode: 'none' | 'repeat' | 'pingpong') {\r\n        this.duration = duration;\r\n        this.loopMode = loopMode;\r\n        this.timer = 0;\r\n        this.cursor = 0;\r\n    }\r\n\r\n    set value(value: number) {\r\n        this.cursor = mod(value, this.duration);\r\n    }\r\n\r\n    get value() {\r\n        return this.cursor > this.duration ? this.duration - this.cursor : this.cursor;\r\n    }\r\n}\r\n\r\nexport { AnimCursor };\r\n","import { Vec3 } from 'playcanvas';\r\n\r\nimport { CubicSpline } from '../core/spline';\r\nimport { AnimTrack } from '../settings';\r\nimport { AnimCursor } from './anim-cursor';\r\n\r\n// manage the state of a camera animation track\r\nclass AnimState {\r\n    spline: CubicSpline;\r\n\r\n    cursor: AnimCursor = new AnimCursor(0, 'none');\r\n\r\n    frameRate: number;\r\n\r\n    result: number[] = [];\r\n\r\n    position: Vec3 = new Vec3();\r\n\r\n    target: Vec3 = new Vec3();\r\n\r\n    constructor(spline: CubicSpline, duration: number, loopMode: 'none' | 'repeat' | 'pingpong', frameRate: number) {\r\n        this.spline = spline;\r\n        this.cursor.reset(duration, loopMode);\r\n        this.frameRate = frameRate;\r\n    }\r\n\r\n    // update given delta time\r\n    update(dt: number) {\r\n        const { cursor, result, spline, frameRate, position, target } = this;\r\n\r\n        // update the animation cursor\r\n        cursor.update(dt);\r\n\r\n        // evaluate the spline\r\n        spline.evaluate(cursor.value * frameRate, result);\r\n\r\n        if (result.every(isFinite)) {\r\n            position.set(result[0], result[1], result[2]);\r\n            target.set(result[3], result[4], result[5]);\r\n        }\r\n    }\r\n\r\n    // construct an animation from a settings track\r\n    static fromTrack(track: AnimTrack) {\r\n        const { keyframes, duration, frameRate, loopMode, smoothness } = track;\r\n        const { times, values } = keyframes;\r\n        const { position, target } = values;\r\n\r\n        // construct the points array containing position and target\r\n        const points = [];\r\n        for (let i = 0; i < times.length; i++) {\r\n            points.push(position[i * 3], position[i * 3 + 1], position[i * 3 + 2]);\r\n            points.push(target[i * 3], target[i * 3 + 1], target[i * 3 + 2]);\r\n        }\r\n\r\n        const extra = (duration === times[times.length - 1] / frameRate) ? 1 : 0;\r\n\r\n        const spline = CubicSpline.fromPointsLooping((duration + extra) * frameRate, times, points, smoothness);\r\n\r\n        return new AnimState(spline, duration, loopMode, frameRate);\r\n    }\r\n}\r\n\r\nexport { AnimState };\r\n","import type { Camera, CameraFrame } from './camera';\r\nimport { CameraController } from './camera';\r\nimport { AnimState } from '../animation/anim-state';\r\nimport { AnimTrack } from '../settings';\r\n\r\nclass AnimController implements CameraController {\r\n    animState: AnimState;\r\n\r\n    constructor(animTrack: AnimTrack) {\r\n        this.animState = AnimState.fromTrack(animTrack);\r\n        this.animState.update(0);\r\n    }\r\n\r\n    onEnter(camera: Camera): void {\r\n        // snap camera to start position\r\n        camera.look(this.animState.position, this.animState.target);\r\n    }\r\n\r\n    update(deltaTime: number, inputFrame: CameraFrame, camera: Camera) {\r\n        this.animState.update(deltaTime);\r\n\r\n        // update camera pose\r\n        camera.look(this.animState.position, this.animState.target);\r\n\r\n        // ignore input\r\n        inputFrame.read();\r\n    }\r\n\r\n    onExit(camera: Camera): void {\r\n\r\n    }\r\n}\r\n\r\nexport { AnimController };\r\n","import { math, Vec3, Quat } from 'playcanvas';\r\nimport type { InputFrame } from 'playcanvas';\r\n\r\nimport { vecToAngles } from '../core/math';\r\n\r\ntype CameraFrame = InputFrame<{\r\n    move: [number, number, number];\r\n    rotate: [number, number, number];\r\n}>;\r\n\r\nconst rotation = new Quat();\r\nconst avec = new Vec3();\r\nconst bvec = new Vec3();\r\n\r\nclass Camera {\r\n    position = new Vec3();\r\n\r\n    angles = new Vec3();\r\n\r\n    distance = 1;\r\n\r\n    fov = 65;\r\n\r\n    constructor(other?: Camera) {\r\n        if (other) {\r\n            this.copy(other);\r\n        }\r\n    }\r\n\r\n    copy(source: Camera) {\r\n        this.position.copy(source.position);\r\n        this.angles.copy(source.angles);\r\n        this.distance = source.distance;\r\n        this.fov = source.fov;\r\n    }\r\n\r\n    lerp(a: Camera, b: Camera, t: number) {\r\n        a.calcFocusPoint(avec);\r\n        b.calcFocusPoint(bvec);\r\n\r\n        this.position.lerp(a.position, b.position, t);\r\n        avec.lerp(avec, bvec, t).sub(this.position);\r\n\r\n        this.distance = avec.length();\r\n\r\n        vecToAngles(this.angles, avec.mulScalar(1.0 / this.distance));\r\n\r\n        this.fov = math.lerp(a.fov, b.fov, t);\r\n    }\r\n\r\n    look(from: Vec3, to: Vec3) {\r\n        this.position.copy(from);\r\n        this.distance = from.distance(to);\r\n        const dir = avec.sub2(to, from).normalize();\r\n        vecToAngles(this.angles, dir);\r\n    }\r\n\r\n    calcFocusPoint(result: Vec3) {\r\n        rotation.setFromEulerAngles(this.angles)\r\n        .transformVector(Vec3.FORWARD, result)\r\n        .mulScalar(this.distance)\r\n        .add(this.position);\r\n    }\r\n}\r\n\r\ninterface CameraController {\r\n    onEnter(camera: Camera): void;\r\n    update(deltaTime: number, inputFrame: CameraFrame, camera: Camera): void;\r\n    onExit(camera: Camera): void;\r\n}\r\n\r\nexport type { CameraFrame, CameraController };\r\n\r\nexport { Camera };\r\n","import {\r\n    FlyController as FlyControllerPC,\r\n    Pose,\r\n    Vec2\r\n} from 'playcanvas';\r\n\r\nimport type { CameraFrame, Camera, CameraController } from './camera';\r\n\r\nconst p = new Pose();\r\n\r\nclass FlyController implements CameraController {\r\n    controller: FlyControllerPC;\r\n\r\n    constructor() {\r\n        this.controller = new FlyControllerPC();\r\n        this.controller.pitchRange = new Vec2(-90, 90);\r\n        this.controller.rotateDamping = 0.97;\r\n        this.controller.moveDamping = 0.97;\r\n    }\r\n\r\n    onEnter(camera: Camera): void {\r\n        p.position.copy(camera.position);\r\n        p.angles.copy(camera.angles);\r\n        p.distance = camera.distance;\r\n        this.controller.attach(p, false);\r\n    }\r\n\r\n    update(deltaTime: number, inputFrame: CameraFrame, camera: Camera) {\r\n        const pose = this.controller.update(inputFrame, deltaTime);\r\n\r\n        camera.position.copy(pose.position);\r\n        camera.angles.copy(pose.angles);\r\n        camera.distance = pose.distance;\r\n    }\r\n\r\n    onExit(camera: Camera): void {\r\n\r\n    }\r\n\r\n    goto(pose: Pose) {\r\n        this.controller.attach(pose, true);\r\n    }\r\n}\r\n\r\nexport { FlyController };\r\n","import {\r\n    OrbitController as OrbitControllerPC,\r\n    Pose,\r\n    Vec2\r\n} from 'playcanvas';\r\n\r\nimport type { Camera, CameraFrame, CameraController } from './camera';\r\n\r\nconst p = new Pose();\r\n\r\nclass OrbitController implements CameraController {\r\n    controller: OrbitControllerPC;\r\n\r\n    constructor() {\r\n        this.controller = new OrbitControllerPC();\r\n        this.controller.zoomRange = new Vec2(0.01, Infinity);\r\n        this.controller.pitchRange = new Vec2(-90, 90);\r\n        this.controller.rotateDamping = 0.97;\r\n        this.controller.moveDamping = 0.97;\r\n        this.controller.zoomDamping = 0.97;\r\n    }\r\n\r\n    onEnter(camera: Camera): void {\r\n        p.position.copy(camera.position);\r\n        p.angles.copy(camera.angles);\r\n        p.distance = camera.distance;\r\n        this.controller.attach(p, false);\r\n    }\r\n\r\n    update(deltaTime: number, inputFrame: CameraFrame, camera: Camera) {\r\n        const pose = this.controller.update(inputFrame, deltaTime);\r\n\r\n        camera.position.copy(pose.position);\r\n        camera.angles.copy(pose.angles);\r\n        camera.distance = pose.distance;\r\n    }\r\n\r\n    onExit(camera: Camera): void {\r\n\r\n    }\r\n\r\n    goto(camera: Camera) {\r\n        p.position.copy(camera.position);\r\n        p.angles.copy(camera.angles);\r\n        p.distance = camera.distance;\r\n        this.controller.attach(p, true);\r\n    }\r\n}\r\n\r\nexport { OrbitController };\r\n","import {\r\n    type BoundingBox,\r\n    Vec3\r\n} from 'playcanvas';\r\n\r\nimport { createRotateTrack } from './animation/create-rotate-track';\r\nimport { AnimController } from './cameras/anim-controller';\r\nimport { Camera, type CameraFrame, type CameraController } from './cameras/camera';\r\nimport { FlyController } from './cameras/fly-controller';\r\nimport { OrbitController } from './cameras/orbit-controller';\r\nimport { easeOut } from './core/math';\r\nimport { Annotation } from './settings';\r\nimport { CameraMode, Global } from './types';\r\n\r\nconst tmpCamera = new Camera();\r\nconst tmpv = new Vec3();\r\n\r\nconst createCamera = (position: Vec3, target: Vec3, fov: number) => {\r\n    const result = new Camera();\r\n    result.look(position, target);\r\n    result.fov = fov;\r\n    return result;\r\n};\r\n\r\nconst createFrameCamera = (bbox: BoundingBox, fov: number) => {\r\n    const sceneSize = bbox.halfExtents.length();\r\n    const distance = sceneSize / Math.sin(fov / 180 * Math.PI * 0.5);\r\n    return createCamera(\r\n        new Vec3(2, 1, 2).normalize().mulScalar(distance).add(bbox.center),\r\n        bbox.center,\r\n        fov\r\n    );\r\n};\r\n\r\nclass CameraManager {\r\n    update: (deltaTime: number, cameraFrame: CameraFrame) => void;\r\n\r\n    // holds the camera state\r\n    camera = new Camera();\r\n\r\n    constructor(global: Global, bbox: BoundingBox) {\r\n        const { events, settings, state } = global;\r\n\r\n        const camera0 = settings.cameras[0].initial;\r\n        const frameCamera = createFrameCamera(bbox, camera0.fov);\r\n        const resetCamera = createCamera(new Vec3(camera0.position), new Vec3(camera0.target), camera0.fov);\r\n\r\n        const getAnimTrack = (initial: Camera, isObjectExperience: boolean) => {\r\n            const { animTracks } = settings;\r\n\r\n            // extract the camera animation track from settings\r\n            if (animTracks?.length > 0 && settings.startMode === 'animTrack') {\r\n                // use the first animTrack\r\n                return animTracks[0];\r\n            } else if (isObjectExperience) {\r\n                // create basic rotation animation if no anim track is specified\r\n                initial.calcFocusPoint(tmpv);\r\n                return createRotateTrack(initial.position, tmpv, initial.fov);\r\n            }\r\n            return null;\r\n        };\r\n\r\n        // object experience starts outside the bounding box\r\n        const isObjectExperience = !bbox.containsPoint(resetCamera.position);\r\n        const animTrack = getAnimTrack(settings.hasStartPose ? resetCamera : frameCamera, isObjectExperience);\r\n\r\n        const controllers = {\r\n            orbit: new OrbitController(),\r\n            fly: new FlyController(),\r\n            anim: animTrack ? new AnimController(animTrack) : null\r\n        };\r\n\r\n        const getController = (cameraMode: 'orbit' | 'anim' | 'fly'): CameraController => {\r\n            return controllers[cameraMode];\r\n        };\r\n\r\n        // set the global animation flag\r\n        state.hasAnimation = !!controllers.anim;\r\n        state.animationDuration = controllers.anim ? controllers.anim.animState.cursor.duration : 0;\r\n\r\n        // initialize camera mode and initial camera position\r\n        state.cameraMode = state.hasAnimation ? 'anim' : (isObjectExperience ? 'orbit' : 'fly');\r\n        this.camera.copy(resetCamera);\r\n\r\n        const target = new Camera(this.camera);             // the active controller updates this\r\n        const from = new Camera(this.camera);               // stores the previous camera state during transition\r\n        let fromMode: CameraMode = isObjectExperience ? 'orbit' : 'fly';\r\n\r\n        // enter the initial controller\r\n        getController(state.cameraMode).onEnter(this.camera);\r\n\r\n        // transition time between cameras\r\n        const transitionSpeed = 2.0;\r\n        let transitionTimer = 1;\r\n\r\n        // application update\r\n        this.update = (deltaTime: number, frame: CameraFrame) => {\r\n\r\n            // use dt of 0 if animation is paused\r\n            const dt = state.cameraMode === 'anim' && state.animationPaused ? 0 : deltaTime;\r\n\r\n            // update transition timer\r\n            transitionTimer = Math.min(1, transitionTimer + deltaTime * transitionSpeed);\r\n\r\n            const controller = getController(state.cameraMode);\r\n\r\n            controller.update(dt, frame, target);\r\n\r\n            if (transitionTimer < 1) {\r\n                // lerp away from previous camera during transition\r\n                this.camera.lerp(from, target, easeOut(transitionTimer));\r\n            } else {\r\n                this.camera.copy(target);\r\n            }\r\n\r\n            // update animation timeline\r\n            if (state.cameraMode === 'anim') {\r\n                state.animationTime = controllers.anim.animState.cursor.value;\r\n            }\r\n        };\r\n\r\n        // handle input events\r\n        events.on('inputEvent', (eventName, event) => {\r\n            switch (eventName) {\r\n                case 'frame':\r\n                    state.cameraMode = 'orbit';\r\n                    controllers.orbit.goto(frameCamera);\r\n                    break;\r\n                case 'reset':\r\n                    state.cameraMode = 'orbit';\r\n                    controllers.orbit.goto(resetCamera);\r\n                    break;\r\n                case 'playPause':\r\n                    if (state.hasAnimation) {\r\n                        if (state.cameraMode === 'anim') {\r\n                            state.animationPaused = !state.animationPaused;\r\n                        } else {\r\n                            state.cameraMode = 'anim';\r\n                            state.animationPaused = false;\r\n                        }\r\n                    }\r\n                    break;\r\n                case 'cancel':\r\n                case 'interrupt':\r\n                    if (state.cameraMode === 'anim') {\r\n                        state.cameraMode = fromMode;\r\n                    }\r\n                    break;\r\n            }\r\n        });\r\n\r\n        // handle camera mode switching\r\n        events.on('cameraMode:changed', (value, prev) => {\r\n            // store previous camera mode and pose\r\n            target.copy(this.camera);\r\n            from.copy(this.camera);\r\n            fromMode = prev;\r\n\r\n            // exit the old controller\r\n            const prevController = getController(prev);\r\n            prevController.onExit(this.camera);\r\n\r\n            // enter new controller\r\n            const newController = getController(value);\r\n            newController.onEnter(this.camera);\r\n\r\n            // reset camera transition timer\r\n            transitionTimer = 0;\r\n        });\r\n\r\n        // handle user scrubbing the animation timeline\r\n        events.on('scrubAnim', (time) => {\r\n            // switch to animation camera if we're not already there\r\n            state.cameraMode = 'anim';\r\n\r\n            // set time\r\n            controllers.anim.animState.cursor.value = time;\r\n        });\r\n\r\n        // handle user picking in the scene\r\n        events.on('pick', (position: Vec3) => {\r\n            // switch to orbit camera on pick\r\n            state.cameraMode = 'orbit';\r\n\r\n            // construct camera\r\n            tmpCamera.copy(this.camera);\r\n            tmpCamera.look(this.camera.position, position);\r\n\r\n            controllers.orbit.goto(tmpCamera);\r\n        });\r\n\r\n        events.on('annotation.activate', (annotation: Annotation) => {\r\n            // switch to orbit camera on pick\r\n            state.cameraMode = 'orbit';\r\n\r\n            const { initial } = annotation.camera;\r\n\r\n            // construct camera\r\n            tmpCamera.fov = initial.fov;\r\n            tmpCamera.look(\r\n                new Vec3(initial.position),\r\n                new Vec3(initial.target)\r\n            );\r\n\r\n            controllers.orbit.goto(tmpCamera);\r\n        });\r\n    }\r\n}\r\n\r\nexport { CameraManager };","import { type AppBase, type Entity, Picker as Picker_, Vec3, Vec4 } from 'playcanvas';\r\n\r\nconst float32 = new Float32Array(1);\r\nconst uint8 = new Uint8Array(float32.buffer);\r\nconst two = new Vec4(2, 2, 2, 1);\r\nconst one = new Vec4(1, 1, 1, 0);\r\n\r\nclass Picker {\r\n    app: AppBase;\r\n\r\n    camera: Entity;\r\n\r\n    picker: Picker_;\r\n\r\n    constructor(app: AppBase, camera: Entity) {\r\n        this.app = app;\r\n        this.camera = camera;\r\n        this.picker = null;\r\n    }\r\n\r\n    async pick(x: number, y: number) {\r\n        const { app, camera } = this;\r\n        const { graphicsDevice } = app;\r\n        const { canvas } = graphicsDevice;\r\n        const width = canvas.clientWidth;\r\n        const height = canvas.clientHeight;\r\n\r\n        y = graphicsDevice.isWebGL2 ? height - y - 1 : y;\r\n\r\n        // construct picker on demand\r\n        if (!this.picker) {\r\n            this.picker = new Picker_(app, width, height);\r\n        }\r\n\r\n        // render scene, read depth\r\n        const { picker } = this;\r\n        picker.resize(width, height);\r\n        picker.prepare(camera.camera, app.scene, [app.scene.layers.getLayerByName('World')]);\r\n        const pixels = await picker.renderTarget.colorBuffer.read(x, y, 1, 1, {\r\n            renderTarget: picker.renderTarget\r\n        });\r\n\r\n        for (let i = 0; i < 4; ++i) {\r\n            uint8[i] = pixels[i];\r\n        }\r\n\r\n        const depth = float32[0];\r\n\r\n        // 255, 255, 255, 255 === NaN\r\n        if (!isFinite(depth)) {\r\n            return null;\r\n        }\r\n\r\n        // clip space\r\n        const pos = new Vec4(x / width, y / height, depth, 1).mul(two).sub(one);\r\n\r\n        if (!graphicsDevice.isWebGL2) {\r\n            pos.y *= -1;\r\n        }\r\n\r\n        // homogeneous view space\r\n        camera.camera.projectionMatrix.clone().invert().transformVec4(pos, pos);\r\n\r\n        // perform perspective divide\r\n        pos.mulScalar(1.0 / pos.w);\r\n\r\n        // view to world space\r\n        const pos3 = new Vec3(pos.x, pos.y, pos.z);\r\n        camera.getWorldTransform().transformPoint(pos3, pos3);\r\n\r\n        return pos3;\r\n    }\r\n}\r\n\r\nexport { Picker };","import {\r\n    math,\r\n    DualGestureSource,\r\n    GamepadSource,\r\n    InputFrame,\r\n    KeyboardMouseSource,\r\n    MultiTouchSource,\r\n    PROJECTION_PERSPECTIVE,\r\n    Vec3\r\n} from 'playcanvas';\r\nimport type { CameraComponent } from 'playcanvas';\r\n\r\nimport { Picker } from './picker';\r\nimport type { Global } from './types';\r\n\r\n/* Vec initialisation to avoid recurrent memory allocation */\r\nconst tmpV1 = new Vec3();\r\nconst tmpV2 = new Vec3();\r\nconst mouseRotate = new Vec3();\r\nconst flyMove = new Vec3();\r\nconst pinchMove = new Vec3();\r\nconst orbitRotate = new Vec3();\r\nconst flyRotate = new Vec3();\r\nconst stickMove = new Vec3();\r\nconst stickRotate = new Vec3();\r\n\r\n/**\r\n * Converts screen space mouse deltas to world space pan vector.\r\n *\r\n * @param camera - The camera component.\r\n * @param dx - The mouse delta x value.\r\n * @param dy - The mouse delta y value.\r\n * @param dz - The world space zoom delta value.\r\n * @param out - The output vector to store the pan result.\r\n * @returns - The pan vector in world space.\r\n * @private\r\n */\r\nconst screenToWorld = (camera: CameraComponent, dx: number, dy: number, dz: number, out: Vec3 = new Vec3()) => {\r\n    const { system, fov, aspectRatio, horizontalFov, projection, orthoHeight } = camera;\r\n    const { width, height } = system.app.graphicsDevice.clientRect;\r\n\r\n    // normalize deltas to device coord space\r\n    out.set(\r\n        -(dx / width) * 2,\r\n        (dy / height) * 2,\r\n        0\r\n    );\r\n\r\n    // calculate half size of the view frustum at the current distance\r\n    const halfSize = tmpV2.set(0, 0, 0);\r\n    if (projection === PROJECTION_PERSPECTIVE) {\r\n        const halfSlice = dz * Math.tan(0.5 * fov * math.DEG_TO_RAD);\r\n        if (horizontalFov) {\r\n            halfSize.set(\r\n                halfSlice,\r\n                halfSlice / aspectRatio,\r\n                0\r\n            );\r\n        } else {\r\n            halfSize.set(\r\n                halfSlice * aspectRatio,\r\n                halfSlice,\r\n                0\r\n            );\r\n        }\r\n    } else {\r\n        halfSize.set(\r\n            orthoHeight * aspectRatio,\r\n            orthoHeight,\r\n            0\r\n        );\r\n    }\r\n\r\n    // scale by device coord space\r\n    out.mul(halfSize);\r\n\r\n    return out;\r\n};\r\n\r\nclass InputController {\r\n    private _state = {\r\n        axis: new Vec3(),\r\n        mouse: [0, 0, 0],\r\n        shift: 0,\r\n        ctrl: 0,\r\n        touches: 0\r\n    };\r\n\r\n    private _desktopInput: KeyboardMouseSource = new KeyboardMouseSource();\r\n\r\n    private _orbitInput = new MultiTouchSource();\r\n\r\n    private _flyInput = new DualGestureSource();\r\n\r\n    private _gamepadInput = new GamepadSource();\r\n\r\n    global: Global;\r\n\r\n    frame = new InputFrame({\r\n        move: [0, 0, 0],\r\n        rotate: [0, 0, 0]\r\n    });\r\n\r\n    joystick: {\r\n        base: [number, number] | null,\r\n        stick: [number, number] | null\r\n    } = { base: null, stick: null };\r\n\r\n    // this gets overridden by the viewer based on scene size\r\n    moveSpeed: number = 4;\r\n\r\n    orbitSpeed: number = 18;\r\n\r\n    pinchSpeed: number = 0.4;\r\n\r\n    wheelSpeed: number = 0.06;\r\n\r\n    constructor(global: Global) {\r\n        const { app, camera, events, state } = global;\r\n        const canvas = app.graphicsDevice.canvas as HTMLCanvasElement;\r\n\r\n        this._desktopInput.attach(canvas);\r\n        this._orbitInput.attach(canvas);\r\n        this._flyInput.attach(canvas);\r\n\r\n        // convert events to joystick state\r\n        this._flyInput.on('joystick:position:left', ([bx, by, sx, sy]) => {\r\n            if (bx < 0 || by < 0 || sx < 0 || sy < 0) {\r\n                this.joystick.base = null;\r\n                this.joystick.stick = null;\r\n                return;\r\n            }\r\n            this.joystick.base = [bx, by];\r\n            this.joystick.stick = [sx - bx, sy - by];\r\n        });\r\n\r\n        this.global = global;\r\n\r\n        // Generate input events\r\n        ['wheel', 'pointerdown', 'contextmenu', 'keydown'].forEach((eventName) => {\r\n            canvas.addEventListener(eventName, (event) => {\r\n                events.fire('inputEvent', 'interrupt', event);\r\n            });\r\n        });\r\n\r\n        canvas.addEventListener('pointermove', (event) => {\r\n            events.fire('inputEvent', 'interact', event);\r\n        });\r\n\r\n        // Detect double taps manually because iOS doesn't send dblclick events\r\n        const lastTap = { time: 0, x: 0, y: 0 };\r\n        canvas.addEventListener('pointerdown', (event) => {\r\n            const now = Date.now();\r\n            const delay = Math.max(0, now - lastTap.time);\r\n            if (delay < 300 &&\r\n                Math.abs(event.clientX - lastTap.x) < 8 &&\r\n                Math.abs(event.clientY - lastTap.y) < 8) {\r\n                events.fire('inputEvent', 'dblclick', event);\r\n                lastTap.time = 0;\r\n            } else {\r\n                lastTap.time = now;\r\n                lastTap.x = event.clientX;\r\n                lastTap.y = event.clientY;\r\n            }\r\n        });\r\n\r\n        // Calculate pick location on double click\r\n        let picker: Picker | null = null;\r\n        events.on('inputEvent', async (eventName, event) => {\r\n            switch (eventName) {\r\n                case 'dblclick': {\r\n                    if (!picker) {\r\n                        picker = new Picker(app, camera);\r\n                    }\r\n                    const result = await picker.pick(event.offsetX, event.offsetY);\r\n                    if (result) {\r\n                        events.fire('pick', result);\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n        });\r\n\r\n        // update input mode based on pointer event\r\n        ['pointerdown', 'pointermove'].forEach((eventName) => {\r\n            window.addEventListener(eventName, (event: PointerEvent) => {\r\n                state.inputMode = event.pointerType === 'touch' ? 'touch' : 'desktop';\r\n            });\r\n        });\r\n\r\n        // handle keyboard events\r\n        window.addEventListener('keydown', (event: KeyboardEvent) => {\r\n            if (event.key === 'Escape') {\r\n                events.fire('inputEvent', 'cancel', event);\r\n            } else if (!event.ctrlKey && !event.altKey && !event.metaKey) {\r\n                switch (event.key) {\r\n                    case 'f':\r\n                        events.fire('inputEvent', 'frame', event);\r\n                        break;\r\n                    case 'r':\r\n                        events.fire('inputEvent', 'reset', event);\r\n                        break;\r\n                    case ' ':\r\n                        events.fire('inputEvent', 'playPause', event);\r\n                        break;\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * @param dt - delta time in seconds\r\n     * @param state - the current state of the app\r\n     * @param state.cameraMode - the current camera mode\r\n     * @param distance - the distance to the camera target\r\n     */\r\n    update(dt: number, distance: number) {\r\n        const { keyCode } = KeyboardMouseSource;\r\n\r\n        const { key, button, mouse, wheel } = this._desktopInput.read();\r\n        const { touch, pinch, count } = this._orbitInput.read();\r\n        const { leftInput, rightInput } = this._flyInput.read();\r\n        const { leftStick, rightStick } = this._gamepadInput.read();\r\n\r\n        const { events, state } = this.global;\r\n        const { camera } = this.global.camera;\r\n\r\n        // update state\r\n        this._state.axis.add(tmpV1.set(\r\n            (key[keyCode.D] - key[keyCode.A]) + (key[keyCode.RIGHT] - key[keyCode.LEFT]),\r\n            (key[keyCode.E] - key[keyCode.Q]),\r\n            (key[keyCode.W] - key[keyCode.S]) + (key[keyCode.UP] - key[keyCode.DOWN])\r\n        ));\r\n        this._state.touches += count[0];\r\n        for (let i = 0; i < button.length; i++) {\r\n            this._state.mouse[i] += button[i];\r\n        }\r\n        this._state.shift += key[keyCode.SHIFT];\r\n        this._state.ctrl += key[keyCode.CTRL];\r\n\r\n        if (state.cameraMode !== 'fly' && this._state.axis.length() > 0) {\r\n            state.cameraMode = 'fly';\r\n        }\r\n\r\n        const orbit = +(state.cameraMode === 'orbit');\r\n        const fly = +(state.cameraMode === 'fly');\r\n        const double = +(this._state.touches > 1);\r\n        const pan = this._state.mouse[2] || +(button[2] === -1) || double;\r\n\r\n        const orbitFactor = fly ? camera.fov / 120 : 1;\r\n\r\n        const { deltas } = this.frame;\r\n\r\n        // desktop move\r\n        const v = tmpV1.set(0, 0, 0);\r\n        const keyMove = this._state.axis.clone().normalize();\r\n        v.add(keyMove.mulScalar(fly * this.moveSpeed * (this._state.shift ? 4 : this._state.ctrl ? 0.25 : 1) * dt));\r\n        const panMove = screenToWorld(camera, mouse[0], mouse[1], distance);\r\n        v.add(panMove.mulScalar(pan));\r\n        const wheelMove = new Vec3(0, 0, -wheel[0]);\r\n        v.add(wheelMove.mulScalar(this.wheelSpeed * dt));\r\n        // FIXME: need to flip z axis for orbit camera\r\n        deltas.move.append([v.x, v.y, orbit ? -v.z : v.z]);\r\n\r\n        // desktop rotate\r\n        v.set(0, 0, 0);\r\n        mouseRotate.set(mouse[0], mouse[1], 0);\r\n        v.add(mouseRotate.mulScalar((1 - pan) * this.orbitSpeed * orbitFactor * dt));\r\n        deltas.rotate.append([v.x, v.y, v.z]);\r\n\r\n        // mobile move\r\n        v.set(0, 0, 0);\r\n        const orbitMove = screenToWorld(camera, touch[0], touch[1], distance);\r\n        v.add(orbitMove.mulScalar(orbit * pan));\r\n        flyMove.set(leftInput[0], 0, -leftInput[1]);\r\n        v.add(flyMove.mulScalar(fly * this.moveSpeed * dt));\r\n        pinchMove.set(0, 0, pinch[0]);\r\n        v.add(pinchMove.mulScalar(orbit * double * this.pinchSpeed * dt));\r\n        deltas.move.append([v.x, v.y, v.z]);\r\n\r\n        // mobile rotate\r\n        v.set(0, 0, 0);\r\n        orbitRotate.set(touch[0], touch[1], 0);\r\n        v.add(orbitRotate.mulScalar(orbit * (1 - pan) * this.orbitSpeed * dt));\r\n        flyRotate.set(rightInput[0], rightInput[1], 0);\r\n        v.add(flyRotate.mulScalar(fly * this.orbitSpeed * orbitFactor * dt));\r\n        deltas.rotate.append([v.x, v.y, v.z]);\r\n\r\n        // gamepad move\r\n        v.set(0, 0, 0);\r\n        stickMove.set(leftStick[0], 0, -leftStick[1]);\r\n        v.add(stickMove.mulScalar(this.moveSpeed * dt));\r\n        deltas.move.append([v.x, v.y, v.z]);\r\n\r\n        // gamepad rotate\r\n        v.set(0, 0, 0);\r\n        stickRotate.set(rightStick[0], rightStick[1], 0);\r\n        v.add(stickRotate.mulScalar(this.orbitSpeed * orbitFactor * dt));\r\n        deltas.rotate.append([v.x, v.y, v.z]);\r\n\r\n        // update touch joystick UI\r\n        if (state.cameraMode === 'fly') {\r\n            events.fire('touchJoystickUpdate', this.joystick.base, this.joystick.stick);\r\n        }\r\n    }\r\n}\r\n\r\nexport { InputController };\r\n","import {\r\n    BoundingBox,\r\n    CameraFrame,\r\n    type CameraComponent,\r\n    Color,\r\n    type Entity,\r\n    type Layer,\r\n    RenderTarget,\r\n    Mat4,\r\n    MiniStats,\r\n    ShaderChunks,\r\n    type TextureHandler,\r\n    PIXELFORMAT_RGBA16F,\r\n    PIXELFORMAT_RGBA32F,\r\n    TONEMAP_NONE,\r\n    TONEMAP_LINEAR,\r\n    TONEMAP_FILMIC,\r\n    TONEMAP_HEJL,\r\n    TONEMAP_ACES,\r\n    TONEMAP_ACES2,\r\n    TONEMAP_NEUTRAL,\r\n    Vec3,\r\n    GSplatComponent,\r\n    platform\r\n} from 'playcanvas';\r\n\r\nimport { Annotations } from './annotations';\r\nimport { CameraManager } from './camera-manager';\r\nimport { Camera } from './cameras/camera';\r\nimport { nearlyEquals } from './core/math';\r\nimport { InputController } from './input-controller';\r\nimport type { ExperienceSettings, PostEffectSettings } from './settings';\r\nimport type { Global } from './types';\r\n\r\n// override global pick to pack depth instead of meshInstance id\r\nconst pickDepthGlsl = /* glsl */ `\r\nvec4 packFloat(float depth) {\r\n    uvec4 u = (uvec4(floatBitsToUint(depth)) >> uvec4(0u, 8u, 16u, 24u)) & 0xffu;\r\n    return vec4(u) / 255.0;\r\n}\r\nvec4 getPickOutput() {\r\n    return packFloat(gl_FragCoord.z);\r\n}\r\n`;\r\n\r\nconst gammaChunk = `\r\nvec3 prepareOutputFromGamma(vec3 gammaColor) {\r\n    return gammaColor;\r\n}\r\n`;\r\n\r\nconst pickDepthWgsl = /* wgsl */ `\r\n    fn packFloat(depth: f32) -> vec4f {\r\n        let u: vec4<u32> = (vec4<u32>(bitcast<u32>(depth)) >> vec4<u32>(0u, 8u, 16u, 24u)) & vec4<u32>(0xffu);\r\n        return vec4f(u) / 255.0;\r\n    }\r\n\r\n    fn getPickOutput() -> vec4f {\r\n        return packFloat(pcPosition.z);\r\n    }\r\n`;\r\n\r\nconst tonemapTable: Record<string, number> = {\r\n    none: TONEMAP_NONE,\r\n    linear: TONEMAP_LINEAR,\r\n    filmic: TONEMAP_FILMIC,\r\n    hejl: TONEMAP_HEJL,\r\n    aces: TONEMAP_ACES,\r\n    aces2: TONEMAP_ACES2,\r\n    neutral: TONEMAP_NEUTRAL\r\n};\r\n\r\nconst applyPostEffectSettings = (cameraFrame: CameraFrame, settings: PostEffectSettings) => {\r\n    if (settings.sharpness.enabled) {\r\n        cameraFrame.rendering.sharpness = settings.sharpness.amount;\r\n    } else {\r\n        cameraFrame.rendering.sharpness = 0;\r\n    }\r\n\r\n    const { bloom } = cameraFrame;\r\n    if (settings.bloom.enabled) {\r\n        bloom.intensity = settings.bloom.intensity;\r\n        bloom.blurLevel = settings.bloom.blurLevel;\r\n    } else {\r\n        bloom.intensity = 0;\r\n    }\r\n\r\n    const { grading } = cameraFrame;\r\n    if (settings.grading.enabled) {\r\n        grading.enabled = true;\r\n        grading.brightness = settings.grading.brightness;\r\n        grading.contrast = settings.grading.contrast;\r\n        grading.saturation = settings.grading.saturation;\r\n        grading.tint = new Color().fromArray(settings.grading.tint);\r\n    } else {\r\n        grading.enabled = false;\r\n    }\r\n\r\n    const { vignette } = cameraFrame;\r\n    if (settings.vignette.enabled) {\r\n        vignette.intensity = settings.vignette.intensity;\r\n        vignette.inner = settings.vignette.inner;\r\n        vignette.outer = settings.vignette.outer;\r\n        vignette.curvature = settings.vignette.curvature;\r\n    } else {\r\n        vignette.intensity = 0;\r\n    }\r\n\r\n    const { fringing } = cameraFrame;\r\n    if (settings.fringing.enabled) {\r\n        fringing.intensity = settings.fringing.intensity;\r\n    } else {\r\n        fringing.intensity = 0;\r\n    }\r\n};\r\n\r\nconst anyPostEffectEnabled = (settings: PostEffectSettings): boolean => {\r\n    return (settings.sharpness.enabled && settings.sharpness.amount > 0) ||\r\n        (settings.bloom.enabled && settings.bloom.intensity > 0) ||\r\n        (settings.grading.enabled) ||\r\n        (settings.vignette.enabled && settings.vignette.intensity > 0) ||\r\n        (settings.fringing.enabled && settings.fringing.intensity > 0);\r\n};\r\n\r\nconst vec = new Vec3();\r\n\r\nclass Viewer {\r\n    global: Global;\r\n\r\n    cameraFrame: CameraFrame;\r\n\r\n    inputController: InputController;\r\n\r\n    cameraManager: CameraManager;\r\n\r\n    annotations: Annotations;\r\n\r\n    forceRenderNextFrame = false;\r\n\r\n    constructor(global: Global, gsplatLoad: Promise<Entity>, skyboxLoad: Promise<void>) {\r\n        this.global = global;\r\n\r\n        const { app, settings, config, events, state, camera } = global;\r\n        const { graphicsDevice } = app;\r\n\r\n        // enable anonymous CORS for image loading in safari\r\n        (app.loader.getHandler('texture') as TextureHandler).imgParser.crossOrigin = 'anonymous';\r\n\r\n        // render skybox as plain equirect\r\n        const glsl = ShaderChunks.get(graphicsDevice, 'glsl');\r\n        glsl.set('skyboxPS', glsl.get('skyboxPS').replace('mapRoughnessUv(uv, mipLevel)', 'uv'));\r\n        glsl.set('pickPS', pickDepthGlsl);\r\n\r\n        const wgsl = ShaderChunks.get(graphicsDevice, 'wgsl');\r\n        wgsl.set('skyboxPS', wgsl.get('skyboxPS').replace('mapRoughnessUv(uv, uniform.mipLevel)', 'uv'));\r\n        wgsl.set('pickPS', pickDepthWgsl);\r\n\r\n        // disable auto render, we'll render only when camera changes\r\n        app.autoRender = false;\r\n\r\n        // apply camera animation settings\r\n        camera.camera.aspectRatio = graphicsDevice.width / graphicsDevice.height;\r\n\r\n        // configure the camera\r\n        this.configureCamera(settings);\r\n\r\n        // reconfigure camera when entering/exiting XR\r\n        app.xr.on('start', () => this.configureCamera(settings));\r\n        app.xr.on('end', () => this.configureCamera(settings));\r\n\r\n        // handle horizontal fov on canvas resize\r\n        const updateHorizontalFov = () => {\r\n            camera.camera.horizontalFov = graphicsDevice.width > graphicsDevice.height;\r\n            app.renderNextFrame = true;\r\n        };\r\n        graphicsDevice.on('resizecanvas', updateHorizontalFov);\r\n        updateHorizontalFov();\r\n\r\n        // handle HQ mode changes\r\n        const updateHqMode = () => {\r\n            graphicsDevice.maxPixelRatio = state.hqMode ? window.devicePixelRatio : 1;\r\n            app.renderNextFrame = true;\r\n        };\r\n        events.on('hqMode:changed', updateHqMode);\r\n        updateHqMode();\r\n\r\n        // construct debug ministats\r\n        if (config.ministats) {\r\n            const options = MiniStats.getDefaultOptions() as any;\r\n            options.cpu.enabled = false;\r\n            options.stats = options.stats.filter((s: any) => s.name !== 'DrawCalls');\r\n            options.stats.push({\r\n                name: 'VRAM',\r\n                stats: ['vram.tex'],\r\n                decimalPlaces: 1,\r\n                multiplier: 1 / (1024 * 1024),\r\n                unitsName: 'MB',\r\n                watermark: 1024\r\n            }, {\r\n                name: 'Splats',\r\n                stats: ['frame.gsplats'],\r\n                decimalPlaces: 3,\r\n                multiplier: 1 / 1000000,\r\n                unitsName: 'M',\r\n                watermark: 5\r\n            });\r\n\r\n            // eslint-disable-next-line no-new\r\n            new MiniStats(app, options);\r\n        }\r\n\r\n        const prevProj = new Mat4();\r\n        const prevWorld = new Mat4();\r\n        const sceneBound = new BoundingBox();\r\n\r\n        // track the camera state and trigger a render when it changes\r\n        app.on('framerender', () => {\r\n            const world = camera.getWorldTransform();\r\n            const proj = camera.camera.projectionMatrix;\r\n\r\n            if (!app.renderNextFrame) {\r\n                if (config.ministats ||\r\n                    !nearlyEquals(world.data, prevWorld.data) ||\r\n                    !nearlyEquals(proj.data, prevProj.data)) {\r\n                    app.renderNextFrame = true;\r\n                }\r\n            }\r\n\r\n            // suppress rendering till we're ready\r\n            if (!state.readyToRender) {\r\n                app.renderNextFrame = false;\r\n            }\r\n\r\n            if (this.forceRenderNextFrame) {\r\n                app.renderNextFrame = true;\r\n            }\r\n\r\n            if (app.renderNextFrame) {\r\n                prevWorld.copy(world);\r\n                prevProj.copy(proj);\r\n            }\r\n        });\r\n\r\n        const applyCamera = (camera: Camera) => {\r\n            const cameraEntity = global.camera;\r\n\r\n            cameraEntity.setPosition(camera.position);\r\n            cameraEntity.setEulerAngles(camera.angles);\r\n            cameraEntity.camera.fov = camera.fov;\r\n\r\n            // fit clipping planes to bounding box\r\n            const boundRadius = sceneBound.halfExtents.length();\r\n\r\n            // calculate the forward distance between the camera to the bound center\r\n            vec.sub2(sceneBound.center, camera.position);\r\n            const dist = vec.dot(cameraEntity.forward);\r\n\r\n            const far = Math.max(dist + boundRadius, 1e-2);\r\n            const near = Math.max(dist - boundRadius, far / (1024 * 16));\r\n\r\n            cameraEntity.camera.farClip = far;\r\n            cameraEntity.camera.nearClip = near;\r\n        };\r\n\r\n        // handle application update\r\n        app.on('update', (deltaTime) => {\r\n            // in xr mode we leave the camera alone\r\n            if (app.xr.active) {\r\n                return;\r\n            }\r\n\r\n            if (this.inputController && this.cameraManager) {\r\n                // update inputs\r\n                this.inputController.update(deltaTime, this.cameraManager.camera.distance);\r\n\r\n                // update cameras\r\n                this.cameraManager.update(deltaTime, this.inputController.frame);\r\n\r\n                // apply to the camera entity\r\n                applyCamera(this.cameraManager.camera);\r\n            }\r\n        });\r\n\r\n        // unpause the animation on first frame\r\n        events.on('firstFrame', () => {\r\n            state.animationPaused = !!config.noanim;\r\n        });\r\n\r\n        // wait for the model to load\r\n        Promise.all([gsplatLoad, skyboxLoad]).then((results) => {\r\n            const gsplat = results[0].gsplat as GSplatComponent;\r\n\r\n            // get scene bounding box\r\n            const gsplatBbox = gsplat.customAabb;\r\n            if (gsplatBbox) {\r\n                sceneBound.setFromTransformedAabb(gsplatBbox, results[0].getWorldTransform());\r\n            }\r\n\r\n            if (!config.noui) {\r\n                this.annotations = new Annotations(global, this.cameraFrame != null);\r\n            }\r\n\r\n            this.inputController = new InputController(global);\r\n\r\n            this.cameraManager = new CameraManager(global, sceneBound);\r\n            applyCamera(this.cameraManager.camera);\r\n\r\n            const { instance } = gsplat;\r\n            if (instance) {\r\n                // kick off gsplat sorting immediately now that camera is in position\r\n                instance.sort(camera);\r\n\r\n                // listen for sorting updates to trigger first frame events\r\n                instance.sorter?.on('updated', () => {\r\n                    // request frame render when sorting changes\r\n                    app.renderNextFrame = true;\r\n\r\n                    if (!state.readyToRender) {\r\n                        // we're ready to render once the first sort has completed\r\n                        state.readyToRender = true;\r\n\r\n                        // wait for the first valid frame to complete rendering\r\n                        app.once('frameend', () => {\r\n                            events.fire('firstFrame');\r\n\r\n                            // emit first frame event on window\r\n                            window.firstFrame?.();\r\n                        });\r\n                    }\r\n                });\r\n            } else {\r\n\r\n                const { gsplat } = app.scene;\r\n\r\n                // lod ranges\r\n                const low = [2, 5];\r\n                const high = [0, 2];\r\n\r\n                // in unified mode, for now we hard-code LOD range on mobile vs desktop\r\n                gsplat.lodRangeMin = low[0];\r\n                gsplat.lodRangeMax = low[1];\r\n\r\n                // these two allow LOD behind camera to drop, saves lots of splats\r\n                gsplat.lodUpdateAngle = 90;\r\n                gsplat.lodBehindPenalty = 5;\r\n\r\n                // same performance, but rotating on slow devices does not give us unsorted splats on sides\r\n                gsplat.radialSorting = true;\r\n\r\n                const eventHandler = app.systems.gsplat;\r\n\r\n                // force render empty frames otherwise unified rendering doesn't update\r\n                this.forceRenderNextFrame = true;\r\n\r\n                let current = 0;\r\n                let watermark = 1;\r\n                const readyHandler = (camera: CameraComponent, layer: Layer, ready: boolean, loading: number) => {\r\n                    if (ready && !loading) {\r\n                        // scene is done loading\r\n\r\n                        eventHandler.off('frame:ready', readyHandler);\r\n\r\n                        this.forceRenderNextFrame = false;\r\n                        state.readyToRender = true;\r\n\r\n                        const range = platform.mobile ? low : high;\r\n                        gsplat.lodRangeMin = range[0];\r\n                        gsplat.lodRangeMax = range[1];\r\n\r\n                        // wait for the first valid frame to complete rendering\r\n                        app.once('frameend', () => {\r\n                            events.fire('firstFrame');\r\n\r\n                            // emit first frame event on window\r\n                            window.firstFrame?.();\r\n                        });\r\n                    }\r\n\r\n                    if (ready) {\r\n                        app.renderNextFrame = true;\r\n                    }\r\n\r\n                    // update loading status\r\n                    if (loading !== current) {\r\n                        watermark = Math.max(watermark, loading);\r\n                        current = watermark - loading;\r\n                        state.progress = Math.trunc(current / watermark * 100);\r\n                    }\r\n                };\r\n\r\n                eventHandler.on('frame:ready', readyHandler);\r\n            }\r\n        }).catch((error) => {\r\n            console.error('Error loading 3D model or skybox:', error);\r\n            // Handle the error appropriately, e.g., show an error message to the user\r\n        });\r\n    }\r\n\r\n    // configure camera based on application mode and post process settings\r\n    configureCamera(settings: ExperienceSettings) {\r\n        const { global } = this;\r\n        const { app, camera } = global;\r\n        const { postEffectSettings } = settings;\r\n        const { background } = settings;\r\n\r\n        const enableCameraFrame = !app.xr.active && (anyPostEffectEnabled(postEffectSettings) || settings.highPrecisionRendering);\r\n\r\n        if (enableCameraFrame) {\r\n            // create instance\r\n            if (!this.cameraFrame) {\r\n                this.cameraFrame = new CameraFrame(app, camera.camera);\r\n            }\r\n\r\n            const { cameraFrame } = this;\r\n            cameraFrame.enabled = true;\r\n            cameraFrame.rendering.toneMapping = tonemapTable[settings.tonemapping];\r\n            cameraFrame.rendering.renderFormats = settings.highPrecisionRendering ? [PIXELFORMAT_RGBA16F, PIXELFORMAT_RGBA32F] : [];\r\n            applyPostEffectSettings(cameraFrame, postEffectSettings);\r\n            cameraFrame.update();\r\n\r\n            // force gsplat shader to write gamma-space colors\r\n            ShaderChunks.get(app.graphicsDevice, 'glsl').set('gsplatOutputVS', gammaChunk);\r\n\r\n            // ensure the final blit doesn't perform linear->gamma conversion\r\n            RenderTarget.prototype.isColorBufferSrgb = function () {\r\n                return true;\r\n            };\r\n\r\n            camera.camera.clearColor = new Color(background.color);\r\n        } else {\r\n            // no post effects needed, destroy camera frame if it exists\r\n            if (this.cameraFrame) {\r\n                this.cameraFrame.destroy();\r\n                this.cameraFrame = null;\r\n            }\r\n\r\n            if (!app.xr.active) {\r\n                camera.camera.toneMapping = tonemapTable[settings.tonemapping];\r\n                camera.camera.clearColor = new Color(background.color);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport { Viewer };","import { Script } from 'playcanvas';\n\nclass XrControllers extends Script {\n    static scriptName = 'xrControllers';\n\n    /**\n     * The base URL for fetching the WebXR input profiles.\n     *\n     * @attribute\n     * @type {string}\n     */\n    basePath = 'https://cdn.jsdelivr.net/npm/@webxr-input-profiles/assets/dist/profiles';\n\n    controllers = new Map();\n\n    initialize() {\n        if (!this.app.xr) {\n            console.error('XrControllers script requires XR to be enabled on the application');\n            return;\n        }\n\n        this.app.xr.input.on('add', async (inputSource) => {\n            if (!inputSource.profiles?.length) {\n                console.warn('No profiles available for input source');\n                return;\n            }\n\n            // Process all profiles concurrently\n            const profilePromises = inputSource.profiles.map(async (profileId) => {\n                const profileUrl = `${this.basePath}/${profileId}/profile.json`;\n\n                try {\n                    const response = await fetch(profileUrl);\n                    if (!response.ok) {\n                        return null;\n                    }\n\n                    const profile = await response.json();\n                    const layoutPath = profile.layouts[inputSource.handedness]?.assetPath || '';\n                    const assetPath = `${this.basePath}/${profile.profileId}/${inputSource.handedness}${layoutPath.replace(/^\\/?(left|right)/, '')}`;\n\n                    // Load the model\n                    const asset = await new Promise((resolve, reject) => {\n                        this.app.assets.loadFromUrl(assetPath, 'container', (err, asset) => {\n                            if (err) reject(err);\n                            else resolve(asset);\n                        });\n                    });\n\n                    return { profileId, asset };\n                } catch (error) {\n                    console.warn(`Failed to process profile ${profileId}`);\n                    return null;\n                }\n            });\n\n            // Wait for all profile attempts to complete\n            const results = await Promise.all(profilePromises);\n            const successfulResult = results.find(result => result !== null);\n\n            if (successfulResult) {\n                const { asset } = successfulResult;\n                const container = asset.resource;\n                const entity = container.instantiateRenderEntity();\n                this.app.root.addChild(entity);\n\n                const jointMap = new Map();\n                if (inputSource.hand) {\n                    for (const joint of inputSource.hand.joints) {\n                        const jointEntity = entity.findByName(joint.id);\n                        if (jointEntity) {\n                            jointMap.set(joint, jointEntity);\n                        }\n                    }\n                }\n\n                this.controllers.set(inputSource, { entity, jointMap });\n            } else {\n                console.warn('No compatible profiles found');\n            }\n        });\n\n        this.app.xr.input.on('remove', (inputSource) => {\n            const controller = this.controllers.get(inputSource);\n            if (controller) {\n                controller.entity.destroy();\n                this.controllers.delete(inputSource);\n            }\n        });\n    }\n\n    update(dt) {\n        if (this.app.xr?.active) {\n            for (const [inputSource, { entity, jointMap }] of this.controllers) {\n                if (inputSource.hand) {\n                    for (const [joint, jointEntity] of jointMap) {\n                        jointEntity.setPosition(joint.getPosition());\n                        jointEntity.setRotation(joint.getRotation());\n                    }\n                } else {\n                    entity.setPosition(inputSource.getPosition());\n                    entity.setRotation(inputSource.getRotation());\n                }\n            }\n        }\n    }\n}\n\nexport { XrControllers };\n","import { Color, Script, Vec2, Vec3 } from 'playcanvas';\n\n/** @import { XrInputSource } from 'playcanvas' */\n\n/**\n * Handles VR navigation with support for both teleportation and smooth locomotion.\n * Both methods can be enabled simultaneously, allowing users to choose their preferred\n * navigation method on the fly.\n *\n * Teleportation: Point and teleport using trigger/pinch gestures\n * Smooth Locomotion: Use left thumbstick for movement and right thumbstick for snap turning\n *\n * This script should be attached to a parent entity of the camera entity used for the XR\n * session. The entity hierarchy should be: XrNavigationEntity > CameraEntity for proper\n * locomotion handling. Use it in conjunction with the `XrControllers` script.\n */\nclass XrNavigation extends Script {\n    static scriptName = 'xrNavigation';\n\n    /**\n     * Enable teleportation navigation using trigger/pinch gestures.\n     * @attribute\n     */\n    enableTeleport = true;\n\n    /**\n     * Enable smooth locomotion using thumbsticks.\n     * @attribute\n     */\n    enableMove = true;\n\n    /**\n     * Speed of smooth locomotion movement in meters per second.\n     * @attribute\n     * @range [0.1, 10]\n     * @enabledif {enableMove}\n     */\n    movementSpeed = 1.5;\n\n    /**\n     * Angle in degrees for each snap turn.\n     * @attribute\n     * @range [15, 180]\n     * @enabledif {enableMove}\n     */\n    rotateSpeed = 45;\n\n    /**\n     * Thumbstick deadzone threshold for movement.\n     * @attribute\n     * @range [0, 0.5]\n     * @precision 0.01\n     * @enabledif {enableMove}\n     */\n    movementThreshold = 0.1;\n\n    /**\n     * Thumbstick threshold to trigger snap turning.\n     * @attribute\n     * @range [0.1, 1]\n     * @precision 0.01\n     * @enabledif {enableMove}\n     */\n    rotateThreshold = 0.5;\n\n    /**\n     * Thumbstick threshold to reset snap turn state.\n     * @attribute\n     * @range [0.05, 0.5]\n     * @precision 0.01\n     * @enabledif {enableMove}\n     */\n    rotateResetThreshold = 0.25;\n\n    /**\n     * Maximum distance for teleportation in meters.\n     * @attribute\n     * @range [1, 50]\n     * @enabledif {enableTeleport}\n     */\n    maxTeleportDistance = 10;\n\n    /**\n     * Radius of the teleport target indicator circle.\n     * @attribute\n     * @range [0.1, 2]\n     * @precision 0.1\n     * @enabledif {enableTeleport}\n     */\n    teleportIndicatorRadius = 0.2;\n\n    /**\n     * Number of segments for the teleport indicator circle.\n     * @attribute\n     * @range [8, 64]\n     * @enabledif {enableTeleport}\n     */\n    teleportIndicatorSegments = 16;\n\n    /**\n     * Color for valid teleportation areas.\n     * @attribute\n     * @enabledif {enableTeleport}\n     */\n    validTeleportColor = new Color(0, 1, 0);\n\n    /**\n     * Color for invalid teleportation areas.\n     * @attribute\n     * @enabledif {enableTeleport}\n     */\n    invalidTeleportColor = new Color(1, 0, 0);\n\n    /**\n     * Color for controller rays.\n     * @attribute\n     * @enabledif {enableMove}\n     */\n    controllerRayColor = new Color(1, 1, 1);\n\n    /** @type {Set<XrInputSource>} */\n    inputSources = new Set();\n\n    /** @type {Map<XrInputSource, boolean>} */\n    activePointers = new Map();\n\n    /** @type {Map<XrInputSource, { handleSelectStart: Function, handleSelectEnd: Function }>} */\n    inputHandlers = new Map();\n\n    // Rotation state for snap turning\n    lastRotateValue = 0;\n\n    // Pre-allocated objects for performance (object pooling)\n    tmpVec2A = new Vec2();\n\n    tmpVec2B = new Vec2();\n\n    tmpVec3A = new Vec3();\n\n    tmpVec3B = new Vec3();\n\n    // Color objects\n    validColor = new Color();\n\n    invalidColor = new Color();\n\n    rayColor = new Color();\n\n    // Camera reference for movement calculations\n    /** @type {import('playcanvas').Entity | null} */\n    cameraEntity = null;\n\n    initialize() {\n        if (!this.app.xr) {\n            console.error('XrNavigation script requires XR to be enabled on the application');\n            return;\n        }\n\n        // Log enabled navigation methods\n        const methods = [];\n        if (this.enableTeleport) methods.push('teleportation');\n        if (this.enableMove) methods.push('smooth movement');\n        console.log(`XrNavigation: Enabled methods - ${methods.join(', ')}`);\n\n        if (!this.enableTeleport && !this.enableMove) {\n            console.warn('XrNavigation: Both teleportation and movement are disabled. Navigation will not work.');\n        }\n\n        // Initialize color objects from Color attributes\n        this.validColor.copy(this.validTeleportColor);\n        this.invalidColor.copy(this.invalidTeleportColor);\n        this.rayColor.copy(this.controllerRayColor);\n\n        // Find camera entity - should be a child of this entity\n        const cameraComponent = this.entity.findComponent('camera');\n        this.cameraEntity = cameraComponent ? cameraComponent.entity : null;\n\n        if (!this.cameraEntity) {\n            console.warn('XrNavigation: Camera entity not found. Looking for camera in children...');\n\n            // First try to find by name - cast to Entity since we know it should be one\n            const foundByName = this.entity.findByName('camera');\n            this.cameraEntity = /** @type {import('playcanvas').Entity | null} */ (foundByName);\n\n            // If not found, search children for entity with camera component\n            if (!this.cameraEntity) {\n                for (const child of this.entity.children) {\n                    const childEntity = /** @type {import('playcanvas').Entity} */ (child);\n                    if (childEntity.camera) {\n                        this.cameraEntity = childEntity;\n                        break;\n                    }\n                }\n            }\n\n            if (!this.cameraEntity) {\n                console.error('XrNavigation: No camera entity found. Movement calculations may not work correctly.');\n            }\n        }\n\n        this.app.xr.input.on('add', (inputSource) => {\n            const handleSelectStart = () => {\n                this.activePointers.set(inputSource, true);\n            };\n\n            const handleSelectEnd = () => {\n                this.activePointers.set(inputSource, false);\n                this.tryTeleport(inputSource);\n            };\n\n            // Attach the handlers\n            inputSource.on('selectstart', handleSelectStart);\n            inputSource.on('selectend', handleSelectEnd);\n\n            // Store the handlers in the map\n            this.inputHandlers.set(inputSource, { handleSelectStart, handleSelectEnd });\n            this.inputSources.add(inputSource);\n        });\n\n        this.app.xr.input.on('remove', (inputSource) => {\n            const handlers = this.inputHandlers.get(inputSource);\n            if (handlers) {\n                inputSource.off('selectstart', handlers.handleSelectStart);\n                inputSource.off('selectend', handlers.handleSelectEnd);\n                this.inputHandlers.delete(inputSource);\n            }\n            this.activePointers.delete(inputSource);\n            this.inputSources.delete(inputSource);\n        });\n    }\n\n    findPlaneIntersection(origin, direction) {\n        // Find intersection with y=0 plane\n        if (Math.abs(direction.y) < 0.00001) return null;  // Ray is parallel to plane\n\n        const t = -origin.y / direction.y;\n        if (t < 0) return null;  // Intersection is behind the ray\n\n        return new Vec3(\n            origin.x + direction.x * t,\n            0,\n            origin.z + direction.z * t\n        );\n    }\n\n    tryTeleport(inputSource) {\n        const origin = inputSource.getOrigin();\n        const direction = inputSource.getDirection();\n\n        const hitPoint = this.findPlaneIntersection(origin, direction);\n        if (hitPoint) {\n            const cameraY = this.entity.getPosition().y;\n            hitPoint.y = cameraY;\n            this.entity.setPosition(hitPoint);\n        }\n    }\n\n    update(dt) {\n        // Handle smooth locomotion and snap turning\n        if (this.enableMove) {\n            this.handleSmoothLocomotion(dt);\n        }\n\n        // Handle teleportation\n        if (this.enableTeleport) {\n            this.handleTeleportation();\n        }\n\n        // Always show controller rays for debugging/visualization\n        this.renderControllerRays();\n    }\n\n    handleSmoothLocomotion(dt) {\n        if (!this.cameraEntity) return;\n\n        for (const inputSource of this.inputSources) {\n            // Only process controllers with gamepads\n            if (!inputSource.gamepad) continue;\n\n            // Left controller - movement\n            if (inputSource.handedness === 'left') {\n                // Get thumbstick input (axes[2] = X, axes[3] = Y)\n                this.tmpVec2A.set(inputSource.gamepad.axes[2], inputSource.gamepad.axes[3]);\n\n                // Check if input exceeds deadzone\n                if (this.tmpVec2A.length() > this.movementThreshold) {\n                    this.tmpVec2A.normalize();\n\n                    // Calculate camera-relative movement direction\n                    const forward = this.cameraEntity.forward;\n                    this.tmpVec2B.x = forward.x;\n                    this.tmpVec2B.y = forward.z;\n                    this.tmpVec2B.normalize();\n\n                    // Calculate rotation angle based on camera yaw\n                    const rad = Math.atan2(this.tmpVec2B.x, this.tmpVec2B.y) - Math.PI / 2;\n\n                    // Apply rotation to movement vector\n                    const t = this.tmpVec2A.x * Math.sin(rad) - this.tmpVec2A.y * Math.cos(rad);\n                    this.tmpVec2A.y = this.tmpVec2A.y * Math.sin(rad) + this.tmpVec2A.x * Math.cos(rad);\n                    this.tmpVec2A.x = t;\n\n                    // Scale by movement speed and delta time\n                    this.tmpVec2A.mulScalar(this.movementSpeed * dt);\n\n                    // Apply movement to camera parent (this entity)\n                    this.entity.translate(this.tmpVec2A.x, 0, this.tmpVec2A.y);\n                }\n            } else if (inputSource.handedness === 'right') { // Right controller - snap turning\n                this.handleSnapTurning(inputSource);\n            }\n        }\n    }\n\n    handleSnapTurning(inputSource) {\n        // Get rotation input from right thumbstick X-axis\n        const rotate = -inputSource.gamepad.axes[2];\n\n        // Hysteresis system to prevent multiple rotations from single gesture\n        if (this.lastRotateValue > 0 && rotate < this.rotateResetThreshold) {\n            this.lastRotateValue = 0;\n        } else if (this.lastRotateValue < 0 && rotate > -this.rotateResetThreshold) {\n            this.lastRotateValue = 0;\n        }\n\n        // Only rotate when thumbstick crosses threshold from neutral position\n        if (this.lastRotateValue === 0 && Math.abs(rotate) > this.rotateThreshold) {\n            this.lastRotateValue = Math.sign(rotate);\n\n            if (this.cameraEntity) {\n                // Rotate around camera position, not entity origin\n                this.tmpVec3A.copy(this.cameraEntity.getLocalPosition());\n                this.entity.translateLocal(this.tmpVec3A);\n                this.entity.rotateLocal(0, Math.sign(rotate) * this.rotateSpeed, 0);\n                this.entity.translateLocal(this.tmpVec3A.mulScalar(-1));\n            }\n        }\n    }\n\n    handleTeleportation() {\n        for (const inputSource of this.inputSources) {\n            // Only show teleportation ray when trigger/select is pressed\n            if (!this.activePointers.get(inputSource)) continue;\n\n            const start = inputSource.getOrigin();\n            const direction = inputSource.getDirection();\n\n            const hitPoint = this.findPlaneIntersection(start, direction);\n\n            if (hitPoint && this.isValidTeleportDistance(hitPoint)) {\n                // Draw line to intersection point\n                this.app.drawLine(start, hitPoint, this.validColor);\n                this.drawTeleportIndicator(hitPoint);\n            } else {\n                // Draw full length ray if no intersection or invalid distance\n                this.tmpVec3B.copy(direction).mulScalar(this.maxTeleportDistance).add(start);\n                this.app.drawLine(start, this.tmpVec3B, this.invalidColor);\n            }\n        }\n    }\n\n    renderControllerRays() {\n        // Only render controller rays when smooth movement is enabled\n        // (teleport rays are handled separately in handleTeleportation)\n        if (!this.enableMove) return;\n\n        for (const inputSource of this.inputSources) {\n            // Skip if currently teleporting (handled by handleTeleportation)\n            if (this.activePointers.get(inputSource)) continue;\n\n            const start = inputSource.getOrigin();\n            this.tmpVec3B.copy(inputSource.getDirection()).mulScalar(2).add(start);\n            this.app.drawLine(start, this.tmpVec3B, this.rayColor);\n        }\n    }\n\n    isValidTeleportDistance(hitPoint) {\n        const distance = hitPoint.distance(this.entity.getPosition());\n        return distance <= this.maxTeleportDistance;\n    }\n\n    drawTeleportIndicator(point) {\n        // Draw a circle at the teleport point using configurable attributes\n        const segments = this.teleportIndicatorSegments;\n        const radius = this.teleportIndicatorRadius;\n\n        for (let i = 0; i < segments; i++) {\n            const angle1 = (i / segments) * Math.PI * 2;\n            const angle2 = ((i + 1) / segments) * Math.PI * 2;\n\n            const x1 = point.x + Math.cos(angle1) * radius;\n            const z1 = point.z + Math.sin(angle1) * radius;\n            const x2 = point.x + Math.cos(angle2) * radius;\n            const z2 = point.z + Math.sin(angle2) * radius;\n\n            // Use pre-allocated vectors to avoid garbage collection\n            this.tmpVec3A.set(x1, 0.01, z1);  // Slightly above ground to avoid z-fighting\n            this.tmpVec3B.set(x2, 0.01, z2);\n\n            this.app.drawLine(this.tmpVec3A, this.tmpVec3B, this.validColor);\n        }\n    }\n}\n\nexport { XrNavigation };\n","import {\r\n    Color,\r\n    Entity,\r\n    Quat,\r\n    Vec3,\r\n    type CameraComponent\r\n} from 'playcanvas';\r\nimport { XrControllers } from 'playcanvas/scripts/esm/xr-controllers.mjs';\r\nimport { XrNavigation } from 'playcanvas/scripts/esm/xr-navigation.mjs';\r\n\r\nimport { Global } from './types';\r\n\r\n// On entering/exiting AR, we need to set the camera clear color to transparent black\r\nconst initXr = (global: Global) => {\r\n    const { app, events, state, camera } = global;\r\n\r\n    state.hasAR = app.xr.isAvailable('immersive-ar');\r\n    state.hasVR = app.xr.isAvailable('immersive-vr');\r\n\r\n    // initialize ar/vr\r\n    app.xr.on('available:immersive-ar', (available) => {\r\n        state.hasAR = available;\r\n    });\r\n    app.xr.on('available:immersive-vr', (available) => {\r\n        state.hasVR = available;\r\n    });\r\n\r\n    const parent = camera.parent as Entity;\r\n    const clearColor = new Color();\r\n\r\n    const parentPosition = new Vec3();\r\n    const parentRotation = new Quat();\r\n    const cameraPosition = new Vec3();\r\n    const cameraRotation = new Quat();\r\n    const angles = new Vec3();\r\n\r\n    parent.addComponent('script');\r\n    parent.script.create(XrControllers);\r\n    parent.script.create(XrNavigation);\r\n\r\n    app.xr.on('start', () => {\r\n        app.autoRender = true;\r\n\r\n        // cache original camera rig positions and rotations\r\n        parentPosition.copy(parent.getPosition());\r\n        parentRotation.copy(parent.getRotation());\r\n        cameraPosition.copy(camera.getPosition());\r\n        cameraRotation.copy(camera.getRotation());\r\n\r\n        cameraRotation.getEulerAngles(angles);\r\n\r\n        // copy transform to parent to XR/VR mode starts in the right place\r\n        parent.setPosition(cameraPosition.x, 0, cameraPosition.z);\r\n        parent.setEulerAngles(0, angles.y, 0);\r\n\r\n        if (app.xr.type === 'immersive-ar') {\r\n            clearColor.copy(camera.camera.clearColor);\r\n            camera.camera.clearColor = new Color(0, 0, 0, 0);\r\n        }\r\n    });\r\n\r\n    app.xr.on('end', () => {\r\n        app.autoRender = false;\r\n\r\n        // restore camera to pre-XR state\r\n        parent.setPosition(parentPosition);\r\n        parent.setRotation(parentRotation);\r\n        camera.setPosition(cameraPosition);\r\n        camera.setRotation(cameraRotation);\r\n\r\n        if (app.xr.type === 'immersive-ar') {\r\n            camera.camera.clearColor = clearColor;\r\n        }\r\n    });\r\n\r\n    events.on('startAR', () => {\r\n        app.xr.start(app.root.findComponent('camera') as CameraComponent, 'immersive-ar', 'local-floor');\r\n    });\r\n\r\n    events.on('startVR', () => {\r\n        app.xr.start(app.root.findComponent('camera') as CameraComponent, 'immersive-vr', 'local-floor');\r\n    });\r\n\r\n    events.on('inputEvent', (event) => {\r\n        if (event === 'cancel' && app.xr.active) {\r\n            app.xr.end();\r\n        }\r\n    });\r\n};\r\n\r\nexport { initXr };\r\n","import '@playcanvas/web-components';\r\nimport {\r\n    Asset,\r\n    Entity,\r\n    EventHandler,\r\n    type Texture,\r\n    type AppBase,\r\n    revision as engineRevision,\r\n    version as engineVersion\r\n} from 'playcanvas';\r\n\r\nimport { observe } from './core/observe';\r\nimport { importSettings } from './settings';\r\nimport type { Config, Global } from './types';\r\nimport { initPoster, initUI } from './ui';\r\nimport { Viewer } from './viewer';\r\nimport { initXr } from './xr';\r\nimport { version as appVersion } from '../../../../package.json';\r\n\r\nconst loadGsplat = async (app: AppBase, config: Config, progressCallback: (progress: number) => void) => {\r\n    const { contents, contentUrl, unified, aa } = config;\r\n    const c = contents as unknown as ArrayBuffer;\r\n    const filename = new URL(contentUrl, location.href).pathname.split('/').pop();\r\n    const data = filename.toLowerCase() === 'meta.json' ? await (await contents).json() : undefined;\r\n    const asset = new Asset(filename, 'gsplat', { url: contentUrl, filename, contents: c }, data);\r\n\r\n    return new Promise<Entity>((resolve, reject) => {\r\n        asset.on('load', () => {\r\n            const entity = new Entity('gsplat');\r\n            entity.setLocalEulerAngles(0, 0, 180);\r\n            entity.addComponent('gsplat', {\r\n                unified: unified || filename.toLowerCase().endsWith('lod-meta.json'),\r\n                asset\r\n            });\r\n            // don't support AA in unified mode yet\r\n            if (aa && !entity.gsplat.unified) {\r\n                entity.gsplat.material.setDefine('GSPLAT_AA', true);\r\n            }\r\n            app.root.addChild(entity);\r\n            resolve(entity);\r\n        });\r\n\r\n        let watermark = 0;\r\n        asset.on('progress', (received, length) => {\r\n            const progress = Math.min(1, received / length) * 100;\r\n            if (progress > watermark) {\r\n                watermark = progress;\r\n                progressCallback(Math.trunc(watermark));\r\n            }\r\n        });\r\n\r\n        asset.on('error', (err) => {\r\n            console.log(err);\r\n            reject(err);\r\n        });\r\n\r\n        app.assets.add(asset);\r\n        app.assets.load(asset);\r\n    });\r\n};\r\n\r\nconst loadSkybox = (app: AppBase, url: string) => {\r\n    return new Promise<Asset>((resolve, reject) => {\r\n        const asset = new Asset('skybox', 'texture', {\r\n            url\r\n        }, {\r\n            type: 'rgbp',\r\n            mipmaps: false,\r\n            addressu: 'repeat',\r\n            addressv: 'clamp'\r\n        });\r\n\r\n        asset.on('load', () => {\r\n            resolve(asset);\r\n        });\r\n\r\n        asset.on('error', (err) => {\r\n            console.log(err);\r\n            reject(err);\r\n        });\r\n\r\n        app.assets.add(asset);\r\n        app.assets.load(asset);\r\n    });\r\n};\r\n\r\nconst main = (app: AppBase, camera: Entity, settingsJson: any, config: Config) => {\r\n    const events = new EventHandler();\r\n\r\n    const state = observe(events, {\r\n        readyToRender: false,\r\n        hqMode: true,\r\n        progress: 0,\r\n        inputMode: 'desktop',\r\n        cameraMode: 'orbit',\r\n        hasAnimation: false,\r\n        animationDuration: 0,\r\n        animationTime: 0,\r\n        animationPaused: true,\r\n        hasAR: false,\r\n        hasVR: false,\r\n        isFullscreen: false,\r\n        controlsHidden: false\r\n    });\r\n\r\n    const global: Global = {\r\n        app,\r\n        settings: importSettings(settingsJson),\r\n        config,\r\n        state,\r\n        events,\r\n        camera\r\n    };\r\n\r\n    // Initialize the load-time poster only if provided\r\n    if (config.poster) {\r\n        initPoster(events);\r\n    }\r\n\r\n    camera.addComponent('camera');\r\n\r\n    // Initialize XR support\r\n    initXr(global);\r\n\r\n    // Initialize user interface only if not disabled\r\n    if (!config.noui) {\r\n        initUI(global);\r\n    }\r\n\r\n    // Load model\r\n    const gsplatLoad = loadGsplat(\r\n        app,\r\n        config,\r\n        (progress: number) => {\r\n            state.progress = progress;\r\n        }\r\n    );\r\n\r\n    // Load skybox\r\n    const skyboxLoad = config.skyboxUrl &&\r\n        loadSkybox(app, config.skyboxUrl).then((asset) => {\r\n            app.scene.envAtlas = asset.resource as Texture;\r\n        });\r\n\r\n    // Load and play sound\r\n    if (global.settings.soundUrl) {\r\n        const sound = new Audio(global.settings.soundUrl);\r\n        sound.crossOrigin = 'anonymous';\r\n        document.body.addEventListener('click', () => {\r\n            if (sound) {\r\n                sound.play();\r\n            }\r\n        }, {\r\n            capture: true,\r\n            once: true\r\n        });\r\n    }\r\n\r\n    // Create the viewer\r\n    return new Viewer(global, gsplatLoad, skyboxLoad);\r\n};\r\n\r\nconsole.log(`SuperSplat Viewer v${appVersion} | Engine v${engineVersion} (${engineRevision})`);\r\n\r\nexport { main };"],"names":["vec","p","FlyControllerPC","OrbitControllerPC","Picker_","appVersion","engineVersion","engineRevision"],"mappings":";;;AAEA;AACA,MAAM,OAAO,GAAG,CAAC,MAAoB,EAAE,MAAW,KAAI;AAClD,IAAA,MAAM,OAAO,GAAG,IAAI,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AAE5C,IAAA,OAAO,IAAI,KAAK,CAAC,MAAM,EAAE;AACrB,QAAA,GAAG,CAAC,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,QAAQ,EAAA;;AAEjC,YAAA,IAAI,OAAO,QAAQ,KAAK,QAAQ,EAAE;AAC9B,gBAAA,OAAO,CAAC,KAAK,CAAC,sCAAsC,CAAC;AACrD,gBAAA,OAAO,KAAK;YAChB;;YAGA,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE;AACxB,gBAAA,OAAO,CAAC,KAAK,CAAC,mCAAmC,CAAC;AAClD,gBAAA,OAAO,KAAK;YAChB;;AAGA,YAAA,IAAI,MAAM,CAAC,QAAQ,CAAC,KAAK,KAAK,EAAE;AAC5B,gBAAA,MAAM,IAAI,GAAG,MAAM,CAAC,QAAQ,CAAC;AAC7B,gBAAA,MAAM,CAAC,QAAQ,CAAC,GAAG,KAAK;gBACxB,MAAM,CAAC,IAAI,CAAC,CAAA,EAAG,QAAQ,CAAA,QAAA,CAAU,EAAE,KAAK,EAAE,IAAI,CAAC;YACnD;AAEA,YAAA,OAAO,IAAI;QACf;AACH,KAAA,CAAC;AACN,CAAC;;AC3BD,MAAM,SAAS,GAAG,CAAC,QAAY,KAAQ;AACnC,IAAA,IAAI,QAAQ,CAAC,UAAU,EAAE;QACrB,QAAQ,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC,KAAkB,KAAI;;AAEhD,YAAA,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE;gBAClB,MAAM,gBAAgB,GAAG,EAAE;AAE3B,gBAAA,KAAK,CAAC,SAAS,GAAG,gBAAgB;AAClC,gBAAA,MAAM,KAAK,GAAG,KAAK,CAAC,SAAS,CAAC,KAAK;AACnC,gBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACnC,oBAAA,KAAK,CAAC,CAAC,CAAC,IAAI,gBAAgB;gBAChC;YACJ;;YAGA,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,YAAY,CAAC,EAAE;AACrC,gBAAA,KAAK,CAAC,UAAU,GAAG,CAAC;YACxB;AACJ,QAAA,CAAC,CAAC;IACN;SAAO;;AAEH,QAAA,QAAQ,CAAC,UAAU,GAAG,EAAE;IAC5B;AAEA,IAAA,OAAO,QAAQ;AACnB,CAAC;AAED,MAAM,kBAAkB,GAAG,CAAC,WAAwB,EAAE,GAAW,KAAiB;IAC9E,OAAO;QACH,IAAI,EAAE,WAAW,CAAC,IAAI;QACtB,QAAQ,EAAE,WAAW,CAAC,QAAQ;QAC9B,SAAS,EAAE,WAAW,CAAC,SAAS;QAChC,QAAQ,EAAE,WAAW,CAAC,QAAQ;QAC9B,aAAa,EAAE,WAAW,CAAC,aAAa;QACxC,UAAU,EAAE,WAAW,CAAC,UAAU;AAClC,QAAA,SAAS,EAAE;AACP,YAAA,KAAK,EAAE,WAAW,CAAC,SAAS,CAAC,KAAK;AAClC,YAAA,MAAM,EAAE;AACJ,gBAAA,QAAQ,EAAE,WAAW,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ;AAC/C,gBAAA,MAAM,EAAE,WAAW,CAAC,SAAS,CAAC,MAAM,CAAC,MAAM;AAC3C,gBAAA,GAAG,EAAE,IAAI,KAAK,CAAC,WAAW,CAAC,SAAS,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,GAAG;AAC9D;AACJ;KACJ;AACL,CAAC;AAED,MAAM,SAAS,GAAG,CAAC,EAAM,KAAQ;IAC7B,OAAO;AACH,QAAA,OAAO,EAAE,CAAC;AACV,QAAA,WAAW,EAAE,MAAM;AACnB,QAAA,sBAAsB,EAAE,KAAK;AAC7B,QAAA,UAAU,EAAE;AACR,YAAA,KAAK,EAAE,EAAE,CAAC,UAAU,CAAC,KAAiC,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC;AACrE,SAAA;AACD,QAAA,kBAAkB,EAAE;AAChB,YAAA,SAAS,EAAE;AACP,gBAAA,OAAO,EAAE,KAAK;AACd,gBAAA,MAAM,EAAE;AACX,aAAA;AACD,YAAA,KAAK,EAAE;AACH,gBAAA,OAAO,EAAE,KAAK;AACd,gBAAA,SAAS,EAAE,CAAC;AACZ,gBAAA,SAAS,EAAE;AACd,aAAA;AACD,YAAA,OAAO,EAAE;AACL,gBAAA,OAAO,EAAE,KAAK;AACd,gBAAA,UAAU,EAAE,CAAC;AACb,gBAAA,QAAQ,EAAE,CAAC;AACX,gBAAA,UAAU,EAAE,CAAC;AACb,gBAAA,IAAI,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC;AACjB,aAAA;AACD,YAAA,QAAQ,EAAE;AACN,gBAAA,OAAO,EAAE,KAAK;AACd,gBAAA,SAAS,EAAE,GAAG;AACd,gBAAA,KAAK,EAAE,GAAG;AACV,gBAAA,KAAK,EAAE,IAAI;AACX,gBAAA,SAAS,EAAE;AACd,aAAA;AACD,YAAA,QAAQ,EAAE;AACN,gBAAA,OAAO,EAAE,KAAK;AACd,gBAAA,SAAS,EAAE;AACd;AACJ,SAAA;QACD,UAAU,EAAE,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,WAAwB,KAAI;AACvD,YAAA,OAAO,kBAAkB,CAAC,WAAW,EAAE,EAAE,CAAC,MAAM,CAAC,GAAG,IAAI,EAAE,CAAC;AAC/D,QAAA,CAAC,CAAC;AACF,QAAA,OAAO,EAAE,CAAC;AACN,gBAAA,OAAO,EAAE;AACL,oBAAA,QAAQ,GAAG,EAAE,CAAC,MAAM,CAAC,QAAQ,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAA6B;AACvE,oBAAA,MAAM,GAAG,EAAE,CAAC,MAAM,CAAC,MAAM,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAA6B;AACnE,oBAAA,GAAG,EAAE,EAAE,CAAC,MAAM,CAAC,GAAG,IAAI;AACzB;aACJ,CAAC;AACF,QAAA,WAAW,EAAE,EAAE;AACf,QAAA,SAAS,EAAE,EAAE,CAAC,MAAM,CAAC,SAAS,KAAK,WAAW,GAAG,WAAW,GAAG,SAAS;AACxE,QAAA,YAAY,EAAE,CAAC,EAAE,EAAE,CAAC,MAAM,CAAC,QAAQ,IAAI,EAAE,CAAC,MAAM,CAAC,MAAM;KAC1D;AACL,CAAC;AAED;AACA,MAAM,cAAc,GAAG,CAAC,QAAa,KAAQ;AACzC,IAAA,IAAI,MAAU;AAEd,IAAA,MAAM,OAAO,GAAG,QAAQ,CAAC,OAAO;AAChC,IAAA,IAAI,OAAO,KAAK,SAAS,EAAE;;QAEvB,MAAM,GAAG,SAAS,CAAC,SAAS,CAAC,QAAc,CAAC,CAAC;IACjD;AAAO,SAAA,IAAI,OAAO,KAAK,CAAC,EAAE;;QAEtB,MAAM,GAAG,QAAc;IAC3B;SAAO;AACH,QAAA,MAAM,IAAI,KAAK,CAAC,4CAA4C,OAAO,CAAA,CAAE,CAAC;IAC1E;AAEA,IAAA,OAAO,MAAM;AACjB,CAAC;;ACpHD,MAAM,OAAO,CAAA;AACT,IAAA,QAAQ;AAER,IAAA,UAAU;AAEV,IAAA,OAAO;AAEP,IAAA,WAAA,CAAY,GAAgB,EAAA;AACxB,QAAA,MAAM,EAAE,KAAK,EAAE,GAAG,GAAG;AAErB,QAAA,KAAK,CAAC,OAAO,GAAG,MAAM;AAEtB,QAAA,MAAM,OAAO,GAAG,IAAI,GAAG,EAAoB;QAC3C,IAAI,KAAK,GAAW,CAAC;QAErB,IAAI,CAAC,QAAQ,GAAG,CAAC,MAAmB,EAAE,UAAkB,EAAE,SAAA,GAAuB,QAAQ,KAAI;YAEzF,MAAM,QAAQ,GAAG,MAAK;AAClB,gBAAA,MAAM,IAAI,GAAG,MAAM,CAAC,qBAAqB,EAAE;AAC3C,gBAAA,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,IAAI,GAAG,CAAC;AACvD,gBAAA,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,IAAI,GAAG,CAAC;gBAEvD,QAAQ,SAAS;AACb,oBAAA,KAAK,MAAM;wBACP,KAAK,CAAC,IAAI,GAAG,CAAA,EAAG,IAAI,CAAC,IAAI,IAAI;AAC7B,wBAAA,KAAK,CAAC,GAAG,GAAG,CAAA,EAAG,IAAI,IAAI;AACvB,wBAAA,KAAK,CAAC,SAAS,GAAG,qCAAqC;wBACvD;AACJ,oBAAA,KAAK,OAAO;wBACR,KAAK,CAAC,IAAI,GAAG,CAAA,EAAG,IAAI,CAAC,KAAK,IAAI;AAC9B,wBAAA,KAAK,CAAC,GAAG,GAAG,CAAA,EAAG,IAAI,IAAI;AACvB,wBAAA,KAAK,CAAC,SAAS,GAAG,uBAAuB;wBACzC;AACJ,oBAAA,KAAK,KAAK;AACN,wBAAA,KAAK,CAAC,IAAI,GAAG,CAAA,EAAG,IAAI,IAAI;wBACxB,KAAK,CAAC,GAAG,GAAG,CAAA,EAAG,IAAI,CAAC,GAAG,IAAI;AAC3B,wBAAA,KAAK,CAAC,SAAS,GAAG,qCAAqC;wBACvD;AACJ,oBAAA,KAAK,QAAQ;AACT,wBAAA,KAAK,CAAC,IAAI,GAAG,CAAA,EAAG,IAAI,IAAI;wBACxB,KAAK,CAAC,GAAG,GAAG,CAAA,EAAG,IAAI,CAAC,MAAM,IAAI;AAC9B,wBAAA,KAAK,CAAC,SAAS,GAAG,uBAAuB;wBACzC;;AAGR,gBAAA,GAAG,CAAC,WAAW,GAAG,UAAU;AAC5B,gBAAA,KAAK,CAAC,OAAO,GAAG,QAAQ;AAC5B,YAAA,CAAC;AAED,YAAA,MAAM,UAAU,GAAG,CAAC,EAAc,KAAI;AAClC,gBAAA,KAAK,GAAG,MAAM,CAAC,UAAU,CAAC,MAAK;AAC3B,oBAAA,EAAE,EAAE;oBACJ,KAAK,GAAG,EAAE;gBACd,CAAC,EAAE,GAAG,CAAC;AACX,YAAA,CAAC;YAED,MAAM,WAAW,GAAG,MAAK;AACrB,gBAAA,IAAI,KAAK,IAAI,CAAC,EAAE;oBACZ,YAAY,CAAC,KAAK,CAAC;oBACnB,KAAK,GAAG,EAAE;gBACd;AACJ,YAAA,CAAC;YAED,MAAM,KAAK,GAAG,MAAK;AACf,gBAAA,WAAW,EAAE;AAEb,gBAAA,IAAI,KAAK,CAAC,OAAO,KAAK,QAAQ,EAAE;AAC5B,oBAAA,QAAQ,EAAE;gBACd;qBAAO;AACH,oBAAA,UAAU,CAAC,MAAM,QAAQ,EAAE,CAAC;gBAChC;AACJ,YAAA,CAAC;YAED,MAAM,KAAK,GAAG,MAAK;AACf,gBAAA,WAAW,EAAE;AAEb,gBAAA,IAAI,KAAK,CAAC,OAAO,KAAK,QAAQ,EAAE;oBAC5B,UAAU,CAAC,MAAK;AACZ,wBAAA,KAAK,CAAC,OAAO,GAAG,MAAM;AAC1B,oBAAA,CAAC,CAAC;gBACN;AACJ,YAAA,CAAC;AAED,YAAA,MAAM,CAAC,gBAAgB,CAAC,cAAc,EAAE,KAAK,CAAC;AAC9C,YAAA,MAAM,CAAC,gBAAgB,CAAC,cAAc,EAAE,KAAK,CAAC;YAE9C,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC;AACzC,QAAA,CAAC;AAED,QAAA,IAAI,CAAC,UAAU,GAAG,CAAC,MAAmB,KAAI;YACtC,MAAM,KAAK,GAAG,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC;YACjC,IAAI,KAAK,EAAE;gBACP,MAAM,CAAC,mBAAmB,CAAC,cAAc,EAAE,KAAK,CAAC,KAAK,CAAC;gBACvD,MAAM,CAAC,mBAAmB,CAAC,cAAc,EAAE,KAAK,CAAC,KAAK,CAAC;AACvD,gBAAA,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC;YAC1B;AACJ,QAAA,CAAC;AAED,QAAA,IAAI,CAAC,OAAO,GAAG,MAAK;YAChB,KAAK,MAAM,MAAM,IAAI,OAAO,CAAC,IAAI,EAAE,EAAE;AACjC,gBAAA,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC;YAC3B;AACJ,QAAA,CAAC;IACL;AACH;;ACrGD,MAAM,CAAC,GAAG,IAAI,IAAI,EAAE;AAEpB;AACA,MAAM,UAAU,GAAG,CAAC,MAAoB,KAAI;IACxC,MAAM,MAAM,GAAG,QAAQ,CAAC,cAAc,CAAC,QAAQ,CAAC;AAEhD,IAAA,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,MAAK;AACzB,QAAA,MAAM,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM;QAC7B,QAAQ,CAAC,eAAe,CAAC,KAAK,CAAC,WAAW,CAAC,kBAAkB,EAAE,GAAG,CAAC;AACvE,IAAA,CAAC,CAAC;AAEF,IAAA,MAAM,IAAI,GAAG,CAAC,QAAgB,KAAI;AAC9B,QAAA,MAAM,CAAC,KAAK,CAAC,MAAM,GAAG,CAAA,KAAA,EAAQ,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,GAAG,QAAQ,IAAI,GAAG,CAAC,KAAK;AACzE,IAAA,CAAC;AAED,IAAA,MAAM,CAAC,EAAE,CAAC,kBAAkB,EAAE,IAAI,CAAC;AACvC,CAAC;AAED,MAAM,MAAM,GAAG,CAAC,MAAc,KAAI;IAC9B,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM;;AAGxC,IAAA,MAAM,OAAO,GAAG,QAAQ,CAAC,eAAe;AACxC,IAAA,MAAM,GAAG,GAAG;QACR,IAAI;QACJ,cAAc;AACd,QAAA,QAAQ,EAAE,QAAQ;AAClB,QAAA,iBAAiB,EAAE,gBAAgB;QACnC,MAAM,EAAE,WAAW,EAAE,YAAY,EAAE,UAAU,EAAE,kBAAkB,EAAE,gBAAgB;QACnF,mBAAmB,EAAE,QAAQ,EAAE,MAAM;QACrC,iBAAiB;AACjB,QAAA,MAAM,EAAE,OAAO;AACf,QAAA,UAAU,EAAE,eAAe;AAC3B,QAAA,aAAa,EAAE,WAAW;AAC1B,QAAA,SAAS,EAAE,UAAU,EAAE,SAAS,EAAE,UAAU;AAC5C,QAAA,OAAO,EAAE,OAAO;AAChB,QAAA,aAAa,EAAE,YAAY;AAC3B,QAAA,cAAc,EAAE,UAAU;QAC1B;AACH,KAAA,CAAC,MAAM,CAAC,CAAC,GAAgC,EAAE,EAAE,KAAI;QAC9C,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,cAAc,CAAC,EAAE,CAAC;AACrC,QAAA,OAAO,GAAG;IACd,CAAC,EAAE,EAAE,CAAC;;IAGN,MAAM,CAAC,EAAE,CAAC,kBAAkB,EAAE,CAAC,QAAQ,KAAI;QACvC,GAAG,CAAC,WAAW,CAAC,WAAW,GAAG,CAAA,EAAG,QAAQ,GAAG;AAC5C,QAAA,IAAI,QAAQ,GAAG,GAAG,EAAE;AAChB,YAAA,GAAG,CAAC,UAAU,CAAC,KAAK,CAAC,eAAe,GAAG,CAAA,qCAAA,EAAwC,QAAQ,CAAA,SAAA,EAAY,QAAQ,CAAA,cAAA,CAAgB;QAC/H;aAAO;YACH,GAAG,CAAC,UAAU,CAAC,KAAK,CAAC,eAAe,GAAG,4CAA4C;QACvF;AACJ,IAAA,CAAC,CAAC;;AAGF,IAAA,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,MAAK;AACzB,QAAA,QAAQ,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC;AAClE,IAAA,CAAC,CAAC;;IAGF,MAAM,gBAAgB,GAAG,OAAO,CAAC,iBAAiB,IAAI,QAAQ,CAAC,cAAc;IAE7E,MAAM,iBAAiB,GAAG,MAAK;QAC3B,IAAI,gBAAgB,EAAE;YAClB,OAAO,CAAC,iBAAiB,EAAE;QAC/B;aAAO;YACH,MAAM,CAAC,MAAM,CAAC,WAAW,CAAC,mBAAmB,EAAE,GAAG,CAAC;AACnD,YAAA,KAAK,CAAC,YAAY,GAAG,IAAI;QAC7B;AACJ,IAAA,CAAC;IAED,MAAM,cAAc,GAAG,MAAK;QACxB,IAAI,gBAAgB,EAAE;YAClB,QAAQ,CAAC,cAAc,EAAE;QAC7B;aAAO;YACH,MAAM,CAAC,MAAM,CAAC,WAAW,CAAC,gBAAgB,EAAE,GAAG,CAAC;AAChD,YAAA,KAAK,CAAC,YAAY,GAAG,KAAK;QAC9B;AACJ,IAAA,CAAC;IAED,IAAI,gBAAgB,EAAE;AAClB,QAAA,QAAQ,CAAC,gBAAgB,CAAC,kBAAkB,EAAE,MAAK;YAC/C,KAAK,CAAC,YAAY,GAAG,CAAC,CAAC,QAAQ,CAAC,iBAAiB;AACrD,QAAA,CAAC,CAAC;IACN;IAEA,GAAG,CAAC,eAAe,CAAC,gBAAgB,CAAC,OAAO,EAAE,iBAAiB,CAAC;IAChE,GAAG,CAAC,cAAc,CAAC,gBAAgB,CAAC,OAAO,EAAE,cAAc,CAAC;;;IAI5D,MAAM,EAAE,WAAW,EAAE,gBAAgB,CAAC,QAAQ,EAAE,CAAC,KAAK,KAAI;AACtD,QAAA,IAAI,CAAC,mBAAmB,EAAE,qBAAqB,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE;AAChF,YAAA,iBAAiB,EAAE;QACvB;aAAO;AACH,YAAA,cAAc,EAAE;QACpB;AACJ,IAAA,CAAC,CAAC;;IAGF,MAAM,CAAC,EAAE,CAAC,sBAAsB,EAAE,CAAC,KAAK,KAAI;AACxC,QAAA,GAAG,CAAC,eAAe,CAAC,SAAS,CAAC,KAAK,GAAG,KAAK,GAAG,QAAQ,CAAC,CAAC,QAAQ,CAAC;AACjE,QAAA,GAAG,CAAC,cAAc,CAAC,SAAS,CAAC,KAAK,GAAG,QAAQ,GAAG,KAAK,CAAC,CAAC,QAAQ,CAAC;AACpE,IAAA,CAAC,CAAC;;IAGF,GAAG,CAAC,QAAQ,CAAC,gBAAgB,CAAC,OAAO,EAAE,MAAK;AACxC,QAAA,KAAK,CAAC,MAAM,GAAG,IAAI;AACvB,IAAA,CAAC,CAAC;IACF,GAAG,CAAC,QAAQ,CAAC,gBAAgB,CAAC,OAAO,EAAE,MAAK;AACxC,QAAA,KAAK,CAAC,MAAM,GAAG,KAAK;AACxB,IAAA,CAAC,CAAC;IAEF,MAAM,QAAQ,GAAG,MAAK;QAClB,GAAG,CAAC,OAAO,CAAC,SAAS,CAAC,KAAK,CAAC,MAAM,GAAG,KAAK,GAAG,QAAQ,CAAC,CAAC,QAAQ,CAAC;QAChE,GAAG,CAAC,OAAO,CAAC,SAAS,CAAC,KAAK,CAAC,MAAM,GAAG,QAAQ,GAAG,KAAK,CAAC,CAAC,QAAQ,CAAC;AACpE,IAAA,CAAC;IACD,MAAM,CAAC,EAAE,CAAC,gBAAgB,EAAE,CAAC,KAAK,KAAI;AAClC,QAAA,QAAQ,EAAE;AACd,IAAA,CAAC,CAAC;AACF,IAAA,QAAQ,EAAE;;IAGV,MAAM,SAAS,GAAG,MAAM,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,GAAG,QAAQ,GAAG,KAAK,CAAC,CAAC,QAAQ,CAAC;IACtF,MAAM,SAAS,GAAG,MAAM,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,GAAG,QAAQ,GAAG,KAAK,CAAC,CAAC,QAAQ,CAAC;AAEtF,IAAA,GAAG,CAAC,MAAM,CAAC,gBAAgB,CAAC,OAAO,EAAE,MAAM,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;AAClE,IAAA,GAAG,CAAC,MAAM,CAAC,gBAAgB,CAAC,OAAO,EAAE,MAAM,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;AAElE,IAAA,MAAM,CAAC,EAAE,CAAC,eAAe,EAAE,SAAS,CAAC;AACrC,IAAA,MAAM,CAAC,EAAE,CAAC,eAAe,EAAE,SAAS,CAAC;AAErC,IAAA,SAAS,EAAE;AACX,IAAA,SAAS,EAAE;;AAGX,IAAA,MAAM,aAAa,GAAG,CAAC,GAAwB,KAAI;AAC/C,QAAA,IAAI,GAAG,KAAK,SAAS,EAAE;YACnB,GAAG,CAAC,UAAU,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC;YACtC,GAAG,CAAC,QAAQ,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC;YACvC,GAAG,CAAC,gBAAgB,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC;YAC/C,GAAG,CAAC,cAAc,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC;QAC9C;aAAO;YACH,GAAG,CAAC,UAAU,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC;YACzC,GAAG,CAAC,QAAQ,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC;YACpC,GAAG,CAAC,gBAAgB,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC;YAC5C,GAAG,CAAC,cAAc,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC;QACjD;AACJ,IAAA,CAAC;IAED,GAAG,CAAC,UAAU,CAAC,gBAAgB,CAAC,OAAO,EAAE,MAAK;QAC1C,aAAa,CAAC,SAAS,CAAC;AAC5B,IAAA,CAAC,CAAC;IAEF,GAAG,CAAC,QAAQ,CAAC,gBAAgB,CAAC,OAAO,EAAE,MAAK;QACxC,aAAa,CAAC,OAAO,CAAC;AAC1B,IAAA,CAAC,CAAC;IAEF,GAAG,CAAC,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,MAAK;AACpC,QAAA,aAAa,CAAC,KAAK,CAAC,SAAS,CAAC;QAC9B,GAAG,CAAC,SAAS,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC;AAC5C,IAAA,CAAC,CAAC;IAEF,GAAG,CAAC,SAAS,CAAC,gBAAgB,CAAC,aAAa,EAAE,MAAK;QAC/C,GAAG,CAAC,SAAS,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC;AACzC,IAAA,CAAC,CAAC;IAEF,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,CAAC,KAAK,KAAI;AAC9B,QAAA,IAAI,KAAK,KAAK,QAAQ,EAAE;;YAEpB,GAAG,CAAC,SAAS,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC;YACrC,GAAG,CAAC,aAAa,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC;;AAGzC,YAAA,IAAI,KAAK,CAAC,YAAY,EAAE;AACpB,gBAAA,cAAc,EAAE;YACpB;QACJ;AAAO,aAAA,IAAI,KAAK,KAAK,WAAW,EAAE;YAC9B,GAAG,CAAC,aAAa,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC;QAC7C;AACJ,IAAA,CAAC,CAAC;;IAGF,MAAM,CAAC,EAAE,CAAC,wBAAwB,EAAE,CAAC,KAAK,KAAI;AAC1C,QAAA,GAAG,CAAC,YAAY,CAAC,SAAS,GAAG,KAAK,GAAG,WAAW,GAAG,UAAU;AACjE,IAAA,CAAC,CAAC;;IAGF,IAAI,SAAS,GAAyC,IAAI;IAC1D,MAAM,MAAM,GAAG,MAAK;QAChB,IAAI,SAAS,EAAE;YACX,YAAY,CAAC,SAAS,CAAC;QAC3B;AACA,QAAA,KAAK,CAAC,cAAc,GAAG,KAAK;AAC5B,QAAA,SAAS,GAAG,UAAU,CAAC,MAAK;YACxB,SAAS,GAAG,IAAI;AAChB,YAAA,KAAK,CAAC,cAAc,GAAG,IAAI;QAC/B,CAAC,EAAE,IAAI,CAAC;AACZ,IAAA,CAAC;AACD,IAAA,MAAM,EAAE;AAER,IAAA,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,MAAM,CAAC;;IAG/B,MAAM,CAAC,EAAE,CAAC,sBAAsB,EAAE,CAAC,KAAK,EAAE,IAAI,KAAI;;QAE9C,GAAG,CAAC,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,MAAK;AACpC,YAAA,KAAK,CAAC,UAAU,GAAG,MAAM;AACzB,YAAA,KAAK,CAAC,eAAe,GAAG,KAAK;AACjC,QAAA,CAAC,CAAC;QAEF,GAAG,CAAC,KAAK,CAAC,gBAAgB,CAAC,OAAO,EAAE,MAAK;AACrC,YAAA,KAAK,CAAC,UAAU,GAAG,MAAM;AACzB,YAAA,KAAK,CAAC,eAAe,GAAG,IAAI;AAChC,QAAA,CAAC,CAAC;QAEF,MAAM,eAAe,GAAG,MAAK;YACzB,IAAI,KAAK,CAAC,UAAU,KAAK,MAAM,IAAI,KAAK,CAAC,eAAe,EAAE;gBACtD,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC;gBACnC,GAAG,CAAC,KAAK,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC;YACrC;iBAAO;gBACH,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC;gBAChC,GAAG,CAAC,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC;YACxC;AAEA,YAAA,IAAI,KAAK,CAAC,UAAU,KAAK,MAAM,EAAE;gBAC7B,GAAG,CAAC,iBAAiB,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC;YACpD;iBAAO;gBACH,GAAG,CAAC,iBAAiB,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC;YACjD;AACJ,QAAA,CAAC;;AAGD,QAAA,MAAM,CAAC,EAAE,CAAC,oBAAoB,EAAE,eAAe,CAAC;AAChD,QAAA,MAAM,CAAC,EAAE,CAAC,yBAAyB,EAAE,eAAe,CAAC;QAErD,MAAM,YAAY,GAAG,MAAK;AACtB,YAAA,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,GAAG,CAAA,EAAG,KAAK,CAAC,aAAa,GAAG,KAAK,CAAC,iBAAiB,GAAG,GAAG,GAAG;AACjF,YAAA,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,CAAA,EAAG,KAAK,CAAC,aAAa,GAAG,KAAK,CAAC,iBAAiB,GAAG,GAAG,GAAG;AAC/E,YAAA,GAAG,CAAC,IAAI,CAAC,SAAS,GAAG,CAAA,EAAG,KAAK,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG;AAC7D,QAAA,CAAC;AAED,QAAA,MAAM,CAAC,EAAE,CAAC,uBAAuB,EAAE,YAAY,CAAC;AAChD,QAAA,MAAM,CAAC,EAAE,CAAC,yBAAyB,EAAE,YAAY,CAAC;AAElD,QAAA,MAAM,WAAW,GAAG,CAAC,KAAmB,KAAI;YACxC,MAAM,IAAI,GAAG,GAAG,CAAC,iBAAiB,CAAC,qBAAqB,EAAE;AAC1D,YAAA,MAAM,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,EAAE,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK;YACvF,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,KAAK,CAAC,iBAAiB,GAAG,CAAC,CAAC;AACrD,YAAA,MAAM,EAAE;AACZ,QAAA,CAAC;QAED,IAAI,MAAM,GAAG,KAAK;QAClB,IAAI,QAAQ,GAAG,KAAK;QAEpB,GAAG,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,aAAa,EAAE,CAAC,KAAmB,KAAI;YAC1E,IAAI,CAAC,QAAQ,EAAE;gBACX,WAAW,CAAC,KAAK,CAAC;gBAClB,GAAG,CAAC,iBAAiB,CAAC,iBAAiB,CAAC,KAAK,CAAC,SAAS,CAAC;gBACxD,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC;AACnC,gBAAA,MAAM,GAAG,KAAK,CAAC,eAAe;AAC9B,gBAAA,KAAK,CAAC,eAAe,GAAG,IAAI;gBAC5B,QAAQ,GAAG,IAAI;YACnB;AACJ,QAAA,CAAC,CAAC;QAEF,GAAG,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,aAAa,EAAE,CAAC,KAAmB,KAAI;YAC1E,IAAI,QAAQ,EAAE;gBACV,WAAW,CAAC,KAAK,CAAC;YACtB;AACJ,QAAA,CAAC,CAAC;QAEF,GAAG,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,WAAW,EAAE,CAAC,KAAK,KAAI;YAC1D,IAAI,QAAQ,EAAE;gBACV,GAAG,CAAC,iBAAiB,CAAC,qBAAqB,CAAC,KAAK,CAAC,SAAS,CAAC;gBAC5D,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC;AAChC,gBAAA,KAAK,CAAC,eAAe,GAAG,MAAM;gBAC9B,QAAQ,GAAG,KAAK;YACpB;AACJ,QAAA,CAAC,CAAC;AACN,IAAA,CAAC,CAAC;;AAGF,IAAA,MAAM,CAAC,EAAE,CAAC,oBAAoB,EAAE,MAAK;QACjC,GAAG,CAAC,WAAW,CAAC,SAAS,CAAC,KAAK,CAAC,UAAU,KAAK,OAAO,GAAG,KAAK,GAAG,QAAQ,CAAC,CAAC,QAAQ,CAAC;QACpF,GAAG,CAAC,SAAS,CAAC,SAAS,CAAC,KAAK,CAAC,UAAU,KAAK,KAAK,GAAG,KAAK,GAAG,QAAQ,CAAC,CAAC,QAAQ,CAAC;AACpF,IAAA,CAAC,CAAC;IAEF,GAAG,CAAC,QAAQ,CAAC,gBAAgB,CAAC,OAAO,EAAE,MAAK;QACxC,GAAG,CAAC,aAAa,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC;AAChD,IAAA,CAAC,CAAC;IAEF,GAAG,CAAC,WAAW,CAAC,gBAAgB,CAAC,OAAO,EAAE,MAAK;AAC3C,QAAA,KAAK,CAAC,UAAU,GAAG,OAAO;AAC9B,IAAA,CAAC,CAAC;IAEF,GAAG,CAAC,SAAS,CAAC,gBAAgB,CAAC,OAAO,EAAE,MAAK;AACzC,QAAA,KAAK,CAAC,UAAU,GAAG,KAAK;AAC5B,IAAA,CAAC,CAAC;IAEF,GAAG,CAAC,KAAK,CAAC,gBAAgB,CAAC,OAAO,EAAE,CAAC,KAAK,KAAI;QAC1C,MAAM,CAAC,IAAI,CAAC,YAAY,EAAE,OAAO,EAAE,KAAK,CAAC;AAC7C,IAAA,CAAC,CAAC;IAEF,GAAG,CAAC,KAAK,CAAC,gBAAgB,CAAC,OAAO,EAAE,CAAC,KAAK,KAAI;QAC1C,MAAM,CAAC,IAAI,CAAC,YAAY,EAAE,OAAO,EAAE,KAAK,CAAC;AAC7C,IAAA,CAAC,CAAC;;IAGF,MAAM,CAAC,EAAE,CAAC,qBAAqB,EAAE,CAAC,IAAI,EAAE,KAAK,KAAI;AAC7C,QAAA,IAAI,IAAI,KAAK,IAAI,EAAE;YACf,GAAG,CAAC,YAAY,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC;QAC5C;aAAO;YACH,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,GAAG,EAAE,CAAC;AAC9C,YAAA,IAAI,CAAC,CAAC,MAAM,EAAE,GAAG,CAAC,EAAE;gBAChB,CAAC,CAAC,SAAS,EAAE;YACjB;AACA,YAAA,CAAC,CAAC,SAAS,CAAC,EAAE,CAAC;YAEf,GAAG,CAAC,YAAY,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC;AAC3C,YAAA,GAAG,CAAC,YAAY,CAAC,KAAK,CAAC,IAAI,GAAG,CAAA,EAAG,IAAI,CAAC,CAAC,CAAC,IAAI;AAC5C,YAAA,GAAG,CAAC,YAAY,CAAC,KAAK,CAAC,GAAG,GAAG,CAAA,EAAG,IAAI,CAAC,CAAC,CAAC,IAAI;AAC3C,YAAA,GAAG,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,GAAG,CAAA,EAAG,EAAE,GAAG,CAAC,CAAC,CAAC,IAAI;AACzC,YAAA,GAAG,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,GAAG,CAAA,EAAG,EAAE,GAAG,CAAC,CAAC,CAAC,IAAI;QAC5C;AACJ,IAAA,CAAC,CAAC;;AAGF,IAAA,IAAI,MAAM,CAAC,IAAI,EAAE;QACb,GAAG,CAAC,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC;IAClC;;IAGA,MAAM,OAAO,GAAG,IAAI,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC;IAExC,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,EAAE,MAAM,EAAE,KAAK,CAAC;IACzC,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,EAAE,OAAO,EAAE,KAAK,CAAC;IAC3C,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,WAAW,EAAE,cAAc,EAAE,KAAK,CAAC;IACxD,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,SAAS,EAAE,YAAY,EAAE,KAAK,CAAC;IACpD,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,EAAE,cAAc,EAAE,QAAQ,CAAC;IACrD,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,EAAE,aAAa,EAAE,QAAQ,CAAC;IACpD,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,QAAQ,EAAE,UAAU,EAAE,KAAK,CAAC;IACjD,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,EAAE,MAAM,EAAE,KAAK,CAAC;IACzC,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,MAAM,EAAE,UAAU,EAAE,KAAK,CAAC;IAC/C,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,MAAM,EAAE,UAAU,EAAE,KAAK,CAAC;IAC/C,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,eAAe,EAAE,YAAY,EAAE,KAAK,CAAC;IAC1D,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,cAAc,EAAE,YAAY,EAAE,KAAK,CAAC;AAC7D,CAAC;;ACzUD;AACA,MAAM,UAAU,GAAG,CAAA;;;;;;;CAOlB;AAED,MAAMA,KAAG,GAAG,IAAI,IAAI,EAAE;AAEtB;;;;;;;AAOG;AACG,MAAO,UAAW,SAAQ,MAAM,CAAA;AAClC,IAAA,OAAO,UAAU,GAAG,YAAY;AAEhC,IAAA,OAAO,WAAW,GAAG,EAAE;AAEvB,IAAA,OAAO,YAAY,GAAG,IAAI,KAAK,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;AAE9C,IAAA,OAAO,UAAU,GAAG,IAAI,KAAK,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;AAE5C,IAAA,OAAO,SAAS,GAAuB,IAAI;AAE3C,IAAA,OAAO,UAAU,GAA4B,IAAI;AAEjD,IAAA,OAAO,MAAM,GAAkB,IAAI;AAEnC,IAAA,OAAO,UAAU,GAA0B,IAAI;AAE/C,IAAA,OAAO,QAAQ,GAA0B,IAAI;AAE7C,IAAA,OAAO,OAAO,GAA0B,IAAI;AAE5C,IAAA,OAAO,MAAM,GAAY,EAAE;AAE3B,IAAA,OAAO,IAAI,GAAgB,IAAI;AAE/B,IAAA,OAAO,gBAAgB,GAAsB,IAAI;AAEjD,IAAA,OAAO,eAAe,GAAsB,IAAI;AAEhD,IAAA,OAAO,OAAO,GAAG,GAAG;AAEpB;;AAEG;AACH,IAAA,KAAK;AAEL;;AAEG;AACH,IAAA,KAAK;AAEL;;AAEG;AACH,IAAA,IAAI;AAEJ;;AAEG;IACH,UAAU,GAA0B,IAAI;AAExC;;AAEG;IACH,OAAO,GAAmB,IAAI;AAE9B;;AAEG;IACH,SAAS,GAAuB,EAAE;AAElC;;;;AAIG;IACH,OAAO,aAAa,CAAC,IAAY,EAAA;AAC7B,QAAA,MAAM,GAAG,GAAG,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CK,uBAAA,EAAA,IAAI,GAAG,CAAC,CAAA;AACP,wBAAA,EAAA,IAAI,GAAG,CAAC,CAAA;;;;;SAKzB;QAED,MAAM,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC;AAC7C,QAAA,KAAK,CAAC,WAAW,GAAG,GAAG;AACvB,QAAA,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC;AAChC,QAAA,UAAU,CAAC,UAAU,GAAG,KAAK;IACjC;AAEA;;;;AAIG;IACH,OAAO,iBAAiB,CAAC,GAAY,EAAA;AACjC,QAAA,IAAI,UAAU,CAAC,UAAU,EAAE;YACvB;QACJ;AAEA,QAAA,UAAU,CAAC,aAAa,CAAC,UAAU,CAAC,WAAW,CAAC;AAEhD,QAAA,IAAI,UAAU,CAAC,SAAS,KAAK,IAAI,EAAE;AAC/B,YAAA,UAAU,CAAC,SAAS,GAAG,QAAQ,CAAC,IAAI;QACxC;AAEA,QAAA,MAAM,EAAE,MAAM,EAAE,GAAG,GAAG,CAAC,KAAK;QAC5B,MAAM,UAAU,GAAG,MAAM,CAAC,cAAc,CAAC,OAAO,CAAC;AAEjD,QAAA,MAAM,WAAW,GAAG,CAAC,IAAY,EAAE,SAAkB,KAAI;YACrD,MAAM,KAAK,GAAG,IAAI,KAAK,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC;YACvC,MAAM,GAAG,GAAG,SAAS,GAAG,MAAM,CAAC,mBAAmB,CAAC,UAAU,CAAC,GAAG,MAAM,CAAC,cAAc,CAAC,UAAU,CAAC;YAClG,MAAM,CAAC,MAAM,CAAC,KAAK,EAAE,GAAG,GAAG,CAAC,CAAC;AAC7B,YAAA,OAAO,KAAK;AAChB,QAAA,CAAC;QAED,UAAU,CAAC,MAAM,GAAG;AAChB,YAAA,WAAW,CAAC,aAAa,EAAE,KAAK,CAAC;AACjC,YAAA,WAAW,CAAC,gBAAgB,EAAE,IAAI;SACrC;AAED,QAAA,IAAI,UAAU,CAAC,MAAM,KAAK,IAAI,EAAE;AAC5B,YAAA,UAAU,CAAC,MAAM,GAAG,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC,MAAM;QAC/D;AAEA,QAAA,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,GAAG;AAC9B,YAAA,GAAG,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM;AAClC,YAAA,GAAG,UAAU,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,IAAI,KAAK,CAAC,EAAE;SAC7C;AAED,QAAA,UAAU,CAAC,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,cAAc,EAAE,IAAI,aAAa,CAAC;AACtE,YAAA,aAAa,EAAE,CAAC;AAChB,YAAA,cAAc,EAAE;AACnB,SAAA,CAAC,CAAC;;QAGH,UAAU,CAAC,UAAU,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC;AACrD,QAAA,UAAU,CAAC,UAAU,CAAC,SAAS,GAAG,eAAe;QAEjD,UAAU,CAAC,QAAQ,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC;AACnD,QAAA,UAAU,CAAC,QAAQ,CAAC,SAAS,GAAG,qBAAqB;QACrD,UAAU,CAAC,UAAU,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC;QAEtD,UAAU,CAAC,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC;AAClD,QAAA,UAAU,CAAC,OAAO,CAAC,SAAS,GAAG,oBAAoB;QACnD,UAAU,CAAC,UAAU,CAAC,WAAW,CAAC,UAAU,CAAC,OAAO,CAAC;QAErD,UAAU,CAAC,SAAS,CAAC,WAAW,CAAC,UAAU,CAAC,UAAU,CAAC;IAC3D;AAEA;;;;;;;;AAQG;AACH,IAAA,OAAO,qBAAqB,CAAC,GAAY,EAAE,KAAa,EAAE,IAAI,GAAG,EAAE,EAAE,WAAW,GAAG,CAAC,EAAA;;QAEhF,MAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC;AAC/C,QAAA,MAAM,CAAC,KAAK,GAAG,IAAI;AACnB,QAAA,MAAM,CAAC,MAAM,GAAG,IAAI;QACpB,MAAM,GAAG,GAAG,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC;;AAGnC,QAAA,GAAG,CAAC,SAAS,GAAG,OAAO;AACvB,QAAA,GAAG,CAAC,WAAW,GAAG,CAAC;QACnB,GAAG,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC;AAC9B,QAAA,GAAG,CAAC,WAAW,GAAG,GAAG;;AAGrB,QAAA,MAAM,OAAO,GAAG,IAAI,GAAG,CAAC;AACxB,QAAA,MAAM,OAAO,GAAG,IAAI,GAAG,CAAC;QACxB,MAAM,MAAM,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,CAAC,CAAC;;QAG9B,GAAG,CAAC,SAAS,EAAE;AACf,QAAA,GAAG,CAAC,GAAG,CAAC,OAAO,EAAE,OAAO,EAAE,MAAM,EAAE,CAAC,EAAE,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;AACjD,QAAA,GAAG,CAAC,SAAS,GAAG,OAAO;QACvB,GAAG,CAAC,IAAI,EAAE;;QAGV,GAAG,CAAC,SAAS,EAAE;AACf,QAAA,GAAG,CAAC,GAAG,CAAC,OAAO,EAAE,OAAO,EAAE,MAAM,EAAE,CAAC,EAAE,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;AACjD,QAAA,GAAG,CAAC,SAAS,GAAG,WAAW;AAC3B,QAAA,GAAG,CAAC,WAAW,GAAG,OAAO;QACzB,GAAG,CAAC,MAAM,EAAE;;AAGZ,QAAA,GAAG,CAAC,IAAI,GAAG,iBAAiB;AAC5B,QAAA,GAAG,CAAC,SAAS,GAAG,QAAQ;AACxB,QAAA,GAAG,CAAC,YAAY,GAAG,QAAQ;AAC3B,QAAA,GAAG,CAAC,SAAS,GAAG,OAAO;AACvB,QAAA,GAAG,CAAC,QAAQ,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;;AAGpF,QAAA,MAAM,SAAS,GAAG,GAAG,CAAC,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC;AACpD,QAAA,MAAM,IAAI,GAAG,SAAS,CAAC,IAAI;;;AAI3B,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,EAAE;YACrC,MAAM,CAAC,GAAG,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;AACrB,YAAA,IAAI,CAAC,GAAG,GAAG,EAAE;AACT,gBAAA,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG;AACb,gBAAA,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG;AACjB,gBAAA,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG;YACrB;QACJ;QAEA,MAAM,OAAO,GAAG,IAAI,OAAO,CAAC,GAAG,CAAC,cAAc,EAAE;AAC5C,YAAA,KAAK,EAAE,IAAI;AACX,YAAA,MAAM,EAAE,IAAI;AACZ,YAAA,MAAM,EAAE,iBAAiB;AACzB,YAAA,SAAS,EAAE,aAAa;AACxB,YAAA,SAAS,EAAE,aAAa;AACxB,YAAA,OAAO,EAAE,KAAK;YACd,MAAM,EAAE,CAAC,IAAI,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC;AACvC,SAAA,CAAC;AAEF,QAAA,OAAO,OAAO;IAClB;AAEA;;;;;;;;;AASG;AACH,IAAA,OAAO,sBAAsB,CAAC,OAAgB,EAAE,EAAE,OAAO,GAAG,CAAC,EAAE,SAAS,GAAG,IAAI,EAAE,UAAU,GAAG,IAAI,EAAE,GAAG,EAAE,EAAA;AACrG,QAAA,MAAM,QAAQ,GAAG,IAAI,gBAAgB,EAAE;;AAGvC,QAAA,QAAQ,CAAC,OAAO,GAAG,KAAK,CAAC,KAAK;QAC9B,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC;AAC/C,QAAA,QAAQ,CAAC,WAAW,GAAG,OAAO;AAC9B,QAAA,QAAQ,CAAC,UAAU,GAAG,OAAO;;AAG7B,QAAA,QAAQ,CAAC,OAAO,GAAG,OAAO;AAC1B,QAAA,QAAQ,CAAC,SAAS,GAAG,IAAI;QACzB,QAAQ,CAAC,UAAU,GAAG,IAAI,UAAU,CAChC,IAAI,EACJ,iBAAiB,EAAE,mBAAmB,EAAE,6BAA6B,EACrE,iBAAiB,EAAE,aAAa,EAAE,aAAa,CAClD;;AAGD,QAAA,QAAQ,CAAC,SAAS,GAAG,SAAS;AAC9B,QAAA,QAAQ,CAAC,UAAU,GAAG,UAAU;;AAGhC,QAAA,QAAQ,CAAC,IAAI,GAAG,aAAa;AAC7B,QAAA,QAAQ,CAAC,WAAW,GAAG,KAAK;AAE5B,QAAA,QAAQ,CAAC,YAAY,CAAC,IAAI,CAAC,GAAG,CAAC;AAC3B,YAAA,kBAAkB,EAAE;AACvB,SAAA,CAAC;QAEF,QAAQ,CAAC,MAAM,EAAE;AACjB,QAAA,OAAO,QAAQ;IACnB;IAEA,UAAU,GAAA;;AAEN,QAAA,UAAU,CAAC,iBAAiB,CAAC,IAAI,CAAC,GAAG,CAAC;;AAGtC,QAAA,IAAI,CAAC,OAAO,GAAG,UAAU,CAAC,qBAAqB,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,KAAK,CAAC;;QAGrE,IAAI,CAAC,SAAS,GAAG;AACb,YAAA,UAAU,CAAC,sBAAsB,CAAC,IAAI,CAAC,OAAO,EAAE;AAC5C,gBAAA,OAAO,EAAE,CAAC;AACV,gBAAA,SAAS,EAAE,IAAI;AACf,gBAAA,UAAU,EAAE;aACf,CAAC;AACF,YAAA,UAAU,CAAC,sBAAsB,CAAC,IAAI,CAAC,OAAO,EAAE;AAC5C,gBAAA,OAAO,EAAE,IAAI;AACb,gBAAA,SAAS,EAAE,KAAK;AAChB,gBAAA,UAAU,EAAE;aACf;SACJ;AAED,QAAA,MAAM,IAAI,GAAG,IAAI,MAAM,CAAC,MAAM,CAAC;AAC/B,QAAA,MAAM,MAAM,GAAG,IAAI,YAAY,CAAC,UAAU,CAAC,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;AACnE,QAAA,MAAM,CAAC,IAAI,GAAG,KAAK;AACnB,QAAA,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE;YACxB,MAAM,EAAE,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;YACjC,aAAa,EAAE,CAAC,MAAM;AACzB,SAAA,CAAC;AAEF,QAAA,MAAM,OAAO,GAAG,IAAI,MAAM,CAAC,SAAS,CAAC;AACrC,QAAA,MAAM,SAAS,GAAG,IAAI,YAAY,CAAC,UAAU,CAAC,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;AACtE,QAAA,SAAS,CAAC,IAAI,GAAG,KAAK;AACtB,QAAA,OAAO,CAAC,YAAY,CAAC,QAAQ,EAAE;YAC3B,MAAM,EAAE,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;YACjC,aAAa,EAAE,CAAC,SAAS;AAC5B,SAAA,CAAC;AAEF,QAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC;AAC1B,QAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC;;QAG7B,IAAI,CAAC,UAAU,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC;AAC/C,QAAA,IAAI,CAAC,UAAU,CAAC,SAAS,GAAG,uBAAuB;;QAGnD,IAAI,CAAC,UAAU,CAAC,gBAAgB,CAAC,OAAO,EAAE,CAAC,CAAC,KAAI;YAC5C,CAAC,CAAC,eAAe,EAAE;YACnB,IAAI,CAAC,WAAW,EAAE;AACtB,QAAA,CAAC,CAAC;QAEF,MAAM,KAAK,GAAG,MAAK;AACf,YAAA,IAAI,UAAU,CAAC,eAAe,KAAK,IAAI,EAAE;AACrC,gBAAA,UAAU,CAAC,eAAe,GAAG,IAAI;AACjC,gBAAA,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC;YACxB;AACJ,QAAA,CAAC;QAED,MAAM,KAAK,GAAG,MAAK;AACf,YAAA,IAAI,UAAU,CAAC,eAAe,KAAK,IAAI,EAAE;AACrC,gBAAA,UAAU,CAAC,eAAe,CAAC,QAAQ,CAAC,KAAK,CAAC;YAC9C;AACA,YAAA,UAAU,CAAC,eAAe,GAAG,IAAI;AACjC,YAAA,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC;AACvB,QAAA,CAAC;QAED,IAAI,CAAC,UAAU,CAAC,gBAAgB,CAAC,cAAc,EAAE,KAAK,CAAC;QACvD,IAAI,CAAC,UAAU,CAAC,gBAAgB,CAAC,cAAc,EAAE,KAAK,CAAC;AAEvD,QAAA,QAAQ,CAAC,gBAAgB,CAAC,OAAO,EAAE,MAAK;YACpC,IAAI,CAAC,WAAW,EAAE;AACtB,QAAA,CAAC,CAAC;QAEF,UAAU,CAAC,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC;;AAGjD,QAAA,IAAI,CAAC,EAAE,CAAC,SAAS,EAAE,MAAK;AACpB,YAAA,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE;AACxB,YAAA,IAAI,UAAU,CAAC,gBAAgB,KAAK,IAAI,EAAE;gBACtC,IAAI,CAAC,WAAW,EAAE;YACtB;AAEA,YAAA,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,IAAI,GAAG,CAAC,OAAO,EAAE,CAAC;AAC5C,YAAA,IAAI,CAAC,SAAS,GAAG,EAAE;AAEnB,YAAA,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE;AACtB,YAAA,IAAI,CAAC,OAAO,GAAG,IAAI;AACvB,QAAA,CAAC,CAAC;QAEF,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,WAAW,EAAE,MAAK;YAC1B,IAAI,CAAC,UAAU,CAAC,MAAM;gBAAE;YAExB,MAAM,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE;AAC1C,YAAA,MAAM,SAAS,GAAG,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,aAAa,CAAC,QAAQ,CAAC;YAElE,MAAM,EAAE,UAAU,EAAE,GAAG,UAAU,CAAC,MAAM,CAAC,MAAM;AAC/C,YAAA,UAAU,CAAC,cAAc,CAAC,QAAQ,EAAEA,KAAG,CAAC;AACxC,YAAA,IAAIA,KAAG,CAAC,CAAC,IAAI,CAAC,EAAE;gBACZ,IAAI,CAAC,aAAa,EAAE;gBACpB;YACJ;AAEA,YAAA,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC;YAChC,IAAI,CAAC,uBAAuB,EAAE;;;YAI9B,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,OAAO,GAAG,UAAU,CAAC,OAAO;AAC9C,YAAA,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,OAAO,GAAG,IAAI,GAAG,UAAU,CAAC,OAAO;AACrD,YAAA,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,kBAAkB,EAAE,UAAU,CAAC,OAAO,CAAC;AACtE,YAAA,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,kBAAkB,EAAE,IAAI,GAAG,UAAU,CAAC,OAAO,CAAC;AACjF,QAAA,CAAC,CAAC;IACN;AAEA;;;;AAIG;AACH,IAAA,QAAQ,CAAC,KAAc,EAAA;QACnB,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,QAAQ,KAAI;AAChC,YAAA,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,GAAG,UAAU,CAAC,UAAU,GAAG,UAAU,CAAC,YAAY,CAAC;YAC/E,QAAQ,CAAC,MAAM,EAAE;AACrB,QAAA,CAAC,CAAC;AACF,QAAA,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC;IAC7B;AAEA;;AAEG;IACH,WAAW,GAAA;AACP,QAAA,UAAU,CAAC,gBAAgB,GAAG,IAAI;QAClC,UAAU,CAAC,UAAU,CAAC,KAAK,CAAC,UAAU,GAAG,SAAS;QAClD,UAAU,CAAC,UAAU,CAAC,KAAK,CAAC,OAAO,GAAG,GAAG;QACzC,UAAU,CAAC,QAAQ,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK;QAC5C,UAAU,CAAC,OAAO,CAAC,WAAW,GAAG,IAAI,CAAC,IAAI;AAC1C,QAAA,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC;IAC3B;AAEA;;AAEG;IACH,WAAW,GAAA;AACP,QAAA,UAAU,CAAC,gBAAgB,GAAG,IAAI;QAClC,UAAU,CAAC,UAAU,CAAC,KAAK,CAAC,OAAO,GAAG,GAAG;;QAGzC,UAAU,CAAC,MAAK;YACZ,IAAI,UAAU,CAAC,UAAU,CAAC,KAAK,CAAC,OAAO,KAAK,GAAG,EAAE;gBAC7C,UAAU,CAAC,UAAU,CAAC,KAAK,CAAC,UAAU,GAAG,QAAQ;YACrD;AACA,YAAA,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;AACrB,QAAA,CAAC,EAAE,GAAG,CAAC,CAAC;IACZ;AAEA;;;AAGG;IACH,aAAa,GAAA;QACT,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM;AACtC,QAAA,IAAI,UAAU,CAAC,gBAAgB,KAAK,IAAI,EAAE;YACtC,IAAI,UAAU,CAAC,UAAU,CAAC,KAAK,CAAC,UAAU,KAAK,QAAQ,EAAE;gBACrD,IAAI,CAAC,WAAW,EAAE;YACtB;QACJ;IACJ;AAEA;;;;AAIG;AACH,IAAA,gBAAgB,CAAC,SAAe,EAAA;;QAE5B,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO;AACvC,QAAA,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,IAAI,GAAG,CAAA,EAAG,SAAS,CAAC,CAAC,CAAA,EAAA,CAAI;AAC/C,QAAA,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,GAAG,GAAG,CAAA,EAAG,SAAS,CAAC,CAAC,CAAA,EAAA,CAAI;;AAG9C,QAAA,IAAI,UAAU,CAAC,gBAAgB,KAAK,IAAI,EAAE;AACtC,YAAA,UAAU,CAAC,UAAU,CAAC,KAAK,CAAC,IAAI,GAAG,CAAA,EAAG,SAAS,CAAC,CAAC,CAAA,EAAA,CAAI;AACrD,YAAA,UAAU,CAAC,UAAU,CAAC,KAAK,CAAC,GAAG,GAAG,CAAA,EAAG,SAAS,CAAC,CAAC,CAAA,EAAA,CAAI;QACxD;IACJ;AAEA;;;AAGG;IACH,uBAAuB,GAAA;;QAEnB,MAAM,cAAc,GAAG,UAAU,CAAC,MAAM,CAAC,WAAW,EAAE;QACtD,IAAI,CAAC,uBAAuB,CAAC,IAAI,CAAC,MAAM,EAAE,cAAc,CAAC;;AAGzD,QAAA,MAAM,KAAK,GAAG,IAAI,CAAC,0BAA0B,EAAE;QAC/C,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC;IAClD;AAEA;;;;;AAKG;IACH,uBAAuB,CAAC,OAAe,EAAE,cAAoB,EAAA;AACzD,QAAA,OAAO,CAAC,WAAW,CAAC,cAAc,CAAC;QACnC,OAAO,CAAC,WAAW,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC;IACjC;AAEA;;;;AAIG;IACH,0BAA0B,GAAA;QACtB,MAAM,SAAS,GAAG,UAAU,CAAC,MAAM,CAAC,WAAW,EAAE;AACjD,QAAA,MAAM,YAAY,GAAG,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC,GAAG,CAAC,SAAS,CAAC;AAC7D,QAAA,MAAM,QAAQ,GAAG,YAAY,CAAC,MAAM,EAAE;;QAGtC,MAAM,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,cAAc,CAAC,MAAM;AAC7C,QAAA,MAAM,YAAY,GAAG,MAAM,CAAC,YAAY;;QAGxC,MAAM,UAAU,GAAG,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,gBAAgB;QAC5D,MAAM,SAAS,GAAG,CAAC,UAAU,CAAC,WAAW,GAAG,YAAY,KAAK,CAAC,GAAG,QAAQ,GAAG,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AAE/F,QAAA,OAAO,SAAS;IACpB;;;AC1jBJ,MAAM,WAAW,CAAA;AACb,IAAA,WAAW;AAEX,IAAA,SAAS;IAET,WAAA,CAAY,MAAc,EAAE,cAAuB,EAAA;;QAE/C,MAAM,SAAS,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC;AAC/C,QAAA,SAAS,CAAC,EAAE,GAAG,aAAa;AAC5B,QAAA,UAAU,CAAC,SAAS,GAAG,SAAS;QAChC,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,WAAW,CAAC,SAAS,CAAC;QAEpD,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,wBAAwB,EAAE,CAAC,KAAK,KAAI;AACjD,YAAA,SAAS,CAAC,KAAK,CAAC,OAAO,GAAG,KAAK,GAAG,MAAM,GAAG,OAAO;AAClD,YAAA,UAAU,CAAC,OAAO,GAAG,KAAK,GAAG,GAAG,GAAG,GAAG;AACtC,YAAA,MAAM,CAAC,GAAG,CAAC,eAAe,GAAG,IAAI;AACrC,QAAA,CAAC,CAAC;QAEF,IAAI,CAAC,WAAW,GAAG,MAAM,CAAC,QAAQ,CAAC,WAAW;AAC9C,QAAA,IAAI,CAAC,SAAS,GAAG,SAAS;QAE1B,IAAI,cAAc,EAAE;AAChB,YAAA,UAAU,CAAC,YAAY,CAAC,KAAK,EAAE;AAC/B,YAAA,UAAU,CAAC,UAAU,CAAC,KAAK,EAAE;QACjC;;AAGA,QAAA,MAAM,MAAM,GAAG,MAAM,CAAC,GAAG,CAAC,IAAI;AAE9B,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC9C,MAAM,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;AAE/B,YAAA,MAAM,MAAM,GAAG,IAAI,MAAM,EAAE;AAC3B,YAAA,MAAM,CAAC,YAAY,CAAC,QAAQ,CAAC;AAC7B,YAAA,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC;AAChC,YAAA,MAAM,MAAM,GAAG,MAAM,CAAC,MAAa;AACnC,YAAA,MAAM,CAAC,UAAU,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,EAAE,QAAQ,EAAE;YAC5C,MAAM,CAAC,UAAU,CAAC,KAAK,GAAG,GAAG,CAAC,KAAK;YACnC,MAAM,CAAC,UAAU,CAAC,IAAI,GAAG,GAAG,CAAC,IAAI;YAEjC,MAAM,CAAC,WAAW,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;AAErE,YAAA,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC;;YAGvB,MAAM,CAAC,UAAU,CAAC,EAAE,CAAC,MAAM,EAAE,MAAK;gBAC9B,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,qBAAqB,EAAE,GAAG,CAAC;AAClD,YAAA,CAAC,CAAC;;YAGF,MAAM,CAAC,UAAU,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC,KAAc,KAAI;AAC7C,gBAAA,MAAM,CAAC,GAAG,CAAC,eAAe,GAAG,IAAI;AACrC,YAAA,CAAC,CAAC;QACN;IACJ;AACH;;ACtDD;;;;;;;;;AASG;AACH,MAAM,iBAAiB,GAAG,CAAC,QAAc,EAAE,MAAY,EAAE,GAAW,EAAE,OAAe,EAAE,EAAE,QAAA,GAAmB,EAAE,KAAe;AACzH,IAAA,MAAM,KAAK,GAAG,IAAI,KAAK,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,IAAI,GAAG,QAAQ,CAAC;IACxE,MAAM,SAAS,GAAa,EAAE;IAC9B,MAAM,OAAO,GAAa,EAAE;AAC5B,IAAA,MAAM,IAAI,GAAG,IAAI,KAAK,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC;AAEtC,IAAA,MAAM,GAAG,GAAG,IAAI,IAAI,EAAE;AACtB,IAAA,MAAM,GAAG,GAAG,IAAI,IAAI,EAAE;AACtB,IAAA,MAAM,GAAG,GAAG,IAAI,IAAI,CAChB,QAAQ,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,EACrB,QAAQ,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,EACrB,QAAQ,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CACxB;AAED,IAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,EAAE,EAAE,CAAC,EAAE;AAC3B,QAAA,GAAG,CAAC,kBAAkB,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI,GAAG,GAAG,EAAE,CAAC,CAAC;AAC7C,QAAA,GAAG,CAAC,cAAc,CAAC,GAAG,EAAE,GAAG,CAAC;QAE5B,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;QAChC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;QAChC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;AAEhC,QAAA,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;AACtB,QAAA,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;AACtB,QAAA,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;IAC1B;IAEA,OAAO;AACH,QAAA,IAAI,EAAE,QAAQ;QACd,QAAQ;AACR,QAAA,SAAS,EAAE,CAAC;AACZ,QAAA,QAAQ,EAAE,QAAQ;AAClB,QAAA,aAAa,EAAE,QAAQ;AACvB,QAAA,UAAU,EAAE,CAAC;AACb,QAAA,SAAS,EAAE;YACP,KAAK;AACL,YAAA,MAAM,EAAE;AACJ,gBAAA,QAAQ,EAAE,SAAS;AACnB,gBAAA,MAAM,EAAE,OAAO;AACf,gBAAA,GAAG,EAAE;AACR;AACJ;KACJ;AACL,CAAC;;AC5DD,MAAM,WAAW,CAAA;;AAEb,IAAA,KAAK;;AAGL,IAAA,KAAK;;AAGL,IAAA,GAAG;IAEH,WAAA,CAAY,KAAe,EAAE,KAAe,EAAA;AACxC,QAAA,IAAI,CAAC,KAAK,GAAG,KAAK;AAClB,QAAA,IAAI,CAAC,KAAK,GAAG,KAAK;AAClB,QAAA,IAAI,CAAC,GAAG,GAAG,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC,MAAM,GAAG,CAAC;IAC9C;IAEA,QAAQ,CAAC,IAAY,EAAE,MAAgB,EAAA;AACnC,QAAA,MAAM,EAAE,KAAK,EAAE,GAAG,IAAI;AACtB,QAAA,MAAM,IAAI,GAAG,KAAK,CAAC,MAAM,GAAG,CAAC;AAE7B,QAAA,IAAI,IAAI,IAAI,KAAK,CAAC,CAAC,CAAC,EAAE;AAClB,YAAA,IAAI,CAAC,OAAO,CAAC,CAAC,EAAE,MAAM,CAAC;QAC3B;AAAO,aAAA,IAAI,IAAI,IAAI,KAAK,CAAC,IAAI,CAAC,EAAE;AAC5B,YAAA,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,MAAM,CAAC;QAC9B;aAAO;YACH,IAAI,GAAG,GAAG,CAAC;YACX,OAAO,IAAI,IAAI,KAAK,CAAC,GAAG,GAAG,CAAC,CAAC,EAAE;AAC3B,gBAAA,GAAG,EAAE;YACT;AACA,YAAA,IAAI,CAAC,eAAe,CAAC,GAAG,EAAE,CAAC,IAAI,GAAG,KAAK,CAAC,GAAG,CAAC,KAAK,KAAK,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC,EAAE,MAAM,CAAC;QAC1F;IACJ;IAEA,OAAO,CAAC,KAAa,EAAE,MAAgB,EAAA;AACnC,QAAA,MAAM,EAAE,KAAK,EAAE,GAAG,EAAE,GAAG,IAAI;AAC3B,QAAA,MAAM,GAAG,GAAG,KAAK,GAAG,CAAC,GAAG,GAAG;AAC3B,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,EAAE,CAAC,EAAE;AAC1B,YAAA,MAAM,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QACtC;IACJ;;AAGA,IAAA,eAAe,CAAC,OAAe,EAAE,CAAS,EAAE,MAAgB,EAAA;AACxD,QAAA,MAAM,EAAE,KAAK,EAAE,GAAG,EAAE,GAAG,IAAI;AAE3B,QAAA,MAAM,EAAE,GAAG,CAAC,GAAG,CAAC;AAChB,QAAA,MAAM,IAAI,GAAG,CAAC,GAAG,CAAC;AAClB,QAAA,MAAM,GAAG,GAAG,CAAC,GAAG,CAAC;AACjB,QAAA,MAAM,IAAI,GAAG,GAAG,GAAG,GAAG;QAEtB,IAAI,GAAG,GAAG,OAAO,GAAG,GAAG,GAAG,CAAC,CAAC;AAC5B,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,EAAE,CAAC,EAAE;YAC1B,MAAM,EAAE,GAAG,KAAK,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;YAC1B,MAAM,EAAE,GAAG,KAAK,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;AAC1B,YAAA,MAAM,EAAE,GAAG,KAAK,CAAC,GAAG,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC;AAChC,YAAA,MAAM,EAAE,GAAG,KAAK,CAAC,GAAG,GAAG,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;YACpC,GAAG,IAAI,CAAC;YAER,MAAM,CAAC,CAAC,CAAC;gBACL,EAAE,IAAI,CAAC,CAAC,GAAG,IAAI,IAAI,IAAI,CAAC;AACxB,oBAAA,EAAE,IAAI,CAAC,GAAG,IAAI,CAAC;oBACf,EAAE,IAAI,EAAE,IAAI,CAAC,GAAG,IAAI,CAAC,CAAC;oBACtB,EAAE,IAAI,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;QAC3B;IACJ;;;;;AAMA,IAAA,OAAO,SAAS,CAAC,KAAe,EAAE,MAAgB,EAAE,UAAkB,EAAA;AAClE,QAAA,MAAM,CAAC,GAAG,KAAK,CAAC,MAAM;AACtB,QAAA,MAAM,GAAG,GAAG,MAAM,CAAC,MAAM,GAAG,CAAC;QAC7B,MAAM,KAAK,GAAG,IAAI,KAAK,CAAS,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC;AAE5C,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;AACxB,YAAA,MAAM,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;AAElB,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;AAC1B,gBAAA,MAAM,GAAG,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC;AACvB,gBAAA,MAAM,CAAC,GAAG,MAAM,CAAC,GAAG,CAAC;AAErB,gBAAA,IAAI,OAAO;AACX,gBAAA,IAAI,CAAC,KAAK,CAAC,EAAE;oBACT,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,GAAG,GAAG,CAAC,GAAG,CAAC,KAAK,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;gBAC1D;AAAO,qBAAA,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE;oBACpB,OAAO,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,GAAG,GAAG,GAAG,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;gBAC1D;qBAAO;AACH,oBAAA,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,GAAG,GAAG,CAAC,GAAG,MAAM,CAAC,GAAG,GAAG,GAAG,CAAC,KAAK,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;gBACrF;;AAGA,gBAAA,MAAM,OAAO,GAAG,CAAC,GAAG,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,KAAK,KAAK,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;AACzE,gBAAA,MAAM,QAAQ,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,KAAK,KAAK,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;gBAElF,KAAK,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,OAAO,GAAG,OAAO,GAAG,UAAU;gBAC/C,KAAK,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC;AACtB,gBAAA,KAAK,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,OAAO,GAAG,QAAQ,GAAG,UAAU;YACxD;QACJ;AAEA,QAAA,OAAO,KAAK;IAChB;IAEA,OAAO,UAAU,CAAC,KAAe,EAAE,MAAgB,EAAE,UAAU,GAAG,CAAC,EAAA;AAC/D,QAAA,OAAO,IAAI,WAAW,CAAC,KAAK,EAAE,WAAW,CAAC,SAAS,CAAC,KAAK,EAAE,MAAM,EAAE,UAAU,CAAC,CAAC;IACnF;;IAGA,OAAO,iBAAiB,CAAC,MAAc,EAAE,KAAe,EAAE,MAAgB,EAAE,UAAU,GAAG,CAAC,EAAA;AACtF,QAAA,IAAI,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;YAClB,OAAO,WAAW,CAAC,UAAU,CAAC,KAAK,EAAE,MAAM,CAAC;QAChD;QAEA,MAAM,GAAG,GAAG,MAAM,CAAC,MAAM,GAAG,KAAK,CAAC,MAAM;AACxC,QAAA,MAAM,QAAQ,GAAG,KAAK,CAAC,KAAK,EAAE;AAC9B,QAAA,MAAM,SAAS,GAAG,MAAM,CAAC,KAAK,EAAE;;AAGhC,QAAA,QAAQ,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC,CAAC,CAAC,EAAE,MAAM,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;AACnD,QAAA,SAAS,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,GAAG,GAAG,CAAC,CAAC,CAAC;;AAG3C,QAAA,QAAQ,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,MAAM,EAAE,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC;QACzF,SAAS,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC;QAEhE,OAAO,WAAW,CAAC,UAAU,CAAC,QAAQ,EAAE,SAAS,EAAE,UAAU,CAAC;IAClE;AACH;;AC9HD;;;;;;AAMG;AAGH;;;;;AAKG;AACH,MAAM,OAAO,GAAG,CAAC,CAAS,KAAK,CAAC,CAAC,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;AAExE;;;;;;AAMG;AACH,MAAM,GAAG,GAAG,CAAC,CAAS,EAAE,CAAS,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC;AAEvD,MAAM,YAAY,GAAG,CAAC,CAAgC,EAAE,CAAgC,EAAE,OAAO,GAAG,IAAI,KAAI;IACxG,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,OAAO,CAAC;AAC3D,CAAC;AAED,MAAM,WAAW,GAAG,CAAC,MAAY,EAAE,GAAS,KAAI;AAC5C,IAAA,MAAM,QAAQ,GAAG,GAAG,GAAG,IAAI,CAAC,EAAE;AAC9B,IAAA,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,QAAQ;AACtC,IAAA,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,QAAQ;AAChD,IAAA,MAAM,CAAC,CAAC,GAAG,CAAC;AACZ,IAAA,OAAO,MAAM;AACjB,CAAC;;ACpCD;AACA,MAAM,UAAU,CAAA;IACZ,QAAQ,GAAW,CAAC;IAEpB,QAAQ,GAAmC,MAAM;IAEjD,KAAK,GAAW,CAAC;IAEjB,MAAM,GAAW,CAAC;IAElB,WAAA,CAAY,QAAgB,EAAE,QAAwC,EAAA;AAClE,QAAA,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,QAAQ,CAAC;IAClC;AAEA,IAAA,MAAM,CAAC,SAAiB,EAAA;;AAEpB,QAAA,IAAI,CAAC,KAAK,IAAI,SAAS;;AAGvB,QAAA,IAAI,CAAC,MAAM,IAAI,SAAS;QAExB,IAAI,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,QAAQ,EAAE;AAC9B,YAAA,QAAQ,IAAI,CAAC,QAAQ;AACjB,gBAAA,KAAK,MAAM;AAAE,oBAAA,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,QAAQ;oBAAE;AAC1C,gBAAA,KAAK,QAAQ;AAAE,oBAAA,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,QAAQ;oBAAE;AAC7C,gBAAA,KAAK,UAAU;oBAAE,IAAI,CAAC,MAAM,KAAK,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;oBAAE;;QAE7D;IACJ;IAEA,KAAK,CAAC,QAAgB,EAAE,QAAwC,EAAA;AAC5D,QAAA,IAAI,CAAC,QAAQ,GAAG,QAAQ;AACxB,QAAA,IAAI,CAAC,QAAQ,GAAG,QAAQ;AACxB,QAAA,IAAI,CAAC,KAAK,GAAG,CAAC;AACd,QAAA,IAAI,CAAC,MAAM,GAAG,CAAC;IACnB;IAEA,IAAI,KAAK,CAAC,KAAa,EAAA;QACnB,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC;IAC3C;AAEA,IAAA,IAAI,KAAK,GAAA;QACL,OAAO,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM;IAClF;AACH;;ACxCD;AACA,MAAM,SAAS,CAAA;AACX,IAAA,MAAM;IAEN,MAAM,GAAe,IAAI,UAAU,CAAC,CAAC,EAAE,MAAM,CAAC;AAE9C,IAAA,SAAS;IAET,MAAM,GAAa,EAAE;AAErB,IAAA,QAAQ,GAAS,IAAI,IAAI,EAAE;AAE3B,IAAA,MAAM,GAAS,IAAI,IAAI,EAAE;AAEzB,IAAA,WAAA,CAAY,MAAmB,EAAE,QAAgB,EAAE,QAAwC,EAAE,SAAiB,EAAA;AAC1G,QAAA,IAAI,CAAC,MAAM,GAAG,MAAM;QACpB,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,QAAQ,EAAE,QAAQ,CAAC;AACrC,QAAA,IAAI,CAAC,SAAS,GAAG,SAAS;IAC9B;;AAGA,IAAA,MAAM,CAAC,EAAU,EAAA;AACb,QAAA,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,SAAS,EAAE,QAAQ,EAAE,MAAM,EAAE,GAAG,IAAI;;AAGpE,QAAA,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC;;QAGjB,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,GAAG,SAAS,EAAE,MAAM,CAAC;AAEjD,QAAA,IAAI,MAAM,CAAC,KAAK,CAAC,QAAQ,CAAC,EAAE;AACxB,YAAA,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC;AAC7C,YAAA,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC;QAC/C;IACJ;;IAGA,OAAO,SAAS,CAAC,KAAgB,EAAA;AAC7B,QAAA,MAAM,EAAE,SAAS,EAAE,QAAQ,EAAE,SAAS,EAAE,QAAQ,EAAE,UAAU,EAAE,GAAG,KAAK;AACtE,QAAA,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG,SAAS;AACnC,QAAA,MAAM,EAAE,QAAQ,EAAE,MAAM,EAAE,GAAG,MAAM;;QAGnC,MAAM,MAAM,GAAG,EAAE;AACjB,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACnC,YAAA,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;AACtE,YAAA,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;QACpE;QAEA,MAAM,KAAK,GAAG,CAAC,QAAQ,KAAK,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,SAAS,IAAI,CAAC,GAAG,CAAC;QAExE,MAAM,MAAM,GAAG,WAAW,CAAC,iBAAiB,CAAC,CAAC,QAAQ,GAAG,KAAK,IAAI,SAAS,EAAE,KAAK,EAAE,MAAM,EAAE,UAAU,CAAC;QAEvG,OAAO,IAAI,SAAS,CAAC,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,SAAS,CAAC;IAC/D;AACH;;ACxDD,MAAM,cAAc,CAAA;AAChB,IAAA,SAAS;AAET,IAAA,WAAA,CAAY,SAAoB,EAAA;QAC5B,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC,SAAS,CAAC,SAAS,CAAC;AAC/C,QAAA,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC;IAC5B;AAEA,IAAA,OAAO,CAAC,MAAc,EAAA;;AAElB,QAAA,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,QAAQ,EAAE,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;IAC/D;AAEA,IAAA,MAAM,CAAC,SAAiB,EAAE,UAAuB,EAAE,MAAc,EAAA;AAC7D,QAAA,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC;;AAGhC,QAAA,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,QAAQ,EAAE,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;;QAG3D,UAAU,CAAC,IAAI,EAAE;IACrB;AAEA,IAAA,MAAM,CAAC,MAAc,EAAA;IAErB;AACH;;ACrBD,MAAM,QAAQ,GAAG,IAAI,IAAI,EAAE;AAC3B,MAAM,IAAI,GAAG,IAAI,IAAI,EAAE;AACvB,MAAM,IAAI,GAAG,IAAI,IAAI,EAAE;AAEvB,MAAM,MAAM,CAAA;AACR,IAAA,QAAQ,GAAG,IAAI,IAAI,EAAE;AAErB,IAAA,MAAM,GAAG,IAAI,IAAI,EAAE;IAEnB,QAAQ,GAAG,CAAC;IAEZ,GAAG,GAAG,EAAE;AAER,IAAA,WAAA,CAAY,KAAc,EAAA;QACtB,IAAI,KAAK,EAAE;AACP,YAAA,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC;QACpB;IACJ;AAEA,IAAA,IAAI,CAAC,MAAc,EAAA;QACf,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC;QACnC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;AAC/B,QAAA,IAAI,CAAC,QAAQ,GAAG,MAAM,CAAC,QAAQ;AAC/B,QAAA,IAAI,CAAC,GAAG,GAAG,MAAM,CAAC,GAAG;IACzB;AAEA,IAAA,IAAI,CAAC,CAAS,EAAE,CAAS,EAAE,CAAS,EAAA;AAChC,QAAA,CAAC,CAAC,cAAc,CAAC,IAAI,CAAC;AACtB,QAAA,CAAC,CAAC,cAAc,CAAC,IAAI,CAAC;AAEtB,QAAA,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC,CAAC,QAAQ,EAAE,CAAC,CAAC;AAC7C,QAAA,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC;AAE3C,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,EAAE;AAE7B,QAAA,WAAW,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,SAAS,CAAC,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC;AAE7D,QAAA,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;IACzC;IAEA,IAAI,CAAC,IAAU,EAAE,EAAQ,EAAA;AACrB,QAAA,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC;QACxB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC;AACjC,QAAA,MAAM,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC,SAAS,EAAE;AAC3C,QAAA,WAAW,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC;IACjC;AAEA,IAAA,cAAc,CAAC,MAAY,EAAA;AACvB,QAAA,QAAQ,CAAC,kBAAkB,CAAC,IAAI,CAAC,MAAM;AACtC,aAAA,eAAe,CAAC,IAAI,CAAC,OAAO,EAAE,MAAM;AACpC,aAAA,SAAS,CAAC,IAAI,CAAC,QAAQ;AACvB,aAAA,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC;IACvB;AACH;;ACvDD,MAAMC,GAAC,GAAG,IAAI,IAAI,EAAE;AAEpB,MAAM,aAAa,CAAA;AACf,IAAA,UAAU;AAEV,IAAA,WAAA,GAAA;AACI,QAAA,IAAI,CAAC,UAAU,GAAG,IAAIC,eAAe,EAAE;AACvC,QAAA,IAAI,CAAC,UAAU,CAAC,UAAU,GAAG,IAAI,IAAI,CAAC,GAAG,EAAE,EAAE,CAAC;AAC9C,QAAA,IAAI,CAAC,UAAU,CAAC,aAAa,GAAG,IAAI;AACpC,QAAA,IAAI,CAAC,UAAU,CAAC,WAAW,GAAG,IAAI;IACtC;AAEA,IAAA,OAAO,CAAC,MAAc,EAAA;QAClBD,GAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC;QAChCA,GAAC,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;AAC5B,QAAAA,GAAC,CAAC,QAAQ,GAAG,MAAM,CAAC,QAAQ;QAC5B,IAAI,CAAC,UAAU,CAAC,MAAM,CAACA,GAAC,EAAE,KAAK,CAAC;IACpC;AAEA,IAAA,MAAM,CAAC,SAAiB,EAAE,UAAuB,EAAE,MAAc,EAAA;AAC7D,QAAA,MAAM,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,UAAU,EAAE,SAAS,CAAC;QAE1D,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC;QACnC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;AAC/B,QAAA,MAAM,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ;IACnC;AAEA,IAAA,MAAM,CAAC,MAAc,EAAA;IAErB;AAEA,IAAA,IAAI,CAAC,IAAU,EAAA;QACX,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC;IACtC;AACH;;AClCD,MAAM,CAAC,GAAG,IAAI,IAAI,EAAE;AAEpB,MAAM,eAAe,CAAA;AACjB,IAAA,UAAU;AAEV,IAAA,WAAA,GAAA;AACI,QAAA,IAAI,CAAC,UAAU,GAAG,IAAIE,iBAAiB,EAAE;AACzC,QAAA,IAAI,CAAC,UAAU,CAAC,SAAS,GAAG,IAAI,IAAI,CAAC,IAAI,EAAE,QAAQ,CAAC;AACpD,QAAA,IAAI,CAAC,UAAU,CAAC,UAAU,GAAG,IAAI,IAAI,CAAC,GAAG,EAAE,EAAE,CAAC;AAC9C,QAAA,IAAI,CAAC,UAAU,CAAC,aAAa,GAAG,IAAI;AACpC,QAAA,IAAI,CAAC,UAAU,CAAC,WAAW,GAAG,IAAI;AAClC,QAAA,IAAI,CAAC,UAAU,CAAC,WAAW,GAAG,IAAI;IACtC;AAEA,IAAA,OAAO,CAAC,MAAc,EAAA;QAClB,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC;QAChC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;AAC5B,QAAA,CAAC,CAAC,QAAQ,GAAG,MAAM,CAAC,QAAQ;QAC5B,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,EAAE,KAAK,CAAC;IACpC;AAEA,IAAA,MAAM,CAAC,SAAiB,EAAE,UAAuB,EAAE,MAAc,EAAA;AAC7D,QAAA,MAAM,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,UAAU,EAAE,SAAS,CAAC;QAE1D,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC;QACnC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;AAC/B,QAAA,MAAM,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ;IACnC;AAEA,IAAA,MAAM,CAAC,MAAc,EAAA;IAErB;AAEA,IAAA,IAAI,CAAC,MAAc,EAAA;QACf,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC;QAChC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;AAC5B,QAAA,CAAC,CAAC,QAAQ,GAAG,MAAM,CAAC,QAAQ;QAC5B,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,EAAE,IAAI,CAAC;IACnC;AACH;;ACjCD,MAAM,SAAS,GAAG,IAAI,MAAM,EAAE;AAC9B,MAAM,IAAI,GAAG,IAAI,IAAI,EAAE;AAEvB,MAAM,YAAY,GAAG,CAAC,QAAc,EAAE,MAAY,EAAE,GAAW,KAAI;AAC/D,IAAA,MAAM,MAAM,GAAG,IAAI,MAAM,EAAE;AAC3B,IAAA,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,MAAM,CAAC;AAC7B,IAAA,MAAM,CAAC,GAAG,GAAG,GAAG;AAChB,IAAA,OAAO,MAAM;AACjB,CAAC;AAED,MAAM,iBAAiB,GAAG,CAAC,IAAiB,EAAE,GAAW,KAAI;IACzD,MAAM,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE;AAC3C,IAAA,MAAM,QAAQ,GAAG,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,CAAC;AAChE,IAAA,OAAO,YAAY,CACf,IAAI,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,EAClE,IAAI,CAAC,MAAM,EACX,GAAG,CACN;AACL,CAAC;AAED,MAAM,aAAa,CAAA;AACf,IAAA,MAAM;;AAGN,IAAA,MAAM,GAAG,IAAI,MAAM,EAAE;IAErB,WAAA,CAAY,MAAc,EAAE,IAAiB,EAAA;QACzC,MAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,GAAG,MAAM;QAE1C,MAAM,OAAO,GAAG,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO;QAC3C,MAAM,WAAW,GAAG,iBAAiB,CAAC,IAAI,EAAE,OAAO,CAAC,GAAG,CAAC;QACxD,MAAM,WAAW,GAAG,YAAY,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,OAAO,CAAC,GAAG,CAAC;AAEnG,QAAA,MAAM,YAAY,GAAG,CAAC,OAAe,EAAE,kBAA2B,KAAI;AAClE,YAAA,MAAM,EAAE,UAAU,EAAE,GAAG,QAAQ;;AAG/B,YAAA,IAAI,UAAU,EAAE,MAAM,GAAG,CAAC,IAAI,QAAQ,CAAC,SAAS,KAAK,WAAW,EAAE;;AAE9D,gBAAA,OAAO,UAAU,CAAC,CAAC,CAAC;YACxB;iBAAO,IAAI,kBAAkB,EAAE;;AAE3B,gBAAA,OAAO,CAAC,cAAc,CAAC,IAAI,CAAC;AAC5B,gBAAA,OAAO,iBAAiB,CAAC,OAAO,CAAC,QAAQ,EAAE,IAAI,EAAE,OAAO,CAAC,GAAG,CAAC;YACjE;AACA,YAAA,OAAO,IAAI;AACf,QAAA,CAAC;;QAGD,MAAM,kBAAkB,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,QAAQ,CAAC;AACpE,QAAA,MAAM,SAAS,GAAG,YAAY,CAAC,QAAQ,CAAC,YAAY,GAAG,WAAW,GAAG,WAAW,EAAE,kBAAkB,CAAC;AAErG,QAAA,MAAM,WAAW,GAAG;YAChB,KAAK,EAAE,IAAI,eAAe,EAAE;YAC5B,GAAG,EAAE,IAAI,aAAa,EAAE;AACxB,YAAA,IAAI,EAAE,SAAS,GAAG,IAAI,cAAc,CAAC,SAAS,CAAC,GAAG;SACrD;AAED,QAAA,MAAM,aAAa,GAAG,CAAC,UAAoC,KAAsB;AAC7E,YAAA,OAAO,WAAW,CAAC,UAAU,CAAC;AAClC,QAAA,CAAC;;QAGD,KAAK,CAAC,YAAY,GAAG,CAAC,CAAC,WAAW,CAAC,IAAI;QACvC,KAAK,CAAC,iBAAiB,GAAG,WAAW,CAAC,IAAI,GAAG,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,GAAG,CAAC;;QAG3F,KAAK,CAAC,UAAU,GAAG,KAAK,CAAC,YAAY,GAAG,MAAM,IAAI,kBAAkB,GAAG,OAAO,GAAG,KAAK,CAAC;AACvF,QAAA,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC;QAE7B,MAAM,MAAM,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACvC,MAAM,IAAI,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACrC,IAAI,QAAQ,GAAe,kBAAkB,GAAG,OAAO,GAAG,KAAK;;AAG/D,QAAA,aAAa,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC;;QAGpD,MAAM,eAAe,GAAG,GAAG;QAC3B,IAAI,eAAe,GAAG,CAAC;;QAGvB,IAAI,CAAC,MAAM,GAAG,CAAC,SAAiB,EAAE,KAAkB,KAAI;;AAGpD,YAAA,MAAM,EAAE,GAAG,KAAK,CAAC,UAAU,KAAK,MAAM,IAAI,KAAK,CAAC,eAAe,GAAG,CAAC,GAAG,SAAS;;AAG/E,YAAA,eAAe,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,eAAe,GAAG,SAAS,GAAG,eAAe,CAAC;YAE5E,MAAM,UAAU,GAAG,aAAa,CAAC,KAAK,CAAC,UAAU,CAAC;YAElD,UAAU,CAAC,MAAM,CAAC,EAAE,EAAE,KAAK,EAAE,MAAM,CAAC;AAEpC,YAAA,IAAI,eAAe,GAAG,CAAC,EAAE;;AAErB,gBAAA,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,MAAM,EAAE,OAAO,CAAC,eAAe,CAAC,CAAC;YAC5D;iBAAO;AACH,gBAAA,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;YAC5B;;AAGA,YAAA,IAAI,KAAK,CAAC,UAAU,KAAK,MAAM,EAAE;AAC7B,gBAAA,KAAK,CAAC,aAAa,GAAG,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,KAAK;YACjE;AACJ,QAAA,CAAC;;QAGD,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,CAAC,SAAS,EAAE,KAAK,KAAI;YACzC,QAAQ,SAAS;AACb,gBAAA,KAAK,OAAO;AACR,oBAAA,KAAK,CAAC,UAAU,GAAG,OAAO;AAC1B,oBAAA,WAAW,CAAC,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC;oBACnC;AACJ,gBAAA,KAAK,OAAO;AACR,oBAAA,KAAK,CAAC,UAAU,GAAG,OAAO;AAC1B,oBAAA,WAAW,CAAC,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC;oBACnC;AACJ,gBAAA,KAAK,WAAW;AACZ,oBAAA,IAAI,KAAK,CAAC,YAAY,EAAE;AACpB,wBAAA,IAAI,KAAK,CAAC,UAAU,KAAK,MAAM,EAAE;AAC7B,4BAAA,KAAK,CAAC,eAAe,GAAG,CAAC,KAAK,CAAC,eAAe;wBAClD;6BAAO;AACH,4BAAA,KAAK,CAAC,UAAU,GAAG,MAAM;AACzB,4BAAA,KAAK,CAAC,eAAe,GAAG,KAAK;wBACjC;oBACJ;oBACA;AACJ,gBAAA,KAAK,QAAQ;AACb,gBAAA,KAAK,WAAW;AACZ,oBAAA,IAAI,KAAK,CAAC,UAAU,KAAK,MAAM,EAAE;AAC7B,wBAAA,KAAK,CAAC,UAAU,GAAG,QAAQ;oBAC/B;oBACA;;AAEZ,QAAA,CAAC,CAAC;;QAGF,MAAM,CAAC,EAAE,CAAC,oBAAoB,EAAE,CAAC,KAAK,EAAE,IAAI,KAAI;;AAE5C,YAAA,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;AACxB,YAAA,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;YACtB,QAAQ,GAAG,IAAI;;AAGf,YAAA,MAAM,cAAc,GAAG,aAAa,CAAC,IAAI,CAAC;AAC1C,YAAA,cAAc,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;;AAGlC,YAAA,MAAM,aAAa,GAAG,aAAa,CAAC,KAAK,CAAC;AAC1C,YAAA,aAAa,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC;;YAGlC,eAAe,GAAG,CAAC;AACvB,QAAA,CAAC,CAAC;;QAGF,MAAM,CAAC,EAAE,CAAC,WAAW,EAAE,CAAC,IAAI,KAAI;;AAE5B,YAAA,KAAK,CAAC,UAAU,GAAG,MAAM;;YAGzB,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,KAAK,GAAG,IAAI;AAClD,QAAA,CAAC,CAAC;;QAGF,MAAM,CAAC,EAAE,CAAC,MAAM,EAAE,CAAC,QAAc,KAAI;;AAEjC,YAAA,KAAK,CAAC,UAAU,GAAG,OAAO;;AAG1B,YAAA,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;YAC3B,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,QAAQ,CAAC;AAE9C,YAAA,WAAW,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC;AACrC,QAAA,CAAC,CAAC;QAEF,MAAM,CAAC,EAAE,CAAC,qBAAqB,EAAE,CAAC,UAAsB,KAAI;;AAExD,YAAA,KAAK,CAAC,UAAU,GAAG,OAAO;AAE1B,YAAA,MAAM,EAAE,OAAO,EAAE,GAAG,UAAU,CAAC,MAAM;;AAGrC,YAAA,SAAS,CAAC,GAAG,GAAG,OAAO,CAAC,GAAG;AAC3B,YAAA,SAAS,CAAC,IAAI,CACV,IAAI,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,EAC1B,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAC3B;AAED,YAAA,WAAW,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC;AACrC,QAAA,CAAC,CAAC;IACN;AACH;;AC7MD,MAAM,OAAO,GAAG,IAAI,YAAY,CAAC,CAAC,CAAC;AACnC,MAAM,KAAK,GAAG,IAAI,UAAU,CAAC,OAAO,CAAC,MAAM,CAAC;AAC5C,MAAM,GAAG,GAAG,IAAI,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;AAChC,MAAM,GAAG,GAAG,IAAI,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;AAEhC,MAAM,MAAM,CAAA;AACR,IAAA,GAAG;AAEH,IAAA,MAAM;AAEN,IAAA,MAAM;IAEN,WAAA,CAAY,GAAY,EAAE,MAAc,EAAA;AACpC,QAAA,IAAI,CAAC,GAAG,GAAG,GAAG;AACd,QAAA,IAAI,CAAC,MAAM,GAAG,MAAM;AACpB,QAAA,IAAI,CAAC,MAAM,GAAG,IAAI;IACtB;AAEA,IAAA,MAAM,IAAI,CAAC,CAAS,EAAE,CAAS,EAAA;AAC3B,QAAA,MAAM,EAAE,GAAG,EAAE,MAAM,EAAE,GAAG,IAAI;AAC5B,QAAA,MAAM,EAAE,cAAc,EAAE,GAAG,GAAG;AAC9B,QAAA,MAAM,EAAE,MAAM,EAAE,GAAG,cAAc;AACjC,QAAA,MAAM,KAAK,GAAG,MAAM,CAAC,WAAW;AAChC,QAAA,MAAM,MAAM,GAAG,MAAM,CAAC,YAAY;AAElC,QAAA,CAAC,GAAG,cAAc,CAAC,QAAQ,GAAG,MAAM,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC;;AAGhD,QAAA,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;AACd,YAAA,IAAI,CAAC,MAAM,GAAG,IAAIC,QAAO,CAAC,GAAG,EAAE,KAAK,EAAE,MAAM,CAAC;QACjD;;AAGA,QAAA,MAAM,EAAE,MAAM,EAAE,GAAG,IAAI;AACvB,QAAA,MAAM,CAAC,MAAM,CAAC,KAAK,EAAE,MAAM,CAAC;QAC5B,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,EAAE,GAAG,CAAC,KAAK,EAAE,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,CAAC;AACpF,QAAA,MAAM,MAAM,GAAG,MAAM,MAAM,CAAC,YAAY,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;YAClE,YAAY,EAAE,MAAM,CAAC;AACxB,SAAA,CAAC;AAEF,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,EAAE,CAAC,EAAE;YACxB,KAAK,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;QACxB;AAEA,QAAA,MAAM,KAAK,GAAG,OAAO,CAAC,CAAC,CAAC;;AAGxB,QAAA,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE;AAClB,YAAA,OAAO,IAAI;QACf;;QAGA,MAAM,GAAG,GAAG,IAAI,IAAI,CAAC,CAAC,GAAG,KAAK,EAAE,CAAC,GAAG,MAAM,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC;AAEvE,QAAA,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE;AAC1B,YAAA,GAAG,CAAC,CAAC,IAAI,EAAE;QACf;;AAGA,QAAA,MAAM,CAAC,MAAM,CAAC,gBAAgB,CAAC,KAAK,EAAE,CAAC,MAAM,EAAE,CAAC,aAAa,CAAC,GAAG,EAAE,GAAG,CAAC;;QAGvE,GAAG,CAAC,SAAS,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC;;AAG1B,QAAA,MAAM,IAAI,GAAG,IAAI,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC;QAC1C,MAAM,CAAC,iBAAiB,EAAE,CAAC,cAAc,CAAC,IAAI,EAAE,IAAI,CAAC;AAErD,QAAA,OAAO,IAAI;IACf;AACH;;ACzDD;AACA,MAAM,KAAK,GAAG,IAAI,IAAI,EAAE;AACxB,MAAM,KAAK,GAAG,IAAI,IAAI,EAAE;AACxB,MAAM,WAAW,GAAG,IAAI,IAAI,EAAE;AAC9B,MAAM,OAAO,GAAG,IAAI,IAAI,EAAE;AAC1B,MAAM,SAAS,GAAG,IAAI,IAAI,EAAE;AAC5B,MAAM,WAAW,GAAG,IAAI,IAAI,EAAE;AAC9B,MAAM,SAAS,GAAG,IAAI,IAAI,EAAE;AAC5B,MAAM,SAAS,GAAG,IAAI,IAAI,EAAE;AAC5B,MAAM,WAAW,GAAG,IAAI,IAAI,EAAE;AAE9B;;;;;;;;;;AAUG;AACH,MAAM,aAAa,GAAG,CAAC,MAAuB,EAAE,EAAU,EAAE,EAAU,EAAE,EAAU,EAAE,GAAA,GAAY,IAAI,IAAI,EAAE,KAAI;AAC1G,IAAA,MAAM,EAAE,MAAM,EAAE,GAAG,EAAE,WAAW,EAAE,aAAa,EAAE,UAAU,EAAE,WAAW,EAAE,GAAG,MAAM;AACnF,IAAA,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG,MAAM,CAAC,GAAG,CAAC,cAAc,CAAC,UAAU;;IAG9D,GAAG,CAAC,GAAG,CACH,EAAE,EAAE,GAAG,KAAK,CAAC,GAAG,CAAC,EACjB,CAAC,EAAE,GAAG,MAAM,IAAI,CAAC,EACjB,CAAC,CACJ;;AAGD,IAAA,MAAM,QAAQ,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;AACnC,IAAA,IAAI,UAAU,KAAK,sBAAsB,EAAE;AACvC,QAAA,MAAM,SAAS,GAAG,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,UAAU,CAAC;QAC5D,IAAI,aAAa,EAAE;YACf,QAAQ,CAAC,GAAG,CACR,SAAS,EACT,SAAS,GAAG,WAAW,EACvB,CAAC,CACJ;QACL;aAAO;YACH,QAAQ,CAAC,GAAG,CACR,SAAS,GAAG,WAAW,EACvB,SAAS,EACT,CAAC,CACJ;QACL;IACJ;SAAO;QACH,QAAQ,CAAC,GAAG,CACR,WAAW,GAAG,WAAW,EACzB,WAAW,EACX,CAAC,CACJ;IACL;;AAGA,IAAA,GAAG,CAAC,GAAG,CAAC,QAAQ,CAAC;AAEjB,IAAA,OAAO,GAAG;AACd,CAAC;AAED,MAAM,eAAe,CAAA;AACT,IAAA,MAAM,GAAG;QACb,IAAI,EAAE,IAAI,IAAI,EAAE;AAChB,QAAA,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;AAChB,QAAA,KAAK,EAAE,CAAC;AACR,QAAA,IAAI,EAAE,CAAC;AACP,QAAA,OAAO,EAAE;KACZ;AAEO,IAAA,aAAa,GAAwB,IAAI,mBAAmB,EAAE;AAE9D,IAAA,WAAW,GAAG,IAAI,gBAAgB,EAAE;AAEpC,IAAA,SAAS,GAAG,IAAI,iBAAiB,EAAE;AAEnC,IAAA,aAAa,GAAG,IAAI,aAAa,EAAE;AAE3C,IAAA,MAAM;IAEN,KAAK,GAAG,IAAI,UAAU,CAAC;AACnB,QAAA,IAAI,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;AACf,QAAA,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC;AACnB,KAAA,CAAC;IAEF,QAAQ,GAGJ,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE;;IAG/B,SAAS,GAAW,CAAC;IAErB,UAAU,GAAW,EAAE;IAEvB,UAAU,GAAW,GAAG;IAExB,UAAU,GAAW,IAAI;AAEzB,IAAA,WAAA,CAAY,MAAc,EAAA;QACtB,MAAM,EAAE,GAAG,EAAE,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM;AAC7C,QAAA,MAAM,MAAM,GAAG,GAAG,CAAC,cAAc,CAAC,MAA2B;AAE7D,QAAA,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,MAAM,CAAC;AACjC,QAAA,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,MAAM,CAAC;AAC/B,QAAA,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC;;AAG7B,QAAA,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,wBAAwB,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,KAAI;AAC7D,YAAA,IAAI,EAAE,GAAG,CAAC,IAAI,EAAE,GAAG,CAAC,IAAI,EAAE,GAAG,CAAC,IAAI,EAAE,GAAG,CAAC,EAAE;AACtC,gBAAA,IAAI,CAAC,QAAQ,CAAC,IAAI,GAAG,IAAI;AACzB,gBAAA,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,IAAI;gBAC1B;YACJ;YACA,IAAI,CAAC,QAAQ,CAAC,IAAI,GAAG,CAAC,EAAE,EAAE,EAAE,CAAC;AAC7B,YAAA,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,CAAC,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC;AAC5C,QAAA,CAAC,CAAC;AAEF,QAAA,IAAI,CAAC,MAAM,GAAG,MAAM;;AAGpB,QAAA,CAAC,OAAO,EAAE,aAAa,EAAE,aAAa,EAAE,SAAS,CAAC,CAAC,OAAO,CAAC,CAAC,SAAS,KAAI;YACrE,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,CAAC,KAAK,KAAI;gBACzC,MAAM,CAAC,IAAI,CAAC,YAAY,EAAE,WAAW,EAAE,KAAK,CAAC;AACjD,YAAA,CAAC,CAAC;AACN,QAAA,CAAC,CAAC;QAEF,MAAM,CAAC,gBAAgB,CAAC,aAAa,EAAE,CAAC,KAAK,KAAI;YAC7C,MAAM,CAAC,IAAI,CAAC,YAAY,EAAE,UAAU,EAAE,KAAK,CAAC;AAChD,QAAA,CAAC,CAAC;;AAGF,QAAA,MAAM,OAAO,GAAG,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;QACvC,MAAM,CAAC,gBAAgB,CAAC,aAAa,EAAE,CAAC,KAAK,KAAI;AAC7C,YAAA,MAAM,GAAG,GAAG,IAAI,CAAC,GAAG,EAAE;AACtB,YAAA,MAAM,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,GAAG,OAAO,CAAC,IAAI,CAAC;YAC7C,IAAI,KAAK,GAAG,GAAG;AACX,gBAAA,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC;AACvC,gBAAA,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE;gBACzC,MAAM,CAAC,IAAI,CAAC,YAAY,EAAE,UAAU,EAAE,KAAK,CAAC;AAC5C,gBAAA,OAAO,CAAC,IAAI,GAAG,CAAC;YACpB;iBAAO;AACH,gBAAA,OAAO,CAAC,IAAI,GAAG,GAAG;AAClB,gBAAA,OAAO,CAAC,CAAC,GAAG,KAAK,CAAC,OAAO;AACzB,gBAAA,OAAO,CAAC,CAAC,GAAG,KAAK,CAAC,OAAO;YAC7B;AACJ,QAAA,CAAC,CAAC;;QAGF,IAAI,MAAM,GAAkB,IAAI;QAChC,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,OAAO,SAAS,EAAE,KAAK,KAAI;YAC/C,QAAQ,SAAS;gBACb,KAAK,UAAU,EAAE;oBACb,IAAI,CAAC,MAAM,EAAE;wBACT,MAAM,GAAG,IAAI,MAAM,CAAC,GAAG,EAAE,MAAM,CAAC;oBACpC;AACA,oBAAA,MAAM,MAAM,GAAG,MAAM,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,KAAK,CAAC,OAAO,CAAC;oBAC9D,IAAI,MAAM,EAAE;AACR,wBAAA,MAAM,CAAC,IAAI,CAAC,MAAM,EAAE,MAAM,CAAC;oBAC/B;oBACA;gBACJ;;AAER,QAAA,CAAC,CAAC;;QAGF,CAAC,aAAa,EAAE,aAAa,CAAC,CAAC,OAAO,CAAC,CAAC,SAAS,KAAI;YACjD,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,CAAC,KAAmB,KAAI;AACvD,gBAAA,KAAK,CAAC,SAAS,GAAG,KAAK,CAAC,WAAW,KAAK,OAAO,GAAG,OAAO,GAAG,SAAS;AACzE,YAAA,CAAC,CAAC;AACN,QAAA,CAAC,CAAC;;QAGF,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,CAAC,KAAoB,KAAI;AACxD,YAAA,IAAI,KAAK,CAAC,GAAG,KAAK,QAAQ,EAAE;gBACxB,MAAM,CAAC,IAAI,CAAC,YAAY,EAAE,QAAQ,EAAE,KAAK,CAAC;YAC9C;AAAO,iBAAA,IAAI,CAAC,KAAK,CAAC,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE;AAC1D,gBAAA,QAAQ,KAAK,CAAC,GAAG;AACb,oBAAA,KAAK,GAAG;wBACJ,MAAM,CAAC,IAAI,CAAC,YAAY,EAAE,OAAO,EAAE,KAAK,CAAC;wBACzC;AACJ,oBAAA,KAAK,GAAG;wBACJ,MAAM,CAAC,IAAI,CAAC,YAAY,EAAE,OAAO,EAAE,KAAK,CAAC;wBACzC;AACJ,oBAAA,KAAK,GAAG;wBACJ,MAAM,CAAC,IAAI,CAAC,YAAY,EAAE,WAAW,EAAE,KAAK,CAAC;wBAC7C;;YAEZ;AACJ,QAAA,CAAC,CAAC;IACN;AAEA;;;;;AAKG;IACH,MAAM,CAAC,EAAU,EAAE,QAAgB,EAAA;AAC/B,QAAA,MAAM,EAAE,OAAO,EAAE,GAAG,mBAAmB;AAEvC,QAAA,MAAM,EAAE,GAAG,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE;AAC/D,QAAA,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE;AACvD,QAAA,MAAM,EAAE,SAAS,EAAE,UAAU,EAAE,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE;AACvD,QAAA,MAAM,EAAE,SAAS,EAAE,UAAU,EAAE,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE;QAE3D,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC,MAAM;QACrC,MAAM,EAAE,MAAM,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM;;QAGrC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAC1B,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,GAC3E,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,GAChC,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,OAAO,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAC5E,CAAC;QACF,IAAI,CAAC,MAAM,CAAC,OAAO,IAAI,KAAK,CAAC,CAAC,CAAC;AAC/B,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACpC,YAAA,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,MAAM,CAAC,CAAC,CAAC;QACrC;QACA,IAAI,CAAC,MAAM,CAAC,KAAK,IAAI,GAAG,CAAC,OAAO,CAAC,KAAK,CAAC;QACvC,IAAI,CAAC,MAAM,CAAC,IAAI,IAAI,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC;AAErC,QAAA,IAAI,KAAK,CAAC,UAAU,KAAK,KAAK,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC,EAAE;AAC7D,YAAA,KAAK,CAAC,UAAU,GAAG,KAAK;QAC5B;QAEA,MAAM,KAAK,GAAG,EAAE,KAAK,CAAC,UAAU,KAAK,OAAO,CAAC;QAC7C,MAAM,GAAG,GAAG,EAAE,KAAK,CAAC,UAAU,KAAK,KAAK,CAAC;AACzC,QAAA,MAAM,MAAM,GAAG,EAAE,IAAI,CAAC,MAAM,CAAC,OAAO,GAAG,CAAC,CAAC;QACzC,MAAM,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC,IAAI,MAAM;AAEjE,QAAA,MAAM,WAAW,GAAG,GAAG,GAAG,MAAM,CAAC,GAAG,GAAG,GAAG,GAAG,CAAC;AAE9C,QAAA,MAAM,EAAE,MAAM,EAAE,GAAG,IAAI,CAAC,KAAK;;AAG7B,QAAA,MAAM,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;AAC5B,QAAA,MAAM,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,SAAS,EAAE;QACpD,CAAC,CAAC,GAAG,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,GAAG,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,IAAI,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;AAC3G,QAAA,MAAM,OAAO,GAAG,aAAa,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC;QACnE,CAAC,CAAC,GAAG,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;AAC7B,QAAA,MAAM,SAAS,GAAG,IAAI,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;AAC3C,QAAA,CAAC,CAAC,GAAG,CAAC,SAAS,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC,CAAC;;AAEhD,QAAA,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;;QAGlD,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;AACd,QAAA,WAAW,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;QACtC,CAAC,CAAC,GAAG,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,GAAG,IAAI,IAAI,CAAC,UAAU,GAAG,WAAW,GAAG,EAAE,CAAC,CAAC;AAC5E,QAAA,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;;QAGrC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;AACd,QAAA,MAAM,SAAS,GAAG,aAAa,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC;AACrE,QAAA,CAAC,CAAC,GAAG,CAAC,SAAS,CAAC,SAAS,CAAC,KAAK,GAAG,GAAG,CAAC,CAAC;AACvC,QAAA,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;AAC3C,QAAA,CAAC,CAAC,GAAG,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,GAAG,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC,CAAC;AACnD,QAAA,SAAS,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;AAC7B,QAAA,CAAC,CAAC,GAAG,CAAC,SAAS,CAAC,SAAS,CAAC,KAAK,GAAG,MAAM,GAAG,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC,CAAC;AACjE,QAAA,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;;QAGnC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;AACd,QAAA,WAAW,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;QACtC,CAAC,CAAC,GAAG,CAAC,WAAW,CAAC,SAAS,CAAC,KAAK,IAAI,CAAC,GAAG,GAAG,CAAC,GAAG,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC,CAAC;AACtE,QAAA,SAAS,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;AAC9C,QAAA,CAAC,CAAC,GAAG,CAAC,SAAS,CAAC,SAAS,CAAC,GAAG,GAAG,IAAI,CAAC,UAAU,GAAG,WAAW,GAAG,EAAE,CAAC,CAAC;AACpE,QAAA,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;;QAGrC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;AACd,QAAA,SAAS,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;AAC7C,QAAA,CAAC,CAAC,GAAG,CAAC,SAAS,CAAC,SAAS,CAAC,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC,CAAC;AAC/C,QAAA,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;;QAGnC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;AACd,QAAA,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;AAChD,QAAA,CAAC,CAAC,GAAG,CAAC,WAAW,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,GAAG,WAAW,GAAG,EAAE,CAAC,CAAC;AAChE,QAAA,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;;AAGrC,QAAA,IAAI,KAAK,CAAC,UAAU,KAAK,KAAK,EAAE;AAC5B,YAAA,MAAM,CAAC,IAAI,CAAC,qBAAqB,EAAE,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC;QAC/E;IACJ;AACH;;AC/QD;AACA,MAAM,aAAa,cAAc,CAAA;;;;;;;;CAQhC;AAED,MAAM,UAAU,GAAG,CAAA;;;;CAIlB;AAED,MAAM,aAAa,cAAc,CAAA;;;;;;;;;CAShC;AAED,MAAM,YAAY,GAA2B;AACzC,IAAA,IAAI,EAAE,YAAY;AAClB,IAAA,MAAM,EAAE,cAAc;AACtB,IAAA,MAAM,EAAE,cAAc;AACtB,IAAA,IAAI,EAAE,YAAY;AAClB,IAAA,IAAI,EAAE,YAAY;AAClB,IAAA,KAAK,EAAE,aAAa;AACpB,IAAA,OAAO,EAAE;CACZ;AAED,MAAM,uBAAuB,GAAG,CAAC,WAAwB,EAAE,QAA4B,KAAI;AACvF,IAAA,IAAI,QAAQ,CAAC,SAAS,CAAC,OAAO,EAAE;QAC5B,WAAW,CAAC,SAAS,CAAC,SAAS,GAAG,QAAQ,CAAC,SAAS,CAAC,MAAM;IAC/D;SAAO;AACH,QAAA,WAAW,CAAC,SAAS,CAAC,SAAS,GAAG,CAAC;IACvC;AAEA,IAAA,MAAM,EAAE,KAAK,EAAE,GAAG,WAAW;AAC7B,IAAA,IAAI,QAAQ,CAAC,KAAK,CAAC,OAAO,EAAE;QACxB,KAAK,CAAC,SAAS,GAAG,QAAQ,CAAC,KAAK,CAAC,SAAS;QAC1C,KAAK,CAAC,SAAS,GAAG,QAAQ,CAAC,KAAK,CAAC,SAAS;IAC9C;SAAO;AACH,QAAA,KAAK,CAAC,SAAS,GAAG,CAAC;IACvB;AAEA,IAAA,MAAM,EAAE,OAAO,EAAE,GAAG,WAAW;AAC/B,IAAA,IAAI,QAAQ,CAAC,OAAO,CAAC,OAAO,EAAE;AAC1B,QAAA,OAAO,CAAC,OAAO,GAAG,IAAI;QACtB,OAAO,CAAC,UAAU,GAAG,QAAQ,CAAC,OAAO,CAAC,UAAU;QAChD,OAAO,CAAC,QAAQ,GAAG,QAAQ,CAAC,OAAO,CAAC,QAAQ;QAC5C,OAAO,CAAC,UAAU,GAAG,QAAQ,CAAC,OAAO,CAAC,UAAU;AAChD,QAAA,OAAO,CAAC,IAAI,GAAG,IAAI,KAAK,EAAE,CAAC,SAAS,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC;IAC/D;SAAO;AACH,QAAA,OAAO,CAAC,OAAO,GAAG,KAAK;IAC3B;AAEA,IAAA,MAAM,EAAE,QAAQ,EAAE,GAAG,WAAW;AAChC,IAAA,IAAI,QAAQ,CAAC,QAAQ,CAAC,OAAO,EAAE;QAC3B,QAAQ,CAAC,SAAS,GAAG,QAAQ,CAAC,QAAQ,CAAC,SAAS;QAChD,QAAQ,CAAC,KAAK,GAAG,QAAQ,CAAC,QAAQ,CAAC,KAAK;QACxC,QAAQ,CAAC,KAAK,GAAG,QAAQ,CAAC,QAAQ,CAAC,KAAK;QACxC,QAAQ,CAAC,SAAS,GAAG,QAAQ,CAAC,QAAQ,CAAC,SAAS;IACpD;SAAO;AACH,QAAA,QAAQ,CAAC,SAAS,GAAG,CAAC;IAC1B;AAEA,IAAA,MAAM,EAAE,QAAQ,EAAE,GAAG,WAAW;AAChC,IAAA,IAAI,QAAQ,CAAC,QAAQ,CAAC,OAAO,EAAE;QAC3B,QAAQ,CAAC,SAAS,GAAG,QAAQ,CAAC,QAAQ,CAAC,SAAS;IACpD;SAAO;AACH,QAAA,QAAQ,CAAC,SAAS,GAAG,CAAC;IAC1B;AACJ,CAAC;AAED,MAAM,oBAAoB,GAAG,CAAC,QAA4B,KAAa;AACnE,IAAA,OAAO,CAAC,QAAQ,CAAC,SAAS,CAAC,OAAO,IAAI,QAAQ,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC;AAC/D,SAAC,QAAQ,CAAC,KAAK,CAAC,OAAO,IAAI,QAAQ,CAAC,KAAK,CAAC,SAAS,GAAG,CAAC,CAAC;AACxD,SAAC,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC;AAC1B,SAAC,QAAQ,CAAC,QAAQ,CAAC,OAAO,IAAI,QAAQ,CAAC,QAAQ,CAAC,SAAS,GAAG,CAAC,CAAC;AAC9D,SAAC,QAAQ,CAAC,QAAQ,CAAC,OAAO,IAAI,QAAQ,CAAC,QAAQ,CAAC,SAAS,GAAG,CAAC,CAAC;AACtE,CAAC;AAED,MAAM,GAAG,GAAG,IAAI,IAAI,EAAE;AAEtB,MAAM,MAAM,CAAA;AACR,IAAA,MAAM;AAEN,IAAA,WAAW;AAEX,IAAA,eAAe;AAEf,IAAA,aAAa;AAEb,IAAA,WAAW;IAEX,oBAAoB,GAAG,KAAK;AAE5B,IAAA,WAAA,CAAY,MAAc,EAAE,UAA2B,EAAE,UAAyB,EAAA;AAC9E,QAAA,IAAI,CAAC,MAAM,GAAG,MAAM;AAEpB,QAAA,MAAM,EAAE,GAAG,EAAE,QAAQ,EAAE,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG,MAAM;AAC/D,QAAA,MAAM,EAAE,cAAc,EAAE,GAAG,GAAG;;AAG7B,QAAA,GAAG,CAAC,MAAM,CAAC,UAAU,CAAC,SAAS,CAAoB,CAAC,SAAS,CAAC,WAAW,GAAG,WAAW;;QAGxF,MAAM,IAAI,GAAG,YAAY,CAAC,GAAG,CAAC,cAAc,EAAE,MAAM,CAAC;AACrD,QAAA,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,OAAO,CAAC,8BAA8B,EAAE,IAAI,CAAC,CAAC;AACxF,QAAA,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,aAAa,CAAC;QAEjC,MAAM,IAAI,GAAG,YAAY,CAAC,GAAG,CAAC,cAAc,EAAE,MAAM,CAAC;AACrD,QAAA,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,OAAO,CAAC,sCAAsC,EAAE,IAAI,CAAC,CAAC;AAChG,QAAA,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,aAAa,CAAC;;AAGjC,QAAA,GAAG,CAAC,UAAU,GAAG,KAAK;;AAGtB,QAAA,MAAM,CAAC,MAAM,CAAC,WAAW,GAAG,cAAc,CAAC,KAAK,GAAG,cAAc,CAAC,MAAM;;AAGxE,QAAA,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC;;AAG9B,QAAA,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE,MAAM,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC;AACxD,QAAA,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,KAAK,EAAE,MAAM,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC;;QAGtD,MAAM,mBAAmB,GAAG,MAAK;AAC7B,YAAA,MAAM,CAAC,MAAM,CAAC,aAAa,GAAG,cAAc,CAAC,KAAK,GAAG,cAAc,CAAC,MAAM;AAC1E,YAAA,GAAG,CAAC,eAAe,GAAG,IAAI;AAC9B,QAAA,CAAC;AACD,QAAA,cAAc,CAAC,EAAE,CAAC,cAAc,EAAE,mBAAmB,CAAC;AACtD,QAAA,mBAAmB,EAAE;;QAGrB,MAAM,YAAY,GAAG,MAAK;AACtB,YAAA,cAAc,CAAC,aAAa,GAAG,KAAK,CAAC,MAAM,GAAG,MAAM,CAAC,gBAAgB,GAAG,CAAC;AACzE,YAAA,GAAG,CAAC,eAAe,GAAG,IAAI;AAC9B,QAAA,CAAC;AACD,QAAA,MAAM,CAAC,EAAE,CAAC,gBAAgB,EAAE,YAAY,CAAC;AACzC,QAAA,YAAY,EAAE;;AAGd,QAAA,IAAI,MAAM,CAAC,SAAS,EAAE;AAClB,YAAA,MAAM,OAAO,GAAG,SAAS,CAAC,iBAAiB,EAAS;AACpD,YAAA,OAAO,CAAC,GAAG,CAAC,OAAO,GAAG,KAAK;YAC3B,OAAO,CAAC,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAM,KAAK,CAAC,CAAC,IAAI,KAAK,WAAW,CAAC;AACxE,YAAA,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC;AACf,gBAAA,IAAI,EAAE,MAAM;gBACZ,KAAK,EAAE,CAAC,UAAU,CAAC;AACnB,gBAAA,aAAa,EAAE,CAAC;AAChB,gBAAA,UAAU,EAAE,CAAC,IAAI,IAAI,GAAG,IAAI,CAAC;AAC7B,gBAAA,SAAS,EAAE,IAAI;AACf,gBAAA,SAAS,EAAE;aACd,EAAE;AACC,gBAAA,IAAI,EAAE,QAAQ;gBACd,KAAK,EAAE,CAAC,eAAe,CAAC;AACxB,gBAAA,aAAa,EAAE,CAAC;gBAChB,UAAU,EAAE,CAAC,GAAG,OAAO;AACvB,gBAAA,SAAS,EAAE,GAAG;AACd,gBAAA,SAAS,EAAE;AACd,aAAA,CAAC;;AAGF,YAAA,IAAI,SAAS,CAAC,GAAG,EAAE,OAAO,CAAC;QAC/B;AAEA,QAAA,MAAM,QAAQ,GAAG,IAAI,IAAI,EAAE;AAC3B,QAAA,MAAM,SAAS,GAAG,IAAI,IAAI,EAAE;AAC5B,QAAA,MAAM,UAAU,GAAG,IAAI,WAAW,EAAE;;AAGpC,QAAA,GAAG,CAAC,EAAE,CAAC,aAAa,EAAE,MAAK;AACvB,YAAA,MAAM,KAAK,GAAG,MAAM,CAAC,iBAAiB,EAAE;AACxC,YAAA,MAAM,IAAI,GAAG,MAAM,CAAC,MAAM,CAAC,gBAAgB;AAE3C,YAAA,IAAI,CAAC,GAAG,CAAC,eAAe,EAAE;gBACtB,IAAI,MAAM,CAAC,SAAS;oBAChB,CAAC,YAAY,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,IAAI,CAAC;oBACzC,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,EAAE,QAAQ,CAAC,IAAI,CAAC,EAAE;AACzC,oBAAA,GAAG,CAAC,eAAe,GAAG,IAAI;gBAC9B;YACJ;;AAGA,YAAA,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE;AACtB,gBAAA,GAAG,CAAC,eAAe,GAAG,KAAK;YAC/B;AAEA,YAAA,IAAI,IAAI,CAAC,oBAAoB,EAAE;AAC3B,gBAAA,GAAG,CAAC,eAAe,GAAG,IAAI;YAC9B;AAEA,YAAA,IAAI,GAAG,CAAC,eAAe,EAAE;AACrB,gBAAA,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC;AACrB,gBAAA,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC;YACvB;AACJ,QAAA,CAAC,CAAC;AAEF,QAAA,MAAM,WAAW,GAAG,CAAC,MAAc,KAAI;AACnC,YAAA,MAAM,YAAY,GAAG,MAAM,CAAC,MAAM;AAElC,YAAA,YAAY,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC;AACzC,YAAA,YAAY,CAAC,cAAc,CAAC,MAAM,CAAC,MAAM,CAAC;YAC1C,YAAY,CAAC,MAAM,CAAC,GAAG,GAAG,MAAM,CAAC,GAAG;;YAGpC,MAAM,WAAW,GAAG,UAAU,CAAC,WAAW,CAAC,MAAM,EAAE;;YAGnD,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,MAAM,CAAC,QAAQ,CAAC;YAC5C,MAAM,IAAI,GAAG,GAAG,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC;AAE1C,YAAA,MAAM,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,WAAW,EAAE,IAAI,CAAC;AAC9C,YAAA,MAAM,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,WAAW,EAAE,GAAG,IAAI,IAAI,GAAG,EAAE,CAAC,CAAC;AAE5D,YAAA,YAAY,CAAC,MAAM,CAAC,OAAO,GAAG,GAAG;AACjC,YAAA,YAAY,CAAC,MAAM,CAAC,QAAQ,GAAG,IAAI;AACvC,QAAA,CAAC;;QAGD,GAAG,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,SAAS,KAAI;;AAE3B,YAAA,IAAI,GAAG,CAAC,EAAE,CAAC,MAAM,EAAE;gBACf;YACJ;YAEA,IAAI,IAAI,CAAC,eAAe,IAAI,IAAI,CAAC,aAAa,EAAE;;AAE5C,gBAAA,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,SAAS,EAAE,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,QAAQ,CAAC;;AAG1E,gBAAA,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,SAAS,EAAE,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC;;AAGhE,gBAAA,WAAW,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC;YAC1C;AACJ,QAAA,CAAC,CAAC;;AAGF,QAAA,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,MAAK;YACzB,KAAK,CAAC,eAAe,GAAG,CAAC,CAAC,MAAM,CAAC,MAAM;AAC3C,QAAA,CAAC,CAAC;;AAGF,QAAA,OAAO,CAAC,GAAG,CAAC,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,OAAO,KAAI;YACnD,MAAM,MAAM,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,MAAyB;;AAGnD,YAAA,MAAM,UAAU,GAAG,MAAM,CAAC,UAAU;YACpC,IAAI,UAAU,EAAE;AACZ,gBAAA,UAAU,CAAC,sBAAsB,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,iBAAiB,EAAE,CAAC;YACjF;AAEA,YAAA,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE;AACd,gBAAA,IAAI,CAAC,WAAW,GAAG,IAAI,WAAW,CAAC,MAAM,EAAE,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC;YACxE;YAEA,IAAI,CAAC,eAAe,GAAG,IAAI,eAAe,CAAC,MAAM,CAAC;YAElD,IAAI,CAAC,aAAa,GAAG,IAAI,aAAa,CAAC,MAAM,EAAE,UAAU,CAAC;AAC1D,YAAA,WAAW,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC;AAEtC,YAAA,MAAM,EAAE,QAAQ,EAAE,GAAG,MAAM;YAC3B,IAAI,QAAQ,EAAE;;AAEV,gBAAA,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC;;gBAGrB,QAAQ,CAAC,MAAM,EAAE,EAAE,CAAC,SAAS,EAAE,MAAK;;AAEhC,oBAAA,GAAG,CAAC,eAAe,GAAG,IAAI;AAE1B,oBAAA,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE;;AAEtB,wBAAA,KAAK,CAAC,aAAa,GAAG,IAAI;;AAG1B,wBAAA,GAAG,CAAC,IAAI,CAAC,UAAU,EAAE,MAAK;AACtB,4BAAA,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC;;AAGzB,4BAAA,MAAM,CAAC,UAAU,IAAI;AACzB,wBAAA,CAAC,CAAC;oBACN;AACJ,gBAAA,CAAC,CAAC;YACN;iBAAO;AAEH,gBAAA,MAAM,EAAE,MAAM,EAAE,GAAG,GAAG,CAAC,KAAK;;AAG5B,gBAAA,MAAM,GAAG,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;AAClB,gBAAA,MAAM,IAAI,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;;AAGnB,gBAAA,MAAM,CAAC,WAAW,GAAG,GAAG,CAAC,CAAC,CAAC;AAC3B,gBAAA,MAAM,CAAC,WAAW,GAAG,GAAG,CAAC,CAAC,CAAC;;AAG3B,gBAAA,MAAM,CAAC,cAAc,GAAG,EAAE;AAC1B,gBAAA,MAAM,CAAC,gBAAgB,GAAG,CAAC;;AAG3B,gBAAA,MAAM,CAAC,aAAa,GAAG,IAAI;AAE3B,gBAAA,MAAM,YAAY,GAAG,GAAG,CAAC,OAAO,CAAC,MAAM;;AAGvC,gBAAA,IAAI,CAAC,oBAAoB,GAAG,IAAI;gBAEhC,IAAI,OAAO,GAAG,CAAC;gBACf,IAAI,SAAS,GAAG,CAAC;gBACjB,MAAM,YAAY,GAAG,CAAC,MAAuB,EAAE,KAAY,EAAE,KAAc,EAAE,OAAe,KAAI;AAC5F,oBAAA,IAAI,KAAK,IAAI,CAAC,OAAO,EAAE;;AAGnB,wBAAA,YAAY,CAAC,GAAG,CAAC,aAAa,EAAE,YAAY,CAAC;AAE7C,wBAAA,IAAI,CAAC,oBAAoB,GAAG,KAAK;AACjC,wBAAA,KAAK,CAAC,aAAa,GAAG,IAAI;AAE1B,wBAAA,MAAM,KAAK,GAAG,QAAQ,CAAC,MAAM,GAAG,GAAG,GAAG,IAAI;AAC1C,wBAAA,MAAM,CAAC,WAAW,GAAG,KAAK,CAAC,CAAC,CAAC;AAC7B,wBAAA,MAAM,CAAC,WAAW,GAAG,KAAK,CAAC,CAAC,CAAC;;AAG7B,wBAAA,GAAG,CAAC,IAAI,CAAC,UAAU,EAAE,MAAK;AACtB,4BAAA,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC;;AAGzB,4BAAA,MAAM,CAAC,UAAU,IAAI;AACzB,wBAAA,CAAC,CAAC;oBACN;oBAEA,IAAI,KAAK,EAAE;AACP,wBAAA,GAAG,CAAC,eAAe,GAAG,IAAI;oBAC9B;;AAGA,oBAAA,IAAI,OAAO,KAAK,OAAO,EAAE;wBACrB,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,OAAO,CAAC;AACxC,wBAAA,OAAO,GAAG,SAAS,GAAG,OAAO;AAC7B,wBAAA,KAAK,CAAC,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,SAAS,GAAG,GAAG,CAAC;oBAC1D;AACJ,gBAAA,CAAC;AAED,gBAAA,YAAY,CAAC,EAAE,CAAC,aAAa,EAAE,YAAY,CAAC;YAChD;AACJ,QAAA,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,KAAK,KAAI;AACf,YAAA,OAAO,CAAC,KAAK,CAAC,mCAAmC,EAAE,KAAK,CAAC;;AAE7D,QAAA,CAAC,CAAC;IACN;;AAGA,IAAA,eAAe,CAAC,QAA4B,EAAA;AACxC,QAAA,MAAM,EAAE,MAAM,EAAE,GAAG,IAAI;AACvB,QAAA,MAAM,EAAE,GAAG,EAAE,MAAM,EAAE,GAAG,MAAM;AAC9B,QAAA,MAAM,EAAE,kBAAkB,EAAE,GAAG,QAAQ;AACvC,QAAA,MAAM,EAAE,UAAU,EAAE,GAAG,QAAQ;AAE/B,QAAA,MAAM,iBAAiB,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,MAAM,KAAK,oBAAoB,CAAC,kBAAkB,CAAC,IAAI,QAAQ,CAAC,sBAAsB,CAAC;QAEzH,IAAI,iBAAiB,EAAE;;AAEnB,YAAA,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;AACnB,gBAAA,IAAI,CAAC,WAAW,GAAG,IAAI,WAAW,CAAC,GAAG,EAAE,MAAM,CAAC,MAAM,CAAC;YAC1D;AAEA,YAAA,MAAM,EAAE,WAAW,EAAE,GAAG,IAAI;AAC5B,YAAA,WAAW,CAAC,OAAO,GAAG,IAAI;YAC1B,WAAW,CAAC,SAAS,CAAC,WAAW,GAAG,YAAY,CAAC,QAAQ,CAAC,WAAW,CAAC;YACtE,WAAW,CAAC,SAAS,CAAC,aAAa,GAAG,QAAQ,CAAC,sBAAsB,GAAG,CAAC,mBAAmB,EAAE,mBAAmB,CAAC,GAAG,EAAE;AACvH,YAAA,uBAAuB,CAAC,WAAW,EAAE,kBAAkB,CAAC;YACxD,WAAW,CAAC,MAAM,EAAE;;AAGpB,YAAA,YAAY,CAAC,GAAG,CAAC,GAAG,CAAC,cAAc,EAAE,MAAM,CAAC,CAAC,GAAG,CAAC,gBAAgB,EAAE,UAAU,CAAC;;AAG9E,YAAA,YAAY,CAAC,SAAS,CAAC,iBAAiB,GAAG,YAAA;AACvC,gBAAA,OAAO,IAAI;AACf,YAAA,CAAC;AAED,YAAA,MAAM,CAAC,MAAM,CAAC,UAAU,GAAG,IAAI,KAAK,CAAC,UAAU,CAAC,KAAK,CAAC;QAC1D;aAAO;;AAEH,YAAA,IAAI,IAAI,CAAC,WAAW,EAAE;AAClB,gBAAA,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE;AAC1B,gBAAA,IAAI,CAAC,WAAW,GAAG,IAAI;YAC3B;AAEA,YAAA,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,MAAM,EAAE;gBAChB,MAAM,CAAC,MAAM,CAAC,WAAW,GAAG,YAAY,CAAC,QAAQ,CAAC,WAAW,CAAC;AAC9D,gBAAA,MAAM,CAAC,MAAM,CAAC,UAAU,GAAG,IAAI,KAAK,CAAC,UAAU,CAAC,KAAK,CAAC;YAC1D;QACJ;IACJ;AACH;;ACxbD,MAAM,aAAa,SAAS,MAAM,CAAC;AACnC,IAAI,OAAO,UAAU,GAAG,eAAe;;AAEvC;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,QAAQ,GAAG,yEAAyE;;AAExF,IAAI,WAAW,GAAG,IAAI,GAAG,EAAE;;AAE3B,IAAI,UAAU,GAAG;AACjB,QAAQ,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE;AAC1B,YAAY,OAAO,CAAC,KAAK,CAAC,mEAAmE,CAAC;AAC9F,YAAY;AACZ,QAAQ;;AAER,QAAQ,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,KAAK,EAAE,OAAO,WAAW,KAAK;AAC3D,YAAY,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,MAAM,EAAE;AAC/C,gBAAgB,OAAO,CAAC,IAAI,CAAC,wCAAwC,CAAC;AACtE,gBAAgB;AAChB,YAAY;;AAEZ;AACA,YAAY,MAAM,eAAe,GAAG,WAAW,CAAC,QAAQ,CAAC,GAAG,CAAC,OAAO,SAAS,KAAK;AAClF,gBAAgB,MAAM,UAAU,GAAG,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC,EAAE,SAAS,CAAC,aAAa,CAAC;;AAE/E,gBAAgB,IAAI;AACpB,oBAAoB,MAAM,QAAQ,GAAG,MAAM,KAAK,CAAC,UAAU,CAAC;AAC5D,oBAAoB,IAAI,CAAC,QAAQ,CAAC,EAAE,EAAE;AACtC,wBAAwB,OAAO,IAAI;AACnC,oBAAoB;;AAEpB,oBAAoB,MAAM,OAAO,GAAG,MAAM,QAAQ,CAAC,IAAI,EAAE;AACzD,oBAAoB,MAAM,UAAU,GAAG,OAAO,CAAC,OAAO,CAAC,WAAW,CAAC,UAAU,CAAC,EAAE,SAAS,IAAI,EAAE;AAC/F,oBAAoB,MAAM,SAAS,GAAG,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC,EAAE,OAAO,CAAC,SAAS,CAAC,CAAC,EAAE,WAAW,CAAC,UAAU,CAAC,EAAE,UAAU,CAAC,OAAO,CAAC,kBAAkB,EAAE,EAAE,CAAC,CAAC,CAAC;;AAEpJ;AACA,oBAAoB,MAAM,KAAK,GAAG,MAAM,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,KAAK;AACzE,wBAAwB,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,WAAW,CAAC,SAAS,EAAE,WAAW,EAAE,CAAC,GAAG,EAAE,KAAK,KAAK;AAC5F,4BAA4B,IAAI,GAAG,EAAE,MAAM,CAAC,GAAG,CAAC;AAChD,iCAAiC,OAAO,CAAC,KAAK,CAAC;AAC/C,wBAAwB,CAAC,CAAC;AAC1B,oBAAoB,CAAC,CAAC;;AAEtB,oBAAoB,OAAO,EAAE,SAAS,EAAE,KAAK,EAAE;AAC/C,gBAAgB,CAAC,CAAC,OAAO,KAAK,EAAE;AAChC,oBAAoB,OAAO,CAAC,IAAI,CAAC,CAAC,0BAA0B,EAAE,SAAS,CAAC,CAAC,CAAC;AAC1E,oBAAoB,OAAO,IAAI;AAC/B,gBAAgB;AAChB,YAAY,CAAC,CAAC;;AAEd;AACA,YAAY,MAAM,OAAO,GAAG,MAAM,OAAO,CAAC,GAAG,CAAC,eAAe,CAAC;AAC9D,YAAY,MAAM,gBAAgB,GAAG,OAAO,CAAC,IAAI,CAAC,MAAM,IAAI,MAAM,KAAK,IAAI,CAAC;;AAE5E,YAAY,IAAI,gBAAgB,EAAE;AAClC,gBAAgB,MAAM,EAAE,KAAK,EAAE,GAAG,gBAAgB;AAClD,gBAAgB,MAAM,SAAS,GAAG,KAAK,CAAC,QAAQ;AAChD,gBAAgB,MAAM,MAAM,GAAG,SAAS,CAAC,uBAAuB,EAAE;AAClE,gBAAgB,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC;;AAE9C,gBAAgB,MAAM,QAAQ,GAAG,IAAI,GAAG,EAAE;AAC1C,gBAAgB,IAAI,WAAW,CAAC,IAAI,EAAE;AACtC,oBAAoB,KAAK,MAAM,KAAK,IAAI,WAAW,CAAC,IAAI,CAAC,MAAM,EAAE;AACjE,wBAAwB,MAAM,WAAW,GAAG,MAAM,CAAC,UAAU,CAAC,KAAK,CAAC,EAAE,CAAC;AACvE,wBAAwB,IAAI,WAAW,EAAE;AACzC,4BAA4B,QAAQ,CAAC,GAAG,CAAC,KAAK,EAAE,WAAW,CAAC;AAC5D,wBAAwB;AACxB,oBAAoB;AACpB,gBAAgB;;AAEhB,gBAAgB,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,WAAW,EAAE,EAAE,MAAM,EAAE,QAAQ,EAAE,CAAC;AACvE,YAAY,CAAC,MAAM;AACnB,gBAAgB,OAAO,CAAC,IAAI,CAAC,8BAA8B,CAAC;AAC5D,YAAY;AACZ,QAAQ,CAAC,CAAC;;AAEV,QAAQ,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,WAAW,KAAK;AACxD,YAAY,MAAM,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,WAAW,CAAC;AAChE,YAAY,IAAI,UAAU,EAAE;AAC5B,gBAAgB,UAAU,CAAC,MAAM,CAAC,OAAO,EAAE;AAC3C,gBAAgB,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,WAAW,CAAC;AACpD,YAAY;AACZ,QAAQ,CAAC,CAAC;AACV,IAAI;;AAEJ,IAAI,MAAM,CAAC,EAAE,EAAE;AACf,QAAQ,IAAI,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,MAAM,EAAE;AACjC,YAAY,KAAK,MAAM,CAAC,WAAW,EAAE,EAAE,MAAM,EAAE,QAAQ,EAAE,CAAC,IAAI,IAAI,CAAC,WAAW,EAAE;AAChF,gBAAgB,IAAI,WAAW,CAAC,IAAI,EAAE;AACtC,oBAAoB,KAAK,MAAM,CAAC,KAAK,EAAE,WAAW,CAAC,IAAI,QAAQ,EAAE;AACjE,wBAAwB,WAAW,CAAC,WAAW,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC;AACpE,wBAAwB,WAAW,CAAC,WAAW,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC;AACpE,oBAAoB;AACpB,gBAAgB,CAAC,MAAM;AACvB,oBAAoB,MAAM,CAAC,WAAW,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC;AACjE,oBAAoB,MAAM,CAAC,WAAW,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC;AACjE,gBAAgB;AAChB,YAAY;AACZ,QAAQ;AACR,IAAI;AACJ;;ACxGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,YAAY,SAAS,MAAM,CAAC;AAClC,IAAI,OAAO,UAAU,GAAG,cAAc;;AAEtC;AACA;AACA;AACA;AACA,IAAI,cAAc,GAAG,IAAI;;AAEzB;AACA;AACA;AACA;AACA,IAAI,UAAU,GAAG,IAAI;;AAErB;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,aAAa,GAAG,GAAG;;AAEvB;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,WAAW,GAAG,EAAE;;AAEpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,iBAAiB,GAAG,GAAG;;AAE3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,eAAe,GAAG,GAAG;;AAEzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,oBAAoB,GAAG,IAAI;;AAE/B;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,mBAAmB,GAAG,EAAE;;AAE5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,uBAAuB,GAAG,GAAG;;AAEjC;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,yBAAyB,GAAG,EAAE;;AAElC;AACA;AACA;AACA;AACA;AACA,IAAI,kBAAkB,GAAG,IAAI,KAAK,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;;AAE3C;AACA;AACA;AACA;AACA;AACA,IAAI,oBAAoB,GAAG,IAAI,KAAK,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;;AAE7C;AACA;AACA;AACA;AACA;AACA,IAAI,kBAAkB,GAAG,IAAI,KAAK,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;;AAE3C;AACA,IAAI,YAAY,GAAG,IAAI,GAAG,EAAE;;AAE5B;AACA,IAAI,cAAc,GAAG,IAAI,GAAG,EAAE;;AAE9B;AACA,IAAI,aAAa,GAAG,IAAI,GAAG,EAAE;;AAE7B;AACA,IAAI,eAAe,GAAG,CAAC;;AAEvB;AACA,IAAI,QAAQ,GAAG,IAAI,IAAI,EAAE;;AAEzB,IAAI,QAAQ,GAAG,IAAI,IAAI,EAAE;;AAEzB,IAAI,QAAQ,GAAG,IAAI,IAAI,EAAE;;AAEzB,IAAI,QAAQ,GAAG,IAAI,IAAI,EAAE;;AAEzB;AACA,IAAI,UAAU,GAAG,IAAI,KAAK,EAAE;;AAE5B,IAAI,YAAY,GAAG,IAAI,KAAK,EAAE;;AAE9B,IAAI,QAAQ,GAAG,IAAI,KAAK,EAAE;;AAE1B;AACA;AACA,IAAI,YAAY,GAAG,IAAI;;AAEvB,IAAI,UAAU,GAAG;AACjB,QAAQ,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE;AAC1B,YAAY,OAAO,CAAC,KAAK,CAAC,kEAAkE,CAAC;AAC7F,YAAY;AACZ,QAAQ;;AAER;AACA,QAAQ,MAAM,OAAO,GAAG,EAAE;AAC1B,QAAQ,IAAI,IAAI,CAAC,cAAc,EAAE,OAAO,CAAC,IAAI,CAAC,eAAe,CAAC;AAC9D,QAAQ,IAAI,IAAI,CAAC,UAAU,EAAE,OAAO,CAAC,IAAI,CAAC,iBAAiB,CAAC;AAC5D,QAAQ,OAAO,CAAC,GAAG,CAAC,CAAC,gCAAgC,EAAE,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;;AAE5E,QAAQ,IAAI,CAAC,IAAI,CAAC,cAAc,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;AACtD,YAAY,OAAO,CAAC,IAAI,CAAC,uFAAuF,CAAC;AACjH,QAAQ;;AAER;AACA,QAAQ,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC;AACrD,QAAQ,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,oBAAoB,CAAC;AACzD,QAAQ,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC;;AAEnD;AACA,QAAQ,MAAM,eAAe,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,QAAQ,CAAC;AACnE,QAAQ,IAAI,CAAC,YAAY,GAAG,eAAe,GAAG,eAAe,CAAC,MAAM,GAAG,IAAI;;AAE3E,QAAQ,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;AAChC,YAAY,OAAO,CAAC,IAAI,CAAC,0EAA0E,CAAC;;AAEpG;AACA,YAAY,MAAM,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,QAAQ,CAAC;AAChE,YAAY,IAAI,CAAC,YAAY,sDAAsD,WAAW,CAAC;;AAE/F;AACA,YAAY,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;AACpC,gBAAgB,KAAK,MAAM,KAAK,IAAI,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE;AAC1D,oBAAoB,MAAM,WAAW,+CAA+C,KAAK,CAAC;AAC1F,oBAAoB,IAAI,WAAW,CAAC,MAAM,EAAE;AAC5C,wBAAwB,IAAI,CAAC,YAAY,GAAG,WAAW;AACvD,wBAAwB;AACxB,oBAAoB;AACpB,gBAAgB;AAChB,YAAY;;AAEZ,YAAY,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;AACpC,gBAAgB,OAAO,CAAC,KAAK,CAAC,qFAAqF,CAAC;AACpH,YAAY;AACZ,QAAQ;;AAER,QAAQ,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,KAAK,EAAE,CAAC,WAAW,KAAK;AACrD,YAAY,MAAM,iBAAiB,GAAG,MAAM;AAC5C,gBAAgB,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC;AAC1D,YAAY,CAAC;;AAEb,YAAY,MAAM,eAAe,GAAG,MAAM;AAC1C,gBAAgB,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,WAAW,EAAE,KAAK,CAAC;AAC3D,gBAAgB,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC;AAC7C,YAAY,CAAC;;AAEb;AACA,YAAY,WAAW,CAAC,EAAE,CAAC,aAAa,EAAE,iBAAiB,CAAC;AAC5D,YAAY,WAAW,CAAC,EAAE,CAAC,WAAW,EAAE,eAAe,CAAC;;AAExD;AACA,YAAY,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,WAAW,EAAE,EAAE,iBAAiB,EAAE,eAAe,EAAE,CAAC;AACvF,YAAY,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,WAAW,CAAC;AAC9C,QAAQ,CAAC,CAAC;;AAEV,QAAQ,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,WAAW,KAAK;AACxD,YAAY,MAAM,QAAQ,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,WAAW,CAAC;AAChE,YAAY,IAAI,QAAQ,EAAE;AAC1B,gBAAgB,WAAW,CAAC,GAAG,CAAC,aAAa,EAAE,QAAQ,CAAC,iBAAiB,CAAC;AAC1E,gBAAgB,WAAW,CAAC,GAAG,CAAC,WAAW,EAAE,QAAQ,CAAC,eAAe,CAAC;AACtE,gBAAgB,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,WAAW,CAAC;AACtD,YAAY;AACZ,YAAY,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,WAAW,CAAC;AACnD,YAAY,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,WAAW,CAAC;AACjD,QAAQ,CAAC,CAAC;AACV,IAAI;;AAEJ,IAAI,qBAAqB,CAAC,MAAM,EAAE,SAAS,EAAE;AAC7C;AACA,QAAQ,IAAI,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,OAAO,EAAE,OAAO,IAAI,CAAC;;AAEzD,QAAQ,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC;AACzC,QAAQ,IAAI,CAAC,GAAG,CAAC,EAAE,OAAO,IAAI,CAAC;;AAE/B,QAAQ,OAAO,IAAI,IAAI;AACvB,YAAY,MAAM,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,GAAG,CAAC;AACtC,YAAY,CAAC;AACb,YAAY,MAAM,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,GAAG;AACrC,SAAS;AACT,IAAI;;AAEJ,IAAI,WAAW,CAAC,WAAW,EAAE;AAC7B,QAAQ,MAAM,MAAM,GAAG,WAAW,CAAC,SAAS,EAAE;AAC9C,QAAQ,MAAM,SAAS,GAAG,WAAW,CAAC,YAAY,EAAE;;AAEpD,QAAQ,MAAM,QAAQ,GAAG,IAAI,CAAC,qBAAqB,CAAC,MAAM,EAAE,SAAS,CAAC;AACtE,QAAQ,IAAI,QAAQ,EAAE;AACtB,YAAY,MAAM,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC,CAAC;AACvD,YAAY,QAAQ,CAAC,CAAC,GAAG,OAAO;AAChC,YAAY,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC;AAC7C,QAAQ;AACR,IAAI;;AAEJ,IAAI,MAAM,CAAC,EAAE,EAAE;AACf;AACA,QAAQ,IAAI,IAAI,CAAC,UAAU,EAAE;AAC7B,YAAY,IAAI,CAAC,sBAAsB,CAAC,EAAE,CAAC;AAC3C,QAAQ;;AAER;AACA,QAAQ,IAAI,IAAI,CAAC,cAAc,EAAE;AACjC,YAAY,IAAI,CAAC,mBAAmB,EAAE;AACtC,QAAQ;;AAER;AACA,QAAQ,IAAI,CAAC,oBAAoB,EAAE;AACnC,IAAI;;AAEJ,IAAI,sBAAsB,CAAC,EAAE,EAAE;AAC/B,QAAQ,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;;AAEhC,QAAQ,KAAK,MAAM,WAAW,IAAI,IAAI,CAAC,YAAY,EAAE;AACrD;AACA,YAAY,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE;;AAEtC;AACA,YAAY,IAAI,WAAW,CAAC,UAAU,KAAK,MAAM,EAAE;AACnD;AACA,gBAAgB,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;;AAE3F;AACA,gBAAgB,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,GAAG,IAAI,CAAC,iBAAiB,EAAE;AACrE,oBAAoB,IAAI,CAAC,QAAQ,CAAC,SAAS,EAAE;;AAE7C;AACA,oBAAoB,MAAM,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO;AAC7D,oBAAoB,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC;AAC/C,oBAAoB,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC;AAC/C,oBAAoB,IAAI,CAAC,QAAQ,CAAC,SAAS,EAAE;;AAE7C;AACA,oBAAoB,MAAM,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,GAAG,CAAC;;AAE1F;AACA,oBAAoB,MAAM,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC;AAC/F,oBAAoB,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC;AACvG,oBAAoB,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC;;AAEvC;AACA,oBAAoB,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;;AAEpE;AACA,oBAAoB,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;AAC9E,gBAAgB;AAChB,YAAY,CAAC,MAAM,IAAI,WAAW,CAAC,UAAU,KAAK,OAAO,EAAE;AAC3D,gBAAgB,IAAI,CAAC,iBAAiB,CAAC,WAAW,CAAC;AACnD,YAAY;AACZ,QAAQ;AACR,IAAI;;AAEJ,IAAI,iBAAiB,CAAC,WAAW,EAAE;AACnC;AACA,QAAQ,MAAM,MAAM,GAAG,CAAC,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC;;AAEnD;AACA,QAAQ,IAAI,IAAI,CAAC,eAAe,GAAG,CAAC,IAAI,MAAM,GAAG,IAAI,CAAC,oBAAoB,EAAE;AAC5E,YAAY,IAAI,CAAC,eAAe,GAAG,CAAC;AACpC,QAAQ,CAAC,MAAM,IAAI,IAAI,CAAC,eAAe,GAAG,CAAC,IAAI,MAAM,GAAG,CAAC,IAAI,CAAC,oBAAoB,EAAE;AACpF,YAAY,IAAI,CAAC,eAAe,GAAG,CAAC;AACpC,QAAQ;;AAER;AACA,QAAQ,IAAI,IAAI,CAAC,eAAe,KAAK,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,eAAe,EAAE;AACnF,YAAY,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;;AAEpD,YAAY,IAAI,IAAI,CAAC,YAAY,EAAE;AACnC;AACA,gBAAgB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,gBAAgB,EAAE,CAAC;AACxE,gBAAgB,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,IAAI,CAAC,QAAQ,CAAC;AACzD,gBAAgB,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC;AACnF,gBAAgB,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;AACvE,YAAY;AACZ,QAAQ;AACR,IAAI;;AAEJ,IAAI,mBAAmB,GAAG;AAC1B,QAAQ,KAAK,MAAM,WAAW,IAAI,IAAI,CAAC,YAAY,EAAE;AACrD;AACA,YAAY,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,WAAW,CAAC,EAAE;;AAEvD,YAAY,MAAM,KAAK,GAAG,WAAW,CAAC,SAAS,EAAE;AACjD,YAAY,MAAM,SAAS,GAAG,WAAW,CAAC,YAAY,EAAE;;AAExD,YAAY,MAAM,QAAQ,GAAG,IAAI,CAAC,qBAAqB,CAAC,KAAK,EAAE,SAAS,CAAC;;AAEzE,YAAY,IAAI,QAAQ,IAAI,IAAI,CAAC,uBAAuB,CAAC,QAAQ,CAAC,EAAE;AACpE;AACA,gBAAgB,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,KAAK,EAAE,QAAQ,EAAE,IAAI,CAAC,UAAU,CAAC;AACnE,gBAAgB,IAAI,CAAC,qBAAqB,CAAC,QAAQ,CAAC;AACpD,YAAY,CAAC,MAAM;AACnB;AACA,gBAAgB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC;AAC5F,gBAAgB,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,YAAY,CAAC;AAC1E,YAAY;AACZ,QAAQ;AACR,IAAI;;AAEJ,IAAI,oBAAoB,GAAG;AAC3B;AACA;AACA,QAAQ,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;;AAE9B,QAAQ,KAAK,MAAM,WAAW,IAAI,IAAI,CAAC,YAAY,EAAE;AACrD;AACA,YAAY,IAAI,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,WAAW,CAAC,EAAE;;AAEtD,YAAY,MAAM,KAAK,GAAG,WAAW,CAAC,SAAS,EAAE;AACjD,YAAY,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,YAAY,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC;AAClF,YAAY,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC;AAClE,QAAQ;AACR,IAAI;;AAEJ,IAAI,uBAAuB,CAAC,QAAQ,EAAE;AACtC,QAAQ,MAAM,QAAQ,GAAG,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC;AACrE,QAAQ,OAAO,QAAQ,IAAI,IAAI,CAAC,mBAAmB;AACnD,IAAI;;AAEJ,IAAI,qBAAqB,CAAC,KAAK,EAAE;AACjC;AACA,QAAQ,MAAM,QAAQ,GAAG,IAAI,CAAC,yBAAyB;AACvD,QAAQ,MAAM,MAAM,GAAG,IAAI,CAAC,uBAAuB;;AAEnD,QAAQ,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,EAAE,CAAC,EAAE,EAAE;AAC3C,YAAY,MAAM,MAAM,GAAG,CAAC,CAAC,GAAG,QAAQ,IAAI,IAAI,CAAC,EAAE,GAAG,CAAC;AACvD,YAAY,MAAM,MAAM,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,QAAQ,IAAI,IAAI,CAAC,EAAE,GAAG,CAAC;;AAE7D,YAAY,MAAM,EAAE,GAAG,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,GAAG,MAAM;AAC1D,YAAY,MAAM,EAAE,GAAG,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,GAAG,MAAM;AAC1D,YAAY,MAAM,EAAE,GAAG,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,GAAG,MAAM;AAC1D,YAAY,MAAM,EAAE,GAAG,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,GAAG,MAAM;;AAE1D;AACA,YAAY,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC;AAC5C,YAAY,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,EAAE,IAAI,EAAE,EAAE,CAAC;;AAE3C,YAAY,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,UAAU,CAAC;AAC5E,QAAQ;AACR,IAAI;AACJ;;ACtYA;AACA,MAAM,MAAM,GAAG,CAAC,MAAc,KAAI;IAC9B,MAAM,EAAE,GAAG,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG,MAAM;IAE7C,KAAK,CAAC,KAAK,GAAG,GAAG,CAAC,EAAE,CAAC,WAAW,CAAC,cAAc,CAAC;IAChD,KAAK,CAAC,KAAK,GAAG,GAAG,CAAC,EAAE,CAAC,WAAW,CAAC,cAAc,CAAC;;IAGhD,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,wBAAwB,EAAE,CAAC,SAAS,KAAI;AAC9C,QAAA,KAAK,CAAC,KAAK,GAAG,SAAS;AAC3B,IAAA,CAAC,CAAC;IACF,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,wBAAwB,EAAE,CAAC,SAAS,KAAI;AAC9C,QAAA,KAAK,CAAC,KAAK,GAAG,SAAS;AAC3B,IAAA,CAAC,CAAC;AAEF,IAAA,MAAM,MAAM,GAAG,MAAM,CAAC,MAAgB;AACtC,IAAA,MAAM,UAAU,GAAG,IAAI,KAAK,EAAE;AAE9B,IAAA,MAAM,cAAc,GAAG,IAAI,IAAI,EAAE;AACjC,IAAA,MAAM,cAAc,GAAG,IAAI,IAAI,EAAE;AACjC,IAAA,MAAM,cAAc,GAAG,IAAI,IAAI,EAAE;AACjC,IAAA,MAAM,cAAc,GAAG,IAAI,IAAI,EAAE;AACjC,IAAA,MAAM,MAAM,GAAG,IAAI,IAAI,EAAE;AAEzB,IAAA,MAAM,CAAC,YAAY,CAAC,QAAQ,CAAC;AAC7B,IAAA,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,aAAa,CAAC;AACnC,IAAA,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,YAAY,CAAC;IAElC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE,MAAK;AACpB,QAAA,GAAG,CAAC,UAAU,GAAG,IAAI;;QAGrB,cAAc,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC;QACzC,cAAc,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC;QACzC,cAAc,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC;QACzC,cAAc,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC;AAEzC,QAAA,cAAc,CAAC,cAAc,CAAC,MAAM,CAAC;;AAGrC,QAAA,MAAM,CAAC,WAAW,CAAC,cAAc,CAAC,CAAC,EAAE,CAAC,EAAE,cAAc,CAAC,CAAC,CAAC;QACzD,MAAM,CAAC,cAAc,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC;QAErC,IAAI,GAAG,CAAC,EAAE,CAAC,IAAI,KAAK,cAAc,EAAE;YAChC,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC;AACzC,YAAA,MAAM,CAAC,MAAM,CAAC,UAAU,GAAG,IAAI,KAAK,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QACpD;AACJ,IAAA,CAAC,CAAC;IAEF,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,KAAK,EAAE,MAAK;AAClB,QAAA,GAAG,CAAC,UAAU,GAAG,KAAK;;AAGtB,QAAA,MAAM,CAAC,WAAW,CAAC,cAAc,CAAC;AAClC,QAAA,MAAM,CAAC,WAAW,CAAC,cAAc,CAAC;AAClC,QAAA,MAAM,CAAC,WAAW,CAAC,cAAc,CAAC;AAClC,QAAA,MAAM,CAAC,WAAW,CAAC,cAAc,CAAC;QAElC,IAAI,GAAG,CAAC,EAAE,CAAC,IAAI,KAAK,cAAc,EAAE;AAChC,YAAA,MAAM,CAAC,MAAM,CAAC,UAAU,GAAG,UAAU;QACzC;AACJ,IAAA,CAAC,CAAC;AAEF,IAAA,MAAM,CAAC,EAAE,CAAC,SAAS,EAAE,MAAK;AACtB,QAAA,GAAG,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAoB,EAAE,cAAc,EAAE,aAAa,CAAC;AACpG,IAAA,CAAC,CAAC;AAEF,IAAA,MAAM,CAAC,EAAE,CAAC,SAAS,EAAE,MAAK;AACtB,QAAA,GAAG,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAoB,EAAE,cAAc,EAAE,aAAa,CAAC;AACpG,IAAA,CAAC,CAAC;IAEF,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,CAAC,KAAK,KAAI;QAC9B,IAAI,KAAK,KAAK,QAAQ,IAAI,GAAG,CAAC,EAAE,CAAC,MAAM,EAAE;AACrC,YAAA,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE;QAChB;AACJ,IAAA,CAAC,CAAC;AACN,CAAC;;;;ACrED,MAAM,UAAU,GAAG,OAAO,GAAY,EAAE,MAAc,EAAE,gBAA4C,KAAI;IACpG,MAAM,EAAE,QAAQ,EAAE,UAAU,EAAE,OAAO,EAAE,EAAE,EAAE,GAAG,MAAM;IACpD,MAAM,CAAC,GAAG,QAAkC;IAC5C,MAAM,QAAQ,GAAG,IAAI,GAAG,CAAC,UAAU,EAAE,QAAQ,CAAC,IAAI,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE;IAC7E,MAAM,IAAI,GAAG,QAAQ,CAAC,WAAW,EAAE,KAAK,WAAW,GAAG,MAAM,CAAC,MAAM,QAAQ,EAAE,IAAI,EAAE,GAAG,SAAS;IAC/F,MAAM,KAAK,GAAG,IAAI,KAAK,CAAC,QAAQ,EAAE,QAAQ,EAAE,EAAE,GAAG,EAAE,UAAU,EAAE,QAAQ,EAAE,QAAQ,EAAE,CAAC,EAAE,EAAE,IAAI,CAAC;IAE7F,OAAO,IAAI,OAAO,CAAS,CAAC,OAAO,EAAE,MAAM,KAAI;AAC3C,QAAA,KAAK,CAAC,EAAE,CAAC,MAAM,EAAE,MAAK;AAClB,YAAA,MAAM,MAAM,GAAG,IAAI,MAAM,CAAC,QAAQ,CAAC;YACnC,MAAM,CAAC,mBAAmB,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC;AACrC,YAAA,MAAM,CAAC,YAAY,CAAC,QAAQ,EAAE;gBAC1B,OAAO,EAAE,OAAO,IAAI,QAAQ,CAAC,WAAW,EAAE,CAAC,QAAQ,CAAC,eAAe,CAAC;gBACpE;AACH,aAAA,CAAC;;YAEF,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,OAAO,EAAE;gBAC9B,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,SAAS,CAAC,WAAW,EAAE,IAAI,CAAC;YACvD;AACA,YAAA,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC;YACzB,OAAO,CAAC,MAAM,CAAC;AACnB,QAAA,CAAC,CAAC;QAEF,IAAI,SAAS,GAAG,CAAC;QACjB,KAAK,CAAC,EAAE,CAAC,UAAU,EAAE,CAAC,QAAQ,EAAE,MAAM,KAAI;AACtC,YAAA,MAAM,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,QAAQ,GAAG,MAAM,CAAC,GAAG,GAAG;AACrD,YAAA,IAAI,QAAQ,GAAG,SAAS,EAAE;gBACtB,SAAS,GAAG,QAAQ;gBACpB,gBAAgB,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;YAC3C;AACJ,QAAA,CAAC,CAAC;QAEF,KAAK,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC,GAAG,KAAI;AACtB,YAAA,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC;YAChB,MAAM,CAAC,GAAG,CAAC;AACf,QAAA,CAAC,CAAC;AAEF,QAAA,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC;AACrB,QAAA,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;AAC1B,IAAA,CAAC,CAAC;AACN,CAAC;AAED,MAAM,UAAU,GAAG,CAAC,GAAY,EAAE,GAAW,KAAI;IAC7C,OAAO,IAAI,OAAO,CAAQ,CAAC,OAAO,EAAE,MAAM,KAAI;QAC1C,MAAM,KAAK,GAAG,IAAI,KAAK,CAAC,QAAQ,EAAE,SAAS,EAAE;YACzC;SACH,EAAE;AACC,YAAA,IAAI,EAAE,MAAM;AACZ,YAAA,OAAO,EAAE,KAAK;AACd,YAAA,QAAQ,EAAE,QAAQ;AAClB,YAAA,QAAQ,EAAE;AACb,SAAA,CAAC;AAEF,QAAA,KAAK,CAAC,EAAE,CAAC,MAAM,EAAE,MAAK;YAClB,OAAO,CAAC,KAAK,CAAC;AAClB,QAAA,CAAC,CAAC;QAEF,KAAK,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC,GAAG,KAAI;AACtB,YAAA,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC;YAChB,MAAM,CAAC,GAAG,CAAC;AACf,QAAA,CAAC,CAAC;AAEF,QAAA,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC;AACrB,QAAA,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;AAC1B,IAAA,CAAC,CAAC;AACN,CAAC;AAED,MAAM,IAAI,GAAG,CAAC,GAAY,EAAE,MAAc,EAAE,YAAiB,EAAE,MAAc,KAAI;AAC7E,IAAA,MAAM,MAAM,GAAG,IAAI,YAAY,EAAE;AAEjC,IAAA,MAAM,KAAK,GAAG,OAAO,CAAC,MAAM,EAAE;AAC1B,QAAA,aAAa,EAAE,KAAK;AACpB,QAAA,MAAM,EAAE,IAAI;AACZ,QAAA,QAAQ,EAAE,CAAC;AACX,QAAA,SAAS,EAAE,SAAS;AACpB,QAAA,UAAU,EAAE,OAAO;AACnB,QAAA,YAAY,EAAE,KAAK;AACnB,QAAA,iBAAiB,EAAE,CAAC;AACpB,QAAA,aAAa,EAAE,CAAC;AAChB,QAAA,eAAe,EAAE,IAAI;AACrB,QAAA,KAAK,EAAE,KAAK;AACZ,QAAA,KAAK,EAAE,KAAK;AACZ,QAAA,YAAY,EAAE,KAAK;AACnB,QAAA,cAAc,EAAE;AACnB,KAAA,CAAC;AAEF,IAAA,MAAM,MAAM,GAAW;QACnB,GAAG;AACH,QAAA,QAAQ,EAAE,cAAc,CAAC,YAAY,CAAC;QACtC,MAAM;QACN,KAAK;QACL,MAAM;QACN;KACH;;AAGD,IAAA,IAAI,MAAM,CAAC,MAAM,EAAE;QACf,UAAU,CAAC,MAAM,CAAC;IACtB;AAEA,IAAA,MAAM,CAAC,YAAY,CAAC,QAAQ,CAAC;;IAG7B,MAAM,CAAC,MAAM,CAAC;;AAGd,IAAA,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE;QACd,MAAM,CAAC,MAAM,CAAC;IAClB;;IAGA,MAAM,UAAU,GAAG,UAAU,CACzB,GAAG,EACH,MAAM,EACN,CAAC,QAAgB,KAAI;AACjB,QAAA,KAAK,CAAC,QAAQ,GAAG,QAAQ;AAC7B,IAAA,CAAC,CACJ;;AAGD,IAAA,MAAM,UAAU,GAAG,MAAM,CAAC,SAAS;AAC/B,QAAA,UAAU,CAAC,GAAG,EAAE,MAAM,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,CAAC,KAAK,KAAI;YAC7C,GAAG,CAAC,KAAK,CAAC,QAAQ,GAAG,KAAK,CAAC,QAAmB;AAClD,QAAA,CAAC,CAAC;;AAGN,IAAA,IAAI,MAAM,CAAC,QAAQ,CAAC,QAAQ,EAAE;QAC1B,MAAM,KAAK,GAAG,IAAI,KAAK,CAAC,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC;AACjD,QAAA,KAAK,CAAC,WAAW,GAAG,WAAW;QAC/B,QAAQ,CAAC,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,MAAK;YACzC,IAAI,KAAK,EAAE;gBACP,KAAK,CAAC,IAAI,EAAE;YAChB;AACJ,QAAA,CAAC,EAAE;AACC,YAAA,OAAO,EAAE,IAAI;AACb,YAAA,IAAI,EAAE;AACT,SAAA,CAAC;IACN;;IAGA,OAAO,IAAI,MAAM,CAAC,MAAM,EAAE,UAAU,EAAE,UAAU,CAAC;AACrD;AAEA,OAAO,CAAC,GAAG,CAAC,CAAA,mBAAA,EAAsBC,OAAU,CAAA,WAAA,EAAcC,SAAa,CAAA,EAAA,EAAKC,QAAc,CAAA,CAAA,CAAG,CAAC;;;;","x_google_ignoreList":[19,20]}